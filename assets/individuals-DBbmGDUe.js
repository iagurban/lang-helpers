var ef=Object.defineProperty;var tf=(e,t,r)=>t in e?ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ne=(e,t,r)=>tf(e,typeof t!="symbol"?t+"":t,r);import{r as rf,a as nf,b as Yn}from"./vendor-DjM8dQTy.js";function jv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class of extends Error{constructor(t){super("Programming error"+(t?`: ${t}`:""))}}const sf=(e,t)=>{if(!e)throw new of(t?.())};class Jt{constructor(t){Ne(this,"_m");this._m=new Map(t)}clear(){this._m.clear()}delete(t){return this._m.delete(t)}forEach(t){for(const[r,n]of this._m)t(n,r,this)}get(t){return this._m.get(t)}has(t){return this._m.has(t)}set(t,r){return this._m.set(t,r),this}get size(){return this._m.size}static groupedBy(t,r){const n=new Jt;for(const o of t)n.update(r(o),s=>s?(s.push(o),s):[o]);return n}static mappedBy(t,r){const n=new Jt;for(const o of t)n.set(r(o),o);return n}getOrCreate(t,r,n){let o=this.get(t);return o==null?this.set(t,o=r(t)):n&&n(o,t),o}update(t,r){return this.set(t,r(this.get(t),t))}mapEntries(t){return new Jt([...this.entries()].map(([r,n])=>[r,t(n,r)]))}toArray(t){return[...this.entries()].map(([r,n])=>t(n,r))}valuesToArray(t){return[...this.values()].map(r=>t(r))}deleteKeys(t){for(const r of t)this.delete(r);return this}assign(t){for(const[r,n]of t)this.set(r,n);return this}backup(t){const r=t?t(this):new Jt(this);return()=>{this.clear(),this.assign(r)}}filter(t){return new Jt([...this.entries()].filter(([r,n])=>t(n,r)))}freeze(){const t={value(){throw new Error("Can not mutate frozen ExMap")},configurable:!1,enumerable:!1};for(const r of["set","delete","clear"])Object.defineProperty(this,r,t);return Object.freeze(this),this}[Symbol.iterator](){return this._m[Symbol.iterator]()}entries(){return this._m.entries()}keys(){return this._m.keys()}values(){return this._m.values()}get[Symbol.toStringTag](){return"ExMap"}}const ve=(e,t)=>Object.assign(e,{type:t}),os=Symbol("gettrTag:cachedTypeSymbol"),xu=(e,t,r=!0)=>(Object.defineProperty(e,"type",{get:r?()=>e[os]??(e[os]=t()):t,set:void 0,enumerable:!0,configurable:!0}),e),Ou=e=>e.type??"[unknown]",af=(e,t=[])=>{const r=t.filter(n=>n!=null&&n!==!1);return r.length===0?e:`${e}(${r.join(", ")})`};ve(e=>e!=null,"[defined]");ve(e=>e!==void 0,"!undefined");ve(e=>e!==null,"!null");const Rv=ve(e=>!!e,"[truthy]"),Tv=ve(e=>e===void 0,"undefined");ve(e=>e===null,"null");ve(e=>e==null,"(null|undefined)");ve(e=>typeof e=="symbol","symbol");ve(e=>e instanceof Error,"error");ve(e=>e instanceof RegExp,"regexp");ve(e=>e instanceof Map,"map");ve(e=>e instanceof Set,"set");const uf=ve(e=>Array.isArray(e),"readonly-array");function Ev(e,t,r){if(!t(e)){const n=r(e);throw typeof n=="string"?new Error(n):n}return e}const cf=(e,t)=>r=>e(r)&&t(r),lf=e=>({push(t){this.run=cf(this.run,t)},run:e}),Mv=(e={})=>{const t=(()=>{const n=lf(a=>!0),{minLength:o,maxLength:s,check:i}=e;return o!=null&&n.push(a=>a.length>=o),s!=null&&n.push(a=>a.length<=s),i!=null&&n.push(i),n.run})(),{item:r}=e;return xu(n=>{if(!Array.isArray(n)||!t(n))return!1;if(r==null)return!0;for(const o of n)if(!r(o))return!1;return!0},()=>af(`${r?Ou(r):"unknown"}[]`,[e.minLength!=null&&`len>=${e.minLength}`,e.maxLength!=null&&`len<=${e.maxLength}`,e.check&&(e.checkName??"custom")]))},Iv=ve(e=>typeof e=="boolean","boolean"),$v=ve(e=>typeof e=="object"&&e!=null&&!Array.isArray(e),"some-object"),kv=(...e)=>xu(t=>{for(const r of e)if(r(t))return!0;return!1},()=>`(${e.map(t=>Ou(t)).join(" | ")})`),Dv=ve(e=>typeof e=="string","string");class Ui extends Error{}const ff=(e,t="arg is null")=>{if(e==null){if(typeof t=="string")throw new Ui(t);const r=t();throw typeof r=="string"?new Ui(r):r}return e},Nv=(e,t)=>Array.from({length:e},(r,n)=>t(n)),qi=(e,t,r)=>(Object.defineProperty(e,t,{value:r,writable:!1,enumerable:!0,configurable:!0}),r);function Rr(e,t,r,n){if(r===!0)return qi(e,t,n);const{get:o,set:s}=r;if(!o||s)throw new Error("decorator must be called on getters only");return{get(){return qi(this,t,o.call(this))},enumerable:!0,configurable:!0}}const df=globalThis.crypto?.getRandomValues?(()=>{const e=t=>{const r=new Uint8Array(t);return globalThis.crypto.getRandomValues(r),r};return Object.assign(e,{hex:t=>Array.from(e(t)).map(r=>r.toString(16).padStart(2,"0")).join("")})})():(e=>Object.assign(t=>e.randomBytes(t),{hex:t=>e.randomBytes(t).toString("hex")}))(typeof require=="function"?require("crypto"):{randomBytes:Object.assign(()=>{throw new Error("Secure random generation not supported")},{hex:()=>{throw new Error("Secure random generation not supported")}})});function dn(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}class hf{constructor(t,r=20){Ne(this,"base");Ne(this,"powers",[1n]);if(this.base=t,t<2n)throw new Error("mapping length must be > 1");this.get(Math.max(1,r)-1)}get(t){let r=this.powers.length-1;for(;t>r++;)this.powers.push(this.base*this.powers[this.powers.length-1]);return this.powers[t]}}class Tr{constructor(t){Ne(this,"parts");Ne(this,"from10",t=>{if(typeof t=="number"&&Math.floor(t)!==t)throw new Error(`n is floating ${t}`);let r=BigInt(t);if(r<0n)throw new Error(`n is negative: ${r}`);const{base:n,digits:o}=this;if(n===10n)throw new Error("mapping length must be != 10");const s=[];do s.push(o[Number(r%n)]),r/=n;while(r>0n);return String.fromCharCode(...s.reverse())});Ne(this,"to10",t=>{const{byChar:r,powers:n}=this;let o=0n;for(let s=t.length-1;s>=0;--s){const i=r.get(t.charCodeAt(s));if(i===void 0)throw new Error(`invalid char '${t[s]}' in '${t}'`);o+=i*n.get(t.length-1-s)}return o});Ne(this,"mask",t=>{const r=this.digits[this.digits.length-1];return String.fromCharCode(...Array.from({length:t},()=>r))});Ne(this,"random",t=>{if(t<1||Math.floor(t)!==t)throw new Error(`random length must be integer > 0, got ${t}`);return String.fromCharCode(...Array.from({length:t},()=>this.digits[Math.random()*this.digits.length|0]))});Ne(this,"fixedWidthRandomGenerator",t=>{const r=c=>{const f=Number(this.to10(this.mask(c)));if(f<=0||!Number.isFinite(f))throw new Error(`invalid mask: ${f}`);const d=BigInt(f),p=Math.ceil(Math.log2(f)),h=Math.max(1,Math.ceil(p/8)),_=1n<<BigInt(8*h),m=_-_%d;return()=>{for(;;){const O=df(h);let v=0n;for(let b=0;b<h;b++)v=v<<8n|BigInt(O[b]);if(v<m)return Number(v%d)}}};if(t<1||Math.floor(t)!==t)throw new Error(`length must be integer < 1, got ${t}`);const n=String.fromCharCode(this.digits[0]),o=this.maxSafeExponent,s=t%o,i=Math.floor(t/o),a=(c,f)=>this.from10(c()).padStart(f,n),u=c=>{const f=[];for(let d=0;d<i;++d)f.push(a(c,o));return f.join("")};if(s>0){const c=r(s);if(i>0){const f=r(o);return()=>u(f)+a(c,s)}return()=>a(c,t)}sf(i>0);const l=r(o);return()=>u(l)});this.parts=t}get base(){return BigInt(this.digits.length)}get digits(){return[...this.digitsSet].sort((r,n)=>r-n)}get digitsSet(){const t=new Set;for(const[r,n]of this.parts.entries())if(uf(n)){if(n.length!==2||n[0].length!==1||n[1].length!==1)throw new Error(`parts[${r}] must be ['a','z'] (to add a range) or 'abc0xyz' (to add by char)`);const[o,s]=Array.from(n).map(i=>i.codePointAt(0));if(o>s)throw new Error(`parts[${r}] 'from' must be <= 'to', got '${o}' > '${s}'`);for(let i=0;i<s-o+1;++i)t.add(o+i)}else for(let o=0;o<n.length;++o)t.add(n.codePointAt(o));if(t.size<2)throw new Error("empty digits set");return t}get powers(){return new hf(this.base)}get byChar(){return new Map([...this.digits].map((t,r)=>[t,BigInt(r)]))}get maxSafeInteger(){return this.from10(BigInt(Number.MAX_SAFE_INTEGER))}get maxSafeExponent(){return this.maxSafeInteger.length-1}}dn([Rr],Tr.prototype,"digits",null);dn([Rr],Tr.prototype,"digitsSet",null);dn([Rr],Tr.prototype,"powers",null);dn([Rr],Tr.prototype,"byChar",null);dn([Rr],Tr.prototype,"maxSafeInteger",null);const pf=e=>{const t={};for(const[r,n]of Object.entries(e))t[r]=t[`b${r}`]=new Tr(n);return t},gf={...pf({2:[["0","1"]],3:[["0","2"]],4:[["0","3"]],6:[["0","5"]],8:[["0","7"]],10:[["0","9"]],16:[["0","9"],["a","f"]],62:[["0","9"],["a","z"],["A","Z"]],70:[["0","9"],["a","z"],["A","Z"],"!@$&%+_="],88:[["0","9"],["a","z"],["A","Z"],`_+-=~!?@#:*&^%$.,{}[]<>'"/`]})},{b62:{from10:bf,to10:vf,mask:_f,fixedWidthRandomGenerator:Su}}=gf,yf=Su(16);Su(12);const Au=e=>{const t=Number(vf(_f(e)));return()=>bf(Date.now()%t).padStart(e,"0")},mf=Au(4);Au(2);const Lv=()=>`${mf()}${yf()}`;var ss={},Gr={},Wt={},Wi;function Pu(){return Wi||(Wi=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.ROARR_LOG_FORMAT_VERSION=Wt.ROARR_VERSION=void 0,Wt.ROARR_VERSION="5.0.0",Wt.ROARR_LOG_FORMAT_VERSION="2.0.0"),Wt}var Ur={},Ki;function ei(){return Ki||(Ki=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.logLevels=void 0,Ur.logLevels={debug:20,error:50,fatal:60,info:30,trace:10,warn:40}),Ur}var qr={},Zi;function wf(){if(Zi)return qr;Zi=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.hasOwnProperty=void 0;const e=(t,r)=>Object.prototype.hasOwnProperty.call(t,r);return qr.hasOwnProperty=e,qr}var Wr={},Ji;function xf(){if(Ji)return Wr;Ji=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.isBrowser=void 0;const e=()=>typeof window<"u";return Wr.isBrowser=e,Wr}var Kr={},Hi;function Of(){if(Hi)return Kr;Hi=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.isTruthy=void 0;const e=t=>["true","t","yes","y","on","1"].includes(t.trim().toLowerCase());return Kr.isTruthy=e,Kr}var is={},Xi;function Sf(){return Xi||(Xi=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMockLogger=void 0;const t=ei(),r=(o,s)=>(i,a,u,l,c,f,d,p,h,_)=>{o.child({logLevel:s})(i,a,u,l,c,f,d,p,h,_)},n=(o,s)=>{const i=()=>{};return i.adopt=async a=>a(),i.child=()=>(0,e.createMockLogger)(o,s),i.getContext=()=>({}),i.debug=r(i,t.logLevels.debug),i.debugOnce=r(i,t.logLevels.debug),i.error=r(i,t.logLevels.error),i.errorOnce=r(i,t.logLevels.error),i.fatal=r(i,t.logLevels.fatal),i.fatalOnce=r(i,t.logLevels.fatal),i.info=r(i,t.logLevels.info),i.infoOnce=r(i,t.logLevels.info),i.trace=r(i,t.logLevels.trace),i.traceOnce=r(i,t.logLevels.trace),i.warn=r(i,t.logLevels.warn),i.warnOnce=r(i,t.logLevels.warn),i};e.createMockLogger=n})(is)),is}var En={exports:{}},Yi;function Cu(){return Yi||(Yi=1,(function(e,t){const{hasOwnProperty:r}=Object.prototype,n=O();n.configure=O,n.stringify=n,n.default=n,t.stringify=n,t.configure=O,e.exports=n;const o=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function s(v){return v.length<5e3&&!o.test(v)?`"${v}"`:JSON.stringify(v)}function i(v,b){if(v.length>200||b)return v.sort(b);for(let w=1;w<v.length;w++){const S=v[w];let j=w;for(;j!==0&&v[j-1]>S;)v[j]=v[j-1],j--;v[j]=S}return v}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function u(v){return a.call(v)!==void 0&&v.length!==0}function l(v,b,w){v.length<w&&(w=v.length);const S=b===","?"":" ";let j=`"0":${S}${v[0]}`;for(let k=1;k<w;k++)j+=`${b}"${k}":${S}${v[k]}`;return j}function c(v){if(r.call(v,"circularValue")){const b=v.circularValue;if(typeof b=="string")return`"${b}"`;if(b==null)return b;if(b===Error||b===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function f(v){let b;if(r.call(v,"deterministic")&&(b=v.deterministic,typeof b!="boolean"&&typeof b!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return b===void 0?!0:b}function d(v,b){let w;if(r.call(v,b)&&(w=v[b],typeof w!="boolean"))throw new TypeError(`The "${b}" argument must be of type boolean`);return w===void 0?!0:w}function p(v,b){let w;if(r.call(v,b)){if(w=v[b],typeof w!="number")throw new TypeError(`The "${b}" argument must be of type number`);if(!Number.isInteger(w))throw new TypeError(`The "${b}" argument must be an integer`);if(w<1)throw new RangeError(`The "${b}" argument must be >= 1`)}return w===void 0?1/0:w}function h(v){return v===1?"1 item":`${v} items`}function _(v){const b=new Set;for(const w of v)(typeof w=="string"||typeof w=="number")&&b.add(String(w));return b}function m(v){if(r.call(v,"strict")){const b=v.strict;if(typeof b!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(b)return w=>{let S=`Object can not safely be stringified. Received type ${typeof w}`;throw typeof w!="function"&&(S+=` (${w.toString()})`),new Error(S)}}}function O(v){v={...v};const b=m(v);b&&(v.bigint===void 0&&(v.bigint=!1),"circularValue"in v||(v.circularValue=Error));const w=c(v),S=d(v,"bigint"),j=f(v),k=typeof j=="function"?j:void 0,Z=p(v,"maximumDepth"),P=p(v,"maximumBreadth");function F(U,g,R,I,D,L){let T=g[U];switch(typeof T=="object"&&T!==null&&typeof T.toJSON=="function"&&(T=T.toJSON(U)),T=I.call(g,U,T),typeof T){case"string":return s(T);case"object":{if(T===null)return"null";if(R.indexOf(T)!==-1)return w;let $="",J=",";const K=L;if(Array.isArray(T)){if(T.length===0)return"[]";if(Z<R.length+1)return'"[Array]"';R.push(T),D!==""&&(L+=D,$+=`
${L}`,J=`,
${L}`);const Se=Math.min(T.length,P);let rt=0;for(;rt<Se-1;rt++){const Tn=F(String(rt),T,R,I,D,L);$+=Tn!==void 0?Tn:"null",$+=J}const nt=F(String(rt),T,R,I,D,L);if($+=nt!==void 0?nt:"null",T.length-1>P){const Tn=T.length-P-1;$+=`${J}"... ${h(Tn)} not stringified"`}return D!==""&&($+=`
${K}`),R.pop(),`[${$}]`}let V=Object.keys(T);const H=V.length;if(H===0)return"{}";if(Z<R.length+1)return'"[Object]"';let z="",ye="";D!==""&&(L+=D,J=`,
${L}`,z=" ");const Ke=Math.min(H,P);j&&!u(T)&&(V=i(V,k)),R.push(T);for(let Se=0;Se<Ke;Se++){const rt=V[Se],nt=F(rt,T,R,I,D,L);nt!==void 0&&($+=`${ye}${s(rt)}:${z}${nt}`,ye=J)}if(H>P){const Se=H-P;$+=`${ye}"...":${z}"${h(Se)} not stringified"`,ye=J}return D!==""&&ye.length>1&&($=`
${L}${$}
${K}`),R.pop(),`{${$}}`}case"number":return isFinite(T)?String(T):b?b(T):"null";case"boolean":return T===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(T);default:return b?b(T):void 0}}function W(U,g,R,I,D,L){switch(typeof g=="object"&&g!==null&&typeof g.toJSON=="function"&&(g=g.toJSON(U)),typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(R.indexOf(g)!==-1)return w;const T=L;let $="",J=",";if(Array.isArray(g)){if(g.length===0)return"[]";if(Z<R.length+1)return'"[Array]"';R.push(g),D!==""&&(L+=D,$+=`
${L}`,J=`,
${L}`);const H=Math.min(g.length,P);let z=0;for(;z<H-1;z++){const Ke=W(String(z),g[z],R,I,D,L);$+=Ke!==void 0?Ke:"null",$+=J}const ye=W(String(z),g[z],R,I,D,L);if($+=ye!==void 0?ye:"null",g.length-1>P){const Ke=g.length-P-1;$+=`${J}"... ${h(Ke)} not stringified"`}return D!==""&&($+=`
${T}`),R.pop(),`[${$}]`}R.push(g);let K="";D!==""&&(L+=D,J=`,
${L}`,K=" ");let V="";for(const H of I){const z=W(H,g[H],R,I,D,L);z!==void 0&&($+=`${V}${s(H)}:${K}${z}`,V=J)}return D!==""&&V.length>1&&($=`
${L}${$}
${T}`),R.pop(),`{${$}}`}case"number":return isFinite(g)?String(g):b?b(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(g);default:return b?b(g):void 0}}function ee(U,g,R,I,D){switch(typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(g=g.toJSON(U),typeof g!="object")return ee(U,g,R,I,D);if(g===null)return"null"}if(R.indexOf(g)!==-1)return w;const L=D;if(Array.isArray(g)){if(g.length===0)return"[]";if(Z<R.length+1)return'"[Array]"';R.push(g),D+=I;let z=`
${D}`;const ye=`,
${D}`,Ke=Math.min(g.length,P);let Se=0;for(;Se<Ke-1;Se++){const nt=ee(String(Se),g[Se],R,I,D);z+=nt!==void 0?nt:"null",z+=ye}const rt=ee(String(Se),g[Se],R,I,D);if(z+=rt!==void 0?rt:"null",g.length-1>P){const nt=g.length-P-1;z+=`${ye}"... ${h(nt)} not stringified"`}return z+=`
${L}`,R.pop(),`[${z}]`}let T=Object.keys(g);const $=T.length;if($===0)return"{}";if(Z<R.length+1)return'"[Object]"';D+=I;const J=`,
${D}`;let K="",V="",H=Math.min($,P);u(g)&&(K+=l(g,J,P),T=T.slice(g.length),H-=g.length,V=J),j&&(T=i(T,k)),R.push(g);for(let z=0;z<H;z++){const ye=T[z],Ke=ee(ye,g[ye],R,I,D);Ke!==void 0&&(K+=`${V}${s(ye)}: ${Ke}`,V=J)}if($>P){const z=$-P;K+=`${V}"...": "${h(z)} not stringified"`,V=J}return V!==""&&(K=`
${D}${K}
${L}`),R.pop(),`{${K}}`}case"number":return isFinite(g)?String(g):b?b(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(g);default:return b?b(g):void 0}}function le(U,g,R){switch(typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(g=g.toJSON(U),typeof g!="object")return le(U,g,R);if(g===null)return"null"}if(R.indexOf(g)!==-1)return w;let I="";const D=g.length!==void 0;if(D&&Array.isArray(g)){if(g.length===0)return"[]";if(Z<R.length+1)return'"[Array]"';R.push(g);const K=Math.min(g.length,P);let V=0;for(;V<K-1;V++){const z=le(String(V),g[V],R);I+=z!==void 0?z:"null",I+=","}const H=le(String(V),g[V],R);if(I+=H!==void 0?H:"null",g.length-1>P){const z=g.length-P-1;I+=`,"... ${h(z)} not stringified"`}return R.pop(),`[${I}]`}let L=Object.keys(g);const T=L.length;if(T===0)return"{}";if(Z<R.length+1)return'"[Object]"';let $="",J=Math.min(T,P);D&&u(g)&&(I+=l(g,",",P),L=L.slice(g.length),J-=g.length,$=","),j&&(L=i(L,k)),R.push(g);for(let K=0;K<J;K++){const V=L[K],H=le(V,g[V],R);H!==void 0&&(I+=`${$}${s(V)}:${H}`,$=",")}if(T>P){const K=T-P;I+=`${$}"...":"${h(K)} not stringified"`}return R.pop(),`{${I}}`}case"number":return isFinite(g)?String(g):b?b(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(S)return String(g);default:return b?b(g):void 0}}function je(U,g,R){if(arguments.length>1){let I="";if(typeof R=="number"?I=" ".repeat(Math.min(R,10)):typeof R=="string"&&(I=R.slice(0,10)),g!=null){if(typeof g=="function")return F("",{"":U},[],g,I,"");if(Array.isArray(g))return W("",U,[],_(g),I,"")}if(I.length!==0)return ee("",U,[],I,"")}return le("",U,[])}return je}})(En,En.exports)),En.exports}var Qi;function Af(){return Qi||(Qi=1,(function(e){var t={},r=Gr&&Gr.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.createLogger=void 0;const n=Pu(),o=ei(),s=wf(),i=xf(),a=Of(),u=Sf(),l=rf(),c=r(Cu());let f=!1;const d=()=>globalThis.ROARR,p=()=>({messageContext:{},transforms:[]}),h=()=>{const S=d().asyncLocalStorage;if(!S)throw new Error("AsyncLocalContext is unavailable.");const j=S.getStore();return j||p()},_=()=>!!d().asyncLocalStorage,m=()=>{if(_()){const S=h();return(0,s.hasOwnProperty)(S,"sequenceRoot")&&(0,s.hasOwnProperty)(S,"sequence")&&typeof S.sequence=="number"?String(S.sequenceRoot)+"."+String(S.sequence++):String(d().sequence++)}return String(d().sequence++)},O=(S,j)=>(k,Z,P,F,W,ee,le,je,U,g)=>{S.child({logLevel:j})(k,Z,P,F,W,ee,le,je,U,g)},v=1e3,b=(S,j)=>(k,Z,P,F,W,ee,le,je,U,g)=>{const R=(0,c.default)({a:k,b:Z,c:P,d:F,e:W,f:ee,g:le,h:je,i:U,j:g,logLevel:j});if(!R)throw new Error("Expected key to be a string");const I=d().onceLog;I.has(R)||(I.add(R),I.size>v&&I.clear(),S.child({logLevel:j})(k,Z,P,F,W,ee,le,je,U,g))},w=(S,j={},k=[])=>{var Z;if(!(0,i.isBrowser)()&&typeof process<"u"&&!(0,a.isTruthy)((Z=t.ROARR_LOG)!==null&&Z!==void 0?Z:""))return(0,u.createMockLogger)(S,j);const P=(F,W,ee,le,je,U,g,R,I,D)=>{const L=Date.now(),T=m();let $;_()?$=h():$=p();let J,K;if(typeof F=="string"?J={...$.messageContext,...j}:J={...$.messageContext,...j,...F},typeof F=="string"&&W===void 0)K=F;else if(typeof F=="string"){if(!F.includes("%"))throw new Error("When a string parameter is followed by other arguments, then it is assumed that you are attempting to format a message using printf syntax. You either forgot to add printf bindings or if you meant to add context to the log message, pass them in an object as the first parameter.");K=(0,l.printf)(F,W,ee,le,je,U,g,R,I,D)}else{let H=W;if(typeof W!="string")if(W===void 0)H="";else throw new TypeError("Message must be a string. Received "+typeof W+".");K=(0,l.printf)(H,ee,le,je,U,g,R,I,D)}let V={context:J,message:K,sequence:T,time:L,version:n.ROARR_LOG_FORMAT_VERSION};for(const H of[...$.transforms,...k])if(V=H(V),typeof V!="object"||V===null)throw new Error("Message transform function must return a message object.");S(V)};return P.child=F=>{let W;return _()?W=h():W=p(),typeof F=="function"?(0,e.createLogger)(S,{...W.messageContext,...j,...F},[F,...k]):(0,e.createLogger)(S,{...W.messageContext,...j,...F},k)},P.getContext=()=>{let F;return _()?F=h():F=p(),{...F.messageContext,...j}},P.adopt=async(F,W)=>{if(!_())return f===!1&&(f=!0,S({context:{logLevel:o.logLevels.warn,package:"roarr"},message:"async_hooks are unavailable; Roarr.adopt will not function as expected",sequence:m(),time:Date.now(),version:n.ROARR_LOG_FORMAT_VERSION})),F();const ee=h();let le;(0,s.hasOwnProperty)(ee,"sequenceRoot")&&(0,s.hasOwnProperty)(ee,"sequence")&&typeof ee.sequence=="number"?le=ee.sequenceRoot+"."+String(ee.sequence++):le=String(d().sequence++);let je={...ee.messageContext};const U=[...ee.transforms];typeof W=="function"?U.push(W):je={...je,...W};const g=d().asyncLocalStorage;if(!g)throw new Error("Async local context unavailable.");return g.run({messageContext:je,sequence:0,sequenceRoot:le,transforms:U},()=>F())},P.debug=O(P,o.logLevels.debug),P.debugOnce=b(P,o.logLevels.debug),P.error=O(P,o.logLevels.error),P.errorOnce=b(P,o.logLevels.error),P.fatal=O(P,o.logLevels.fatal),P.fatalOnce=b(P,o.logLevels.fatal),P.info=O(P,o.logLevels.info),P.infoOnce=b(P,o.logLevels.info),P.trace=O(P,o.logLevels.trace),P.traceOnce=b(P,o.logLevels.trace),P.warn=O(P,o.logLevels.warn),P.warnOnce=b(P,o.logLevels.warn),P};e.createLogger=w})(Gr)),Gr}var Kt={},ea;function Pf(){if(ea)return Kt;ea=1;var e=Kt&&Kt.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.createRoarrInitialGlobalStateBrowser=void 0;const t=Pu(),r=e(nf()),n=o=>{const s=(o.versions||[]).concat();return s.length>1&&s.sort(r.default),s.includes(t.ROARR_VERSION)||s.push(t.ROARR_VERSION),s.sort(r.default),{sequence:0,...o,versions:s}};return Kt.createRoarrInitialGlobalStateBrowser=n,Kt}var Zr={},ta;function Cf(){if(ta)return Zr;ta=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.stringify=void 0;const t=(0,Cu().configure)({deterministic:!1,maximumBreadth:20,maximumDepth:10,strict:!1}),r=n=>{var o,s;try{return(o=JSON.stringify(n))!==null&&o!==void 0?o:""}catch{}try{return(s=t(n))!==null&&s!==void 0?s:""}catch(i){throw console.error("[roarr] could not serialize value",n),i}};return Zr.stringify=r,Zr}var Jr={},ra;function jf(){if(ra)return Jr;ra=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.getLogLevelName=void 0;const e=t=>t<=10?"trace":t<=20?"debug":t<=30?"info":t<=40?"warn":t<=50?"error":"fatal";return Jr.getLogLevelName=e,Jr}var na;function Rf(){return na||(na=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLogLevelName=e.logLevels=e.Roarr=e.ROARR=void 0;const t=Af(),r=Pf(),n=Cf(),o=(0,r.createRoarrInitialGlobalStateBrowser)(globalThis.ROARR||{});e.ROARR=o,globalThis.ROARR=o;const s=l=>(0,n.stringify)(l),i=(0,t.createLogger)(l=>{var c;o.write&&o.write(((c=o.serializeMessage)!==null&&c!==void 0?c:s)(l))});e.Roarr=i;var a=ei();Object.defineProperty(e,"logLevels",{enumerable:!0,get:function(){return a.logLevels}});var u=jf();Object.defineProperty(e,"getLogLevelName",{enumerable:!0,get:function(){return u.getLogLevelName}})})(ss)),ss}var Vv=Rf();function E(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var Tf={};function Po(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Tf}var ju=Object.assign,Qn=Object.getOwnPropertyDescriptor,it=Object.defineProperty,hn=Object.prototype,As=[];Object.freeze(As);var ti={};Object.freeze(ti);var Ef=typeof Proxy<"u",Mf=Object.toString();function Ru(){Ef||E("Proxy not available")}function Tu(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var br=function(){};function $e(e){return typeof e=="function"}function Qt(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function Co(e){return e!==null&&typeof e=="object"}function xt(e){if(!Co(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===Mf}function Eu(e){var t=e?.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function pn(e,t,r){it(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function Mu(e,t,r){it(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function zt(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(n){return Co(n)&&n[r]===!0}}function Er(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function If(e){var t=Object.getPrototypeOf(e),r=Object.getPrototypeOf(t),n=Object.getPrototypeOf(r);return n===null}function pt(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var Iu=typeof Object.getOwnPropertySymbols<"u";function $f(e){var t=Object.keys(e);if(!Iu)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(n){return hn.propertyIsEnumerable.call(e,n)})):t}var mr=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Iu?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function $u(e){return e===null?null:typeof e=="object"?""+e:e}function yt(e,t){return hn.hasOwnProperty.call(e,t)}var kf=Object.getOwnPropertyDescriptors||function(t){var r={};return mr(t).forEach(function(n){r[n]=Qn(t,n)}),r};function Re(e,t){return!!(e&t)}function Te(e,t,r){return r?e|=t:e&=~t,e}function oa(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Df(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lf(n.key),n)}}function Mr(e,t,r){return t&&Df(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vr(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=Vf(e))||t){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dt.apply(null,arguments)}function ku(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ps(e,t)}function Ps(e,t){return Ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ps(e,t)}function Nf(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Lf(e){var t=Nf(e,"string");return typeof t=="symbol"?t:t+""}function Vf(e,t){if(e){if(typeof e=="string")return oa(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oa(e,t):void 0}}var st=Symbol("mobx-stored-annotations");function Ze(e){function t(r,n){if(bn(n))return e.decorate_20223_(r,n);gn(r,n,e)}return Object.assign(t,e)}function gn(e,t,r){yt(e,st)||pn(e,st,Dt({},e[st])),Zf(r)||(e[st][t]=r)}function Bf(e){return yt(e,st)||pn(e,st,Dt({},e[st])),e[st]}function bn(e){return typeof e=="object"&&typeof e.kind=="string"}var C=Symbol("mobx administration"),Ft=(function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=B.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return tc(this)},t.reportChanged=function(){Ae(),rc(this),Pe()},t.toString=function(){return this.name_},Mr(e,[{key:"isBeingObserved",get:function(){return Re(this.flags_,e.isBeingObservedMask_)},set:function(n){this.flags_=Te(this.flags_,e.isBeingObservedMask_,n)}},{key:"isPendingUnobservation",get:function(){return Re(this.flags_,e.isPendingUnobservationMask_)},set:function(n){this.flags_=Te(this.flags_,e.isPendingUnobservationMask_,n)}},{key:"diffValue",get:function(){return Re(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Te(this.flags_,e.diffValueMask_,n===1)}}])})();Ft.isBeingObservedMask_=1;Ft.isPendingUnobservationMask_=2;Ft.diffValueMask_=4;var ri=zt("Atom",Ft);function jt(e,t,r){t===void 0&&(t=br),r===void 0&&(r=br);var n=new Ft(e);return t!==br&&lc(n,t),r!==br&&$o(n,r),n}function zf(e,t){return e===t}function Ff(e,t){return di(e,t)}function Gf(e,t){return di(e,t,1)}function Uf(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var er={identity:zf,structural:Ff,default:Uf,shallow:Gf};function tr(e,t,r){return lt(e)?e:Array.isArray(e)?N.array(e,{name:r}):xt(e)?N.object(e,void 0,{name:r}):Er(e)?N.map(e,{name:r}):pt(e)?N.set(e,{name:r}):typeof e=="function"&&!Lt(e)&&!xr(e)?Eu(e)?nr(e):wr(r,e):e}function qf(e,t,r){if(e==null||Q(e)||be(e)||se(e)||te(e))return e;if(Array.isArray(e))return N.array(e,{name:r,deep:!1});if(xt(e))return N.object(e,void 0,{name:r,deep:!1});if(Er(e))return N.map(e,{name:r,deep:!1});if(pt(e))return N.set(e,{name:r,deep:!1})}function jo(e){return e}function Wf(e,t){return di(e,t)?t:e}var Du="override",Kf=Ze({annotationType_:Du,make_:Jf,extend_:Hf,decorate_20223_:Xf});function Zf(e){return e.annotationType_===Du}function Jf(e,t){return 0}function Hf(e,t,r,n){E("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function Xf(e,t){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function vn(e,t){return{annotationType_:e,options_:t,make_:Yf,extend_:Qf,decorate_20223_:ed}}function Yf(e,t,r,n){var o;if((o=this.options_)!=null&&o.bound)return this.extend_(e,t,r,!1)===null?0:1;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if(Lt(r.value))return 1;var s=Nu(e,this,t,r,!1);return it(n,t,s),2}function Qf(e,t,r,n){var o=Nu(e,this,t,r);return e.defineProperty_(t,o,n)}function ed(e,t){var r=t.kind,n=t.name,o=t.addInitializer,s=this,i=function(l){var c,f,d,p;return Nt((c=(f=s.options_)==null?void 0:f.name)!=null?c:n.toString(),l,(d=(p=s.options_)==null?void 0:p.autoAction)!=null?d:!1)};if(r=="field")return function(u){var l,c=u;return Lt(c)||(c=i(c)),(l=s.options_)!=null&&l.bound&&(c=c.bind(this),c.isMobxAction=!0),c};if(r=="method"){var a;return Lt(e)||(e=i(e)),(a=this.options_)!=null&&a.bound&&o(function(){var u=this,l=u[n].bind(u);l.isMobxAction=!0,u[n]=l}),e}E("Cannot apply '"+s.annotationType_+"' to '"+String(n)+"' (kind: "+r+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function Nu(e,t,r,n,o){var s,i,a,u,l,c,f;o===void 0&&(o=x.safeDescriptors);var d=n.value;if((s=t.options_)!=null&&s.bound){var p;d=d.bind((p=e.proxy_)!=null?p:e.target_)}return{value:Nt((i=(a=t.options_)==null?void 0:a.name)!=null?i:r.toString(),d,(u=(l=t.options_)==null?void 0:l.autoAction)!=null?u:!1,(c=t.options_)!=null&&c.bound?(f=e.proxy_)!=null?f:e.target_:void 0),configurable:o?e.isPlainObject_:!0,enumerable:!1,writable:!o}}function Lu(e,t){return{annotationType_:e,options_:t,make_:td,extend_:rd,decorate_20223_:nd}}function td(e,t,r,n){var o;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((o=this.options_)!=null&&o.bound&&(!yt(e.target_,t)||!xr(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(xr(r.value))return 1;var s=Vu(e,this,t,r,!1,!1);return it(n,t,s),2}function rd(e,t,r,n){var o,s=Vu(e,this,t,r,(o=this.options_)==null?void 0:o.bound);return e.defineProperty_(t,s,n)}function nd(e,t){var r,n=t.name,o=t.addInitializer;return xr(e)||(e=nr(e)),(r=this.options_)!=null&&r.bound&&o(function(){var s=this,i=s[n].bind(s);i.isMobXFlow=!0,s[n]=i}),e}function Vu(e,t,r,n,o,s){s===void 0&&(s=x.safeDescriptors);var i=n.value;if(xr(i)||(i=nr(i)),o){var a;i=i.bind((a=e.proxy_)!=null?a:e.target_),i.isMobXFlow=!0}return{value:i,configurable:s?e.isPlainObject_:!0,enumerable:!1,writable:!s}}function ni(e,t){return{annotationType_:e,options_:t,make_:od,extend_:sd,decorate_20223_:id}}function od(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function sd(e,t,r,n){return e.defineComputedProperty_(t,Dt({},this.options_,{get:r.get,set:r.set}),n)}function id(e,t){var r=this,n=t.name,o=t.addInitializer;return o(function(){var s=ur(this)[C],i=Dt({},r.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+n.toString()),s.values_.set(n,new Xe(i))}),function(){return this[C].getObservablePropValue_(n)}}function Ro(e,t){return{annotationType_:e,options_:t,make_:ad,extend_:ud,decorate_20223_:cd}}function ad(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function ud(e,t,r,n){var o,s;return e.defineObservableProperty_(t,r.value,(o=(s=this.options_)==null?void 0:s.enhancer)!=null?o:tr,n)}function cd(e,t){var r=this,n=t.kind,o=t.name,s=new WeakSet;function i(a,u){var l,c,f=ur(a)[C],d=new $t(u,(l=(c=r.options_)==null?void 0:c.enhancer)!=null?l:tr,"ObservableObject."+o.toString(),!1);f.values_.set(o,d),s.add(a)}if(n=="accessor")return{get:function(){return s.has(this)||i(this,e.get.call(this)),this[C].getObservablePropValue_(o)},set:function(u){return s.has(this)||i(this,u),this[C].setObservablePropValue_(o,u)},init:function(u){return s.has(this)||i(this,u),u}}}var ld="true",fd=Bu();function Bu(e){return{annotationType_:ld,options_:e,make_:dd,extend_:hd,decorate_20223_:pd}}function dd(e,t,r,n){var o,s;if(r.get)return Y.make_(e,t,r,n);if(r.set){var i=Lt(r.set)?r.set:Nt(t.toString(),r.set);return n===e.target_?e.defineProperty_(t,{configurable:x.safeDescriptors?e.isPlainObject_:!0,set:i})===null?0:2:(it(n,t,{configurable:!0,set:i}),2)}if(n!==e.target_&&typeof r.value=="function"){var a;if(Eu(r.value)){var u,l=(u=this.options_)!=null&&u.autoBind?nr.bound:nr;return l.make_(e,t,r,n)}var c=(a=this.options_)!=null&&a.autoBind?wr.bound:wr;return c.make_(e,t,r,n)}var f=((o=this.options_)==null?void 0:o.deep)===!1?N.ref:N;if(typeof r.value=="function"&&(s=this.options_)!=null&&s.autoBind){var d;r.value=r.value.bind((d=e.proxy_)!=null?d:e.target_)}return f.make_(e,t,r,n)}function hd(e,t,r,n){var o,s;if(r.get)return Y.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:x.safeDescriptors?e.isPlainObject_:!0,set:Nt(t.toString(),r.set)},n);if(typeof r.value=="function"&&(o=this.options_)!=null&&o.autoBind){var i;r.value=r.value.bind((i=e.proxy_)!=null?i:e.target_)}var a=((s=this.options_)==null?void 0:s.deep)===!1?N.ref:N;return a.extend_(e,t,r,n)}function pd(e,t){E("'"+this.annotationType_+"' cannot be used as a decorator")}var gd="observable",bd="observable.ref",vd="observable.shallow",_d="observable.struct",zu={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(zu);function Mn(e){return e||zu}var Cs=Ro(gd),yd=Ro(bd,{enhancer:jo}),md=Ro(vd,{enhancer:qf}),wd=Ro(_d,{enhancer:Wf}),Fu=Ze(Cs);function In(e){return e.deep===!0?tr:e.deep===!1?jo:Od(e.defaultDecorator)}function xd(e){var t;return e?(t=e.defaultDecorator)!=null?t:Bu(e):void 0}function Od(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:tr}function Gu(e,t,r){if(bn(t))return Cs.decorate_20223_(e,t);if(Qt(t)){gn(e,t,Cs);return}return lt(e)?e:xt(e)?N.object(e,t,r):Array.isArray(e)?N.array(e,t):Er(e)?N.map(e,t):pt(e)?N.set(e,t):typeof e=="object"&&e!==null?e:N.box(e,t)}ju(Gu,Fu);var Sd={box:function(t,r){var n=Mn(r);return new $t(t,In(n),n.name,!0,n.equals)},array:function(t,r){var n=Mn(r);return(x.useProxies===!1||n.proxy===!1?Th:wh)(t,In(n),n.name)},map:function(t,r){var n=Mn(r);return new Vo(t,In(n),n.name)},set:function(t,r){var n=Mn(r);return new li(t,In(n),n.name)},object:function(t,r,n){return Gt(function(){return ko(x.useProxies===!1||n?.proxy===!1?ur({},n):vh({},n),t,r)})},ref:Ze(yd),shallow:Ze(md),deep:Fu,struct:Ze(wd)},N=ju(Gu,Sd),Uu="computed",Ad="computed.struct",js=ni(Uu),Pd=ni(Ad,{equals:er.structural}),Y=function(t,r){if(bn(r))return js.decorate_20223_(t,r);if(Qt(r))return gn(t,r,js);if(xt(t))return Ze(ni(Uu,t));var n=xt(r)?r:{};return n.get=t,n.name||(n.name=t.name||""),new Xe(n)};Object.assign(Y,js);Y.struct=Ze(Pd);var sa,ia,eo=0,Cd=1,jd=(sa=(ia=Qn(function(){},"name"))==null?void 0:ia.configurable)!=null?sa:!1,aa={value:"action",configurable:!0,writable:!1,enumerable:!1};function Nt(e,t,r,n){r===void 0&&(r=!1);function o(){return qu(e,r,t,n||this,arguments)}return o.isMobxAction=!0,o.toString=function(){return t.toString()},jd&&(aa.value=e,it(o,"name",aa)),o}function qu(e,t,r,n,o){var s=Wu(e,t);try{return r.apply(n,o)}catch(i){throw s.error_=i,i}finally{Ku(s)}}function Wu(e,t,r,n){var o=!1,s=0,i=x.trackingDerivation,a=!t||!i;Ae();var u=x.allowStateChanges;a&&(ar(),u=To(!0));var l=Io(!0),c={runAsAction_:a,prevDerivation_:i,prevAllowStateChanges_:u,prevAllowStateReads_:l,notifySpy_:o,startTime_:s,actionId_:Cd++,parentActionId_:eo};return eo=c.actionId_,c}function Ku(e){eo!==e.actionId_&&E(30),eo=e.parentActionId_,e.error_!==void 0&&(x.suppressReactionErrors=!0),Eo(e.prevAllowStateChanges_),_r(e.prevAllowStateReads_),Pe(),e.runAsAction_&&mt(e.prevDerivation_),x.suppressReactionErrors=!1}function oi(e,t){var r=To(e);try{return t()}finally{Eo(r)}}function To(e){var t=x.allowStateChanges;return x.allowStateChanges=e,t}function Eo(e){x.allowStateChanges=e}var $t=(function(e){function t(n,o,s,i,a){var u;return s===void 0&&(s="ObservableValue"),a===void 0&&(a=er.default),u=e.call(this,s)||this,u.enhancer=void 0,u.name_=void 0,u.equals=void 0,u.hasUnreportedChange_=!1,u.interceptors_=void 0,u.changeListeners_=void 0,u.value_=void 0,u.dehancer=void 0,u.enhancer=o,u.name_=s,u.equals=a,u.value_=o(n,void 0,s),u}ku(t,e);var r=t.prototype;return r.dehanceValue=function(o){return this.dehancer!==void 0?this.dehancer(o):o},r.set=function(o){o=this.prepareNewValue_(o),o!==x.UNCHANGED&&this.setNewValue_(o)},r.prepareNewValue_=function(o){if(Le(this)){var s=Ve(this,{object:this,type:at,newValue:o});if(!s)return x.UNCHANGED;o=s.newValue}return o=this.enhancer(o,this.value_,this.name_),this.equals(this.value_,o)?x.UNCHANGED:o},r.setNewValue_=function(o){var s=this.value_;this.value_=o,this.reportChanged(),Je(this)&&He(this,{type:at,object:this,newValue:o,oldValue:s})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(o){return yn(this,o)},r.observe_=function(o,s){return s&&o({observableKind:"value",debugObjectName:this.name_,object:this,type:at,newValue:this.value_,oldValue:void 0}),mn(this,o)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return $u(this.get())},r[Symbol.toPrimitive]=function(){return this.valueOf()},t})(Ft),si=zt("ObservableValue",$t),Xe=(function(){function e(r){this.dependenciesState_=B.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=B.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new ro(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=to.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||E(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=Nt("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?er.structural:er.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){Nd(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing&&E(32,this.name_,this.derivation),x.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Rs(this)&&(this.warnAboutUntrackedRead_(),Ae(),this.value_=this.computeValue_(!1),Pe());else if(tc(this),Rs(this)){var n=x.trackingContext;this.keepAlive_&&!n&&(x.trackingContext=this),this.trackAndCompute()&&Dd(this),x.trackingContext=n}var o=this.value_;if(Gn(o))throw o.cause;return o},t.set=function(n){if(this.setter_){this.isRunningSetter&&E(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter=!1}}else E(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,o=this.dependenciesState_===B.NOT_TRACKING_,s=this.computeValue_(!0),i=o||Gn(n)||Gn(s)||!this.equals_(n,s);return i&&(this.value_=s),i},t.computeValue_=function(n){this.isComputing=!0;var o=To(!1),s;if(n)s=Ju(this,this.derivation,this.scope_);else if(x.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(i){s=new ro(i)}return Eo(o),this.isComputing=!1,s},t.suspend_=function(){this.keepAlive_||(Ts(this),this.value_=void 0)},t.observe_=function(n,o){var s=this,i=!0,a=void 0;return ii(function(){var u=s.get();if(!i||o){var l=ar();n({observableKind:"computed",debugObjectName:s.name_,type:at,object:s,newValue:u,oldValue:a}),mt(l)}i=!1,a=u})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return $u(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},Mr(e,[{key:"isComputing",get:function(){return Re(this.flags_,e.isComputingMask_)},set:function(n){this.flags_=Te(this.flags_,e.isComputingMask_,n)}},{key:"isRunningSetter",get:function(){return Re(this.flags_,e.isRunningSetterMask_)},set:function(n){this.flags_=Te(this.flags_,e.isRunningSetterMask_,n)}},{key:"isBeingObserved",get:function(){return Re(this.flags_,e.isBeingObservedMask_)},set:function(n){this.flags_=Te(this.flags_,e.isBeingObservedMask_,n)}},{key:"isPendingUnobservation",get:function(){return Re(this.flags_,e.isPendingUnobservationMask_)},set:function(n){this.flags_=Te(this.flags_,e.isPendingUnobservationMask_,n)}},{key:"diffValue",get:function(){return Re(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Te(this.flags_,e.diffValueMask_,n===1)}}])})();Xe.isComputingMask_=1;Xe.isRunningSetterMask_=2;Xe.isBeingObservedMask_=4;Xe.isPendingUnobservationMask_=8;Xe.diffValueMask_=16;var rr=zt("ComputedValue",Xe),B;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(B||(B={}));var to;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(to||(to={}));var ro=function(t){this.cause=void 0,this.cause=t};function Gn(e){return e instanceof ro}function Rs(e){switch(e.dependenciesState_){case B.UP_TO_DATE_:return!1;case B.NOT_TRACKING_:case B.STALE_:return!0;case B.POSSIBLY_STALE_:{for(var t=Io(!0),r=ar(),n=e.observing_,o=n.length,s=0;s<o;s++){var i=n[s];if(rr(i)){if(x.disableErrorBoundaries)i.get();else try{i.get()}catch{return mt(r),_r(t),!0}if(e.dependenciesState_===B.STALE_)return mt(r),_r(t),!0}}return Hu(e),mt(r),_r(t),!1}}}function Zu(){return x.trackingDerivation!==null}function Ju(e,t,r){var n=Io(!0);Hu(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++x.runId;var o=x.trackingDerivation;x.trackingDerivation=e,x.inBatch++;var s;if(x.disableErrorBoundaries===!0)s=t.call(r);else try{s=t.call(r)}catch(i){s=new ro(i)}return x.inBatch--,x.trackingDerivation=o,Rd(e),_r(n),s}function Rd(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=B.UP_TO_DATE_,o=0,s=e.unboundDepsCount_,i=0;i<s;i++){var a=r[i];a.diffValue===0&&(a.diffValue=1,o!==i&&(r[o]=a),o++),a.dependenciesState_>n&&(n=a.dependenciesState_)}for(r.length=o,e.newObserving_=null,s=t.length;s--;){var u=t[s];u.diffValue===0&&Qu(u,e),u.diffValue=0}for(;o--;){var l=r[o];l.diffValue===1&&(l.diffValue=0,kd(l,e))}n!==B.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}function Ts(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)Qu(t[r],e);e.dependenciesState_=B.NOT_TRACKING_}function Mo(e){var t=ar();try{return e()}finally{mt(t)}}function ar(){var e=x.trackingDerivation;return x.trackingDerivation=null,e}function mt(e){x.trackingDerivation=e}function Io(e){var t=x.allowStateReads;return x.allowStateReads=e,t}function _r(e){x.allowStateReads=e}function Hu(e){if(e.dependenciesState_!==B.UP_TO_DATE_){e.dependenciesState_=B.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=B.UP_TO_DATE_}}var Td=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],Qr=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Un=!0,Xu=!1,x=(function(){var e=Po();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Un=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Qr().version&&(Un=!1),Un?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Qr):(setTimeout(function(){Xu||E(35)},1),new Qr)})();function Ed(){if((x.pendingReactions.length||x.inBatch||x.isRunningReactions)&&E(36),Xu=!0,Un){var e=Po();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),x=new Qr}}function Yu(){return x}function Md(){var e=new Qr;for(var t in e)Td.indexOf(t)===-1&&(x[t]=e[t]);x.allowStateChanges=!x.enforceActions}function Id(e){return e.observers_&&e.observers_.size>0}function $d(e){return e.observers_}function kd(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Qu(e,t){e.observers_.delete(t),e.observers_.size===0&&ec(e)}function ec(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,x.pendingUnobservations.push(e))}function Ae(){x.inBatch++}function Pe(){if(--x.inBatch===0){nc();for(var e=x.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers_.size===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBUO()),r instanceof Xe&&r.suspend_())}x.pendingUnobservations=[]}}function tc(e){var t=x.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&x.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&x.inBatch>0&&ec(e),!1)}function rc(e){e.lowestObserverState_!==B.STALE_&&(e.lowestObserverState_=B.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===B.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=B.STALE_}))}function Dd(e){e.lowestObserverState_!==B.STALE_&&(e.lowestObserverState_=B.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===B.POSSIBLY_STALE_?t.dependenciesState_=B.STALE_:t.dependenciesState_===B.UP_TO_DATE_&&(e.lowestObserverState_=B.UP_TO_DATE_)}))}function Nd(e){e.lowestObserverState_===B.UP_TO_DATE_&&(e.lowestObserverState_=B.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===B.UP_TO_DATE_&&(t.dependenciesState_=B.POSSIBLY_STALE_,t.onBecomeStale_())}))}var ct=(function(){function e(r,n,o,s){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=B.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=to.NONE,this.name_=r,this.onInvalidate_=n,this.errorHandler_=o,this.requiresObservable_=s}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,x.pendingReactions.push(this),nc())},t.runReaction_=function(){if(!this.isDisposed){Ae(),this.isScheduled=!1;var n=x.trackingContext;if(x.trackingContext=this,Rs(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(o){this.reportExceptionInDerivation_(o)}}x.trackingContext=n,Pe()}},t.track=function(n){if(!this.isDisposed){Ae(),this.isRunning=!0;var o=x.trackingContext;x.trackingContext=this;var s=Ju(this,n,void 0);x.trackingContext=o,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&Ts(this),Gn(s)&&this.reportExceptionInDerivation_(s.cause),Pe()}},t.reportExceptionInDerivation_=function(n){var o=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(x.disableErrorBoundaries)throw n;var s="[mobx] uncaught error in '"+this+"'";x.suppressReactionErrors||console.error(s,n),x.globalReactionErrorHandlers.forEach(function(i){return i(n,o)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Ae(),Ts(this),Pe()))},t.getDisposer_=function(n){var o=this,s=function i(){o.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",i)};return n==null||n.addEventListener==null||n.addEventListener("abort",s),s[C]=this,"dispose"in Symbol&&typeof Symbol.dispose=="symbol"&&(s[Symbol.dispose]=s),s},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){},Mr(e,[{key:"isDisposed",get:function(){return Re(this.flags_,e.isDisposedMask_)},set:function(n){this.flags_=Te(this.flags_,e.isDisposedMask_,n)}},{key:"isScheduled",get:function(){return Re(this.flags_,e.isScheduledMask_)},set:function(n){this.flags_=Te(this.flags_,e.isScheduledMask_,n)}},{key:"isTrackPending",get:function(){return Re(this.flags_,e.isTrackPendingMask_)},set:function(n){this.flags_=Te(this.flags_,e.isTrackPendingMask_,n)}},{key:"isRunning",get:function(){return Re(this.flags_,e.isRunningMask_)},set:function(n){this.flags_=Te(this.flags_,e.isRunningMask_,n)}},{key:"diffValue",get:function(){return Re(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Te(this.flags_,e.diffValueMask_,n===1)}}])})();ct.isDisposedMask_=1;ct.isScheduledMask_=2;ct.isTrackPendingMask_=4;ct.isRunningMask_=8;ct.diffValueMask_=16;function Ld(e){return x.globalReactionErrorHandlers.push(e),function(){var t=x.globalReactionErrorHandlers.indexOf(e);t>=0&&x.globalReactionErrorHandlers.splice(t,1)}}var Vd=100,Es=function(t){return t()};function nc(){x.inBatch>0||x.isRunningReactions||Es(Bd)}function Bd(){x.isRunningReactions=!0;for(var e=x.pendingReactions,t=0;e.length>0;){++t===Vd&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,o=r.length;n<o;n++)r[n].runReaction_()}x.isRunningReactions=!1}var no=zt("Reaction",ct);function zd(e){var t=Es;Es=function(n){return e(function(){return t(n)})}}function en(){return!1}function oc(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var sc="action",Fd="action.bound",ic="autoAction",Gd="autoAction.bound",ac="<unnamed action>",Ms=vn(sc),Ud=vn(Fd,{bound:!0}),Is=vn(ic,{autoAction:!0}),qd=vn(Gd,{autoAction:!0,bound:!0});function uc(e){var t=function(n,o){if($e(n))return Nt(n.name||ac,n,e);if($e(o))return Nt(n,o,e);if(bn(o))return(e?Is:Ms).decorate_20223_(n,o);if(Qt(o))return gn(n,o,e?Is:Ms);if(Qt(n))return Ze(vn(e?ic:sc,{name:n,autoAction:e}))};return t}var A=uc(!1);Object.assign(A,Ms);var wr=uc(!0);Object.assign(wr,Is);A.bound=Ze(Ud);wr.bound=Ze(qd);function oo(e){return qu(e.name||ac,!1,e,this,void 0)}function Lt(e){return $e(e)&&e.isMobxAction===!0}function ii(e,t){var r,n,o,s;t===void 0&&(t=ti);var i=(r=(n=t)==null?void 0:n.name)!=null?r:"Autorun",a=!t.scheduler&&!t.delay,u;if(a)u=new ct(i,function(){this.track(f)},t.onError,t.requiresObservable);else{var l=cc(t),c=!1;u=new ct(i,function(){c||(c=!0,l(function(){c=!1,u.isDisposed||u.track(f)}))},t.onError,t.requiresObservable)}function f(){e(u)}return(o=t)!=null&&(o=o.signal)!=null&&o.aborted||u.schedule_(),u.getDisposer_((s=t)==null?void 0:s.signal)}var Wd=function(t){return t()};function cc(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Wd}function ai(e,t,r){var n,o,s;r===void 0&&(r=ti);var i=(n=r.name)!=null?n:"Reaction",a=A(i,r.onError?Kd(r.onError,t):t),u=!r.scheduler&&!r.delay,l=cc(r),c=!0,f=!1,d,p=r.compareStructural?er.structural:r.equals||er.default,h=new ct(i,function(){c||u?_():f||(f=!0,l(_))},r.onError,r.requiresObservable);function _(){if(f=!1,!h.isDisposed){var m=!1,O=d;h.track(function(){var v=oi(!1,function(){return e(h)});m=c||!p(d,v),d=v}),(c&&r.fireImmediately||!c&&m)&&a(d,O,h),c=!1}}return(o=r)!=null&&(o=o.signal)!=null&&o.aborted||h.schedule_(),h.getDisposer_((s=r)==null?void 0:s.signal)}function Kd(e,t){return function(){try{return t.apply(this,arguments)}catch(r){e.call(this,r)}}}var Zd="onBO",Jd="onBUO";function lc(e,t,r){return fc(Zd,e,t,r)}function $o(e,t,r){return fc(Jd,e,t,r)}function fc(e,t,r,n){var o=typeof n=="function"?St(t,r):St(t),s=$e(n)?n:r,i=e+"L";return o[i]?o[i].add(s):o[i]=new Set([s]),function(){var a=o[i];a&&(a.delete(s),a.size===0&&delete o[i])}}var Hd="never",$n="always",Xd="observed";function Yd(e){e.isolateGlobalState===!0&&Ed();var t=e.useProxies,r=e.enforceActions;if(t!==void 0&&(x.useProxies=t===$n?!0:t===Hd?!1:typeof Proxy<"u"),t==="ifavailable"&&(x.verifyProxies=!0),r!==void 0){var n=r===$n?$n:r===Xd;x.enforceActions=n,x.allowStateChanges=!(n===!0||n===$n)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(o){o in e&&(x[o]=!!e[o])}),x.allowStateReads=!x.observableRequiresReaction,e.reactionScheduler&&zd(e.reactionScheduler)}function ko(e,t,r,n){var o=kf(t);return Gt(function(){var s=ur(e,n)[C];mr(o).forEach(function(i){s.extend_(i,o[i],r&&i in r?r[i]:!0)})}),e}function Qd(e,t){return dc(St(e,t))}function dc(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=th(e.observing_).map(dc)),t}function eh(e,t){return hc(St(e,t))}function hc(e){var t={name:e.name_};return Id(e)&&(t.observers=Array.from($d(e)).map(hc)),t}function th(e){return Array.from(new Set(e))}var rh=0;function Do(){this.message="FLOW_CANCELLED"}Do.prototype=Object.create(Error.prototype);function nh(e){return e instanceof Do}var as=Lu("flow"),oh=Lu("flow.bound",{bound:!0}),nr=Object.assign(function(t,r){if(bn(r))return as.decorate_20223_(t,r);if(Qt(r))return gn(t,r,as);var n=t,o=n.name||"<unnamed flow>",s=function(){var a=this,u=arguments,l=++rh,c=A(o+" - runid: "+l+" - init",n).apply(a,u),f,d=void 0,p=new Promise(function(h,_){var m=0;f=_;function O(w){d=void 0;var S;try{S=A(o+" - runid: "+l+" - yield "+m++,c.next).call(c,w)}catch(j){return _(j)}b(S)}function v(w){d=void 0;var S;try{S=A(o+" - runid: "+l+" - yield "+m++,c.throw).call(c,w)}catch(j){return _(j)}b(S)}function b(w){if($e(w?.then)){w.then(b,_);return}return w.done?h(w.value):(d=Promise.resolve(w.value),d.then(O,v))}O(void 0)});return p.cancel=A(o+" - runid: "+l+" - cancel",function(){try{d&&ua(d);var h=c.return(void 0),_=Promise.resolve(h.value);_.then(br,br),ua(_),f(new Do)}catch(m){f(m)}}),p};return s.isMobXFlow=!0,s},as);nr.bound=Ze(oh);function ua(e){$e(e.cancel)&&e.cancel()}function sh(e){return e}function xr(e){return e?.isMobXFlow===!0}function ih(e,t,r){var n;return se(e)||be(e)||si(e)?n=ft(e):Q(e)&&(n=ft(e,t)),n.dehancer=typeof t=="function"?t:r,function(){n.dehancer=void 0}}function No(e,t,r){return $e(r)?uh(e,t,r):ah(e,t)}function ah(e,t){return ft(e).intercept_(t)}function uh(e,t,r){return ft(e,t).intercept_(r)}function pc(e,t){if(t===void 0)return rr(e);if(Q(e)===!1||!e[C].values_.has(t))return!1;var r=St(e,t);return rr(r)}function gc(e){return pc(e)}function qn(e,t){return pc(e,t)}function bc(e,t){return e?t!==void 0?Q(e)?e[C].values_.has(t):!1:Q(e)||!!e[C]||ri(e)||no(e)||rr(e):!1}function lt(e){return bc(e)}function ch(e,t){return bc(e,t)}function Vt(e){if(Q(e))return e[C].keys_();if(se(e)||te(e))return Array.from(e.keys());if(be(e))return e.map(function(t,r){return r});E(5)}function so(e){if(Q(e))return Vt(e).map(function(t){return e[t]});if(se(e))return Vt(e).map(function(t){return e.get(t)});if(te(e))return Array.from(e.values());if(be(e))return e.slice();E(6)}function vc(e){if(Q(e))return Vt(e).map(function(t){return[t,e[t]]});if(se(e))return Vt(e).map(function(t){return[t,e.get(t)]});if(te(e))return Array.from(e.entries());if(be(e))return e.map(function(t,r){return[r,t]});E(7)}function Rt(e,t,r){if(arguments.length===2&&!te(e)){Ae();var n=t;try{for(var o in n)Rt(e,o,n[o])}finally{Pe()}return}Q(e)?e[C].set_(t,r):se(e)?e.set(t,r):te(e)?e.add(t):be(e)?(typeof t!="number"&&(t=parseInt(t,10)),t<0&&E("Invalid index: '"+t+"'"),Ae(),t>=e.length&&(e.length=t+1),e[t]=r,Pe()):E(8)}function Ot(e,t){Q(e)?e[C].delete_(t):se(e)||te(e)?e.delete(t):be(e)?(typeof t!="number"&&(t=parseInt(t,10)),e.splice(t,1)):E(9)}function ui(e,t){if(Q(e))return e[C].has_(t);if(se(e))return e.has(t);if(te(e))return e.has(t);if(be(e))return t>=0&&t<e.length;E(10)}function _c(e,t){if(ui(e,t)){if(Q(e))return e[C].get_(t);if(se(e))return e.get(t);if(be(e))return e[t];E(11)}}function lh(e,t,r){if(Q(e))return e[C].defineProperty_(t,r);E(39)}function yc(e){if(Q(e))return e[C].ownKeys_();E(38)}function _n(e,t,r,n){return $e(r)?dh(e,t,r,n):fh(e,t,r)}function fh(e,t,r){return ft(e).observe_(t,r)}function dh(e,t,r,n){return ft(e,t).observe_(r,n)}function kn(e,t,r){return e.set(t,r),r}function gr(e,t){if(e==null||typeof e!="object"||e instanceof Date||!lt(e))return e;if(si(e)||rr(e))return gr(e.get(),t);if(t.has(e))return t.get(e);if(be(e)){var r=kn(t,e,new Array(e.length));return e.forEach(function(i,a){r[a]=gr(i,t)}),r}if(te(e)){var n=kn(t,e,new Set);return e.forEach(function(i){n.add(gr(i,t))}),n}if(se(e)){var o=kn(t,e,new Map);return e.forEach(function(i,a){o.set(a,gr(i,t))}),o}else{var s=kn(t,e,{});return yc(e).forEach(function(i){hn.propertyIsEnumerable.call(e,i)&&(s[i]=gr(e[i],t))}),s}}function io(e,t){return gr(e,new Map)}function hh(){}function Ee(e,t){t===void 0&&(t=void 0),Ae();try{return e.apply(t)}finally{Pe()}}function ph(e,t,r){return arguments.length===1||t&&typeof t=="object"?gh(e,t):mc(e,t,r||{})}function mc(e,t,r){var n;if(typeof r.timeout=="number"){var o=new Error("WHEN_TIMEOUT");n=setTimeout(function(){if(!i[C].isDisposed)if(i(),r.onError)r.onError(o);else throw o},r.timeout)}r.name="When";var s=Nt("When-effect",t),i=ii(function(a){var u=oi(!1,e);u&&(a.dispose(),n&&clearTimeout(n),s())},r);return i}function gh(e,t){var r;if(t!=null&&(r=t.signal)!=null&&r.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var n,o,s=new Promise(function(i,a){var u,l=mc(e,i,Dt({},t,{onError:a}));n=function(){l(),a(new Error("WHEN_CANCELLED"))},o=function(){l(),a(new Error("WHEN_ABORTED"))},t==null||(u=t.signal)==null||u.addEventListener==null||u.addEventListener("abort",o)}).finally(function(){var i;return t==null||(i=t.signal)==null||i.removeEventListener==null?void 0:i.removeEventListener("abort",o)});return s.cancel=n,s}function hr(e){return e[C]}var bh={has:function(t,r){return hr(t).has_(r)},get:function(t,r){return hr(t).get_(r)},set:function(t,r,n){var o;return Qt(r)?(o=hr(t).set_(r,n,!0))!=null?o:!0:!1},deleteProperty:function(t,r){var n;return Qt(r)?(n=hr(t).delete_(r,!0))!=null?n:!0:!1},defineProperty:function(t,r,n){var o;return(o=hr(t).defineProperty_(r,n))!=null?o:!0},ownKeys:function(t){return hr(t).ownKeys_()},preventExtensions:function(t){E(13)}};function vh(e,t){var r,n;return Ru(),e=ur(e,t),(n=(r=e[C]).proxy_)!=null?n:r.proxy_=new Proxy(e,bh)}function Le(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function yn(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),Tu(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Ve(e,t){var r=ar();try{for(var n=[].concat(e.interceptors_||[]),o=0,s=n.length;o<s&&(t=n[o](t),t&&!t.type&&E(14),!!t);o++);return t}finally{mt(r)}}function Je(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function mn(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),Tu(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function He(e,t){var r=ar(),n=e.changeListeners_;if(n){n=n.slice();for(var o=0,s=n.length;o<s;o++)n[o](t);mt(r)}}function Lo(e,t,r){return Gt(function(){var n,o=ur(e,r)[C];(n=t)!=null||(t=Bf(e)),mr(t).forEach(function(s){return o.make_(s,t[s])})}),e}var us=Symbol("mobx-keys");function _h(e,t,r){return xt(e)?ko(e,e,t,r):(Gt(function(){var n=ur(e,r)[C];if(!e[us]){var o=Object.getPrototypeOf(e),s=new Set([].concat(mr(e),mr(o)));s.delete("constructor"),s.delete(C),pn(o,us,s)}e[us].forEach(function(i){return n.make_(i,t&&i in t?t[i]:!0)})}),e)}var ca="splice",at="update",yh=1e4,mh={get:function(t,r){var n=t[C];return r===C?n:r==="length"?n.getArrayLength_():typeof r=="string"&&!isNaN(r)?n.get_(parseInt(r)):yt(ao,r)?ao[r]:t[r]},set:function(t,r,n){var o=t[C];return r==="length"&&o.setArrayLength_(n),typeof r=="symbol"||isNaN(r)?t[r]=n:o.set_(parseInt(r),n),!0},preventExtensions:function(){E(15)}},ci=(function(){function e(r,n,o,s){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=o,this.legacyMode_=s,this.atom_=new Ft(r),this.enhancer_=function(i,a){return n(i,a,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return yn(this,n)},t.observe_=function(n,o){return o===void 0&&(o=!1),o&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),mn(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&E("Out of range: "+n);var o=this.values_.length;if(n!==o)if(n>o){for(var s=new Array(n-o),i=0;i<n-o;i++)s[i]=void 0;this.spliceWithArray_(o,0,s)}else this.spliceWithArray_(n,o-n)},t.updateArrayLength_=function(n,o){n!==this.lastKnownLength_&&E(16),this.lastKnownLength_+=o,this.legacyMode_&&o>0&&Ac(n+o+1)},t.spliceWithArray_=function(n,o,s){var i=this,a=this.values_.length;if(n===void 0?n=0:n>a?n=a:n<0&&(n=Math.max(0,a+n)),arguments.length===1?o=a-n:o==null?o=0:o=Math.max(0,Math.min(o,a-n)),s===void 0&&(s=As),Le(this)){var u=Ve(this,{object:this.proxy_,type:ca,index:n,removedCount:o,added:s});if(!u)return As;o=u.removedCount,s=u.added}if(s=s.length===0?s:s.map(function(f){return i.enhancer_(f,void 0)}),this.legacyMode_){var l=s.length-o;this.updateArrayLength_(a,l)}var c=this.spliceItemsIntoValues_(n,o,s);return(o!==0||s.length!==0)&&this.notifyArraySplice_(n,s,c),this.dehanceValues_(c)},t.spliceItemsIntoValues_=function(n,o,s){if(s.length<yh){var i;return(i=this.values_).splice.apply(i,[n,o].concat(s))}else{var a=this.values_.slice(n,n+o),u=this.values_.slice(n+o);this.values_.length+=s.length-o;for(var l=0;l<s.length;l++)this.values_[n+l]=s[l];for(var c=0;c<u.length;c++)this.values_[n+s.length+c]=u[c];return a}},t.notifyArrayChildUpdate_=function(n,o,s){var i=!this.owned_&&en(),a=Je(this),u=a||i?{observableKind:"array",object:this.proxy_,type:at,debugObjectName:this.atom_.name_,index:n,newValue:o,oldValue:s}:null;this.atom_.reportChanged(),a&&He(this,u)},t.notifyArraySplice_=function(n,o,s){var i=!this.owned_&&en(),a=Je(this),u=a||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:ca,index:n,removed:s,added:o,removedCount:s.length,addedCount:o.length}:null;this.atom_.reportChanged(),a&&He(this,u)},t.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},t.set_=function(n,o){var s=this.values_;if(this.legacyMode_&&n>s.length&&E(17,n,s.length),n<s.length){var i=s[n];if(Le(this)){var a=Ve(this,{type:at,object:this.proxy_,index:n,newValue:o});if(!a)return;o=a.newValue}o=this.enhancer_(o,i);var u=o!==i;u&&(s[n]=o,this.notifyArrayChildUpdate_(n,o,i))}else{for(var l=new Array(n+1-s.length),c=0;c<l.length-1;c++)l[c]=void 0;l[l.length-1]=o,this.spliceWithArray_(s.length,0,l)}},e})();function wh(e,t,r,n){return r===void 0&&(r="ObservableArray"),n===void 0&&(n=!1),Ru(),Gt(function(){var o=new ci(r,t,n,!1);Mu(o.values_,C,o);var s=new Proxy(o.values_,mh);return o.proxy_=s,e&&e.length&&o.spliceWithArray_(0,0,e),s})}var ao={clear:function(){return this.splice(0)},replace:function(t){var r=this[C];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];var i=this[C];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(t);case 2:return i.spliceWithArray_(t,r)}return i.spliceWithArray_(t,r,o)},spliceWithArray:function(t,r,n){return this[C].spliceWithArray_(t,r,n)},push:function(){for(var t=this[C],r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[C].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[C],r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return x.trackingDerivation&&E(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){x.trackingDerivation&&E(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[C],n=r.dehanceValues_(r.values_).indexOf(t);return n>-1?(this.splice(n,1),!0):!1}};q("at",De);q("concat",De);q("flat",De);q("includes",De);q("indexOf",De);q("join",De);q("lastIndexOf",De);q("slice",De);q("toString",De);q("toLocaleString",De);q("toSorted",De);q("toSpliced",De);q("with",De);q("every",tt);q("filter",tt);q("find",tt);q("findIndex",tt);q("findLast",tt);q("findLastIndex",tt);q("flatMap",tt);q("forEach",tt);q("map",tt);q("some",tt);q("toReversed",tt);q("reduce",wc);q("reduceRight",wc);function q(e,t){typeof Array.prototype[e]=="function"&&(ao[e]=t(e))}function De(e){return function(){var t=this[C];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function tt(e){return function(t,r){var n=this,o=this[C];o.atom_.reportObserved();var s=o.dehanceValues_(o.values_);return s[e](function(i,a){return t.call(r,i,a,n)})}}function wc(e){return function(){var t=this,r=this[C];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),o=arguments[0];return arguments[0]=function(s,i,a){return o(s,i,a,t)},n[e].apply(n,arguments)}}var xh=zt("ObservableArrayAdministration",ci);function be(e){return Co(e)&&xh(e[C])}var Oh={},It="add",uo="delete",Vo=(function(){function e(r,n,o){var s=this;n===void 0&&(n=tr),o===void 0&&(o="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[C]=Oh,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=o,$e(Map)||E(18),Gt(function(){s.keysAtom_=jt("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,r&&s.merge(r)})}var t=e.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var o=this;if(!x.trackingDerivation)return this.has_(n);var s=this.hasMap_.get(n);if(!s){var i=s=new $t(this.has_(n),jo,"ObservableMap.key?",!1);this.hasMap_.set(n,i),$o(i,function(){return o.hasMap_.delete(n)})}return s.get()},t.set=function(n,o){var s=this.has_(n);if(Le(this)){var i=Ve(this,{type:s?at:It,object:this,newValue:o,name:n});if(!i)return this;o=i.newValue}return s?this.updateValue_(n,o):this.addValue_(n,o),this},t.delete=function(n){var o=this;if(Le(this)){var s=Ve(this,{type:uo,object:this,name:n});if(!s)return!1}if(this.has_(n)){var i=en(),a=Je(this),u=a||i?{observableKind:"map",debugObjectName:this.name_,type:uo,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Ee(function(){var l;o.keysAtom_.reportChanged(),(l=o.hasMap_.get(n))==null||l.setNewValue_(!1);var c=o.data_.get(n);c.setNewValue_(void 0),o.data_.delete(n)}),a&&He(this,u),!0}return!1},t.updateValue_=function(n,o){var s=this.data_.get(n);if(o=s.prepareNewValue_(o),o!==x.UNCHANGED){var i=en(),a=Je(this),u=a||i?{observableKind:"map",debugObjectName:this.name_,type:at,object:this,oldValue:s.value_,name:n,newValue:o}:null;s.setNewValue_(o),a&&He(this,u)}},t.addValue_=function(n,o){var s=this;Ee(function(){var l,c=new $t(o,s.enhancer_,"ObservableMap.key",!1);s.data_.set(n,c),o=c.value_,(l=s.hasMap_.get(n))==null||l.setNewValue_(!0),s.keysAtom_.reportChanged()});var i=en(),a=Je(this),u=a||i?{observableKind:"map",debugObjectName:this.name_,type:It,object:this,name:n,newValue:o}:null;a&&He(this,u)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,o=this.keys();return la({next:function(){var i=o.next(),a=i.done,u=i.value;return{done:a,value:a?void 0:n.get(u)}}})},t.entries=function(){var n=this,o=this.keys();return la({next:function(){var i=o.next(),a=i.done,u=i.value;return{done:a,value:a?void 0:[u,n.get(u)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(n,o){for(var s=vr(this),i;!(i=s()).done;){var a=i.value,u=a[0],l=a[1];n.call(o,l,u,this)}},t.merge=function(n){var o=this;return se(n)&&(n=new Map(n)),Ee(function(){xt(n)?$f(n).forEach(function(s){return o.set(s,n[s])}):Array.isArray(n)?n.forEach(function(s){var i=s[0],a=s[1];return o.set(i,a)}):Er(n)?(If(n)||E(19,n),n.forEach(function(s,i){return o.set(i,s)})):n!=null&&E(20,n)}),this},t.clear=function(){var n=this;Ee(function(){Mo(function(){for(var o=vr(n.keys()),s;!(s=o()).done;){var i=s.value;n.delete(i)}})})},t.replace=function(n){var o=this;return Ee(function(){for(var s=Sh(n),i=new Map,a=!1,u=vr(o.data_.keys()),l;!(l=u()).done;){var c=l.value;if(!s.has(c)){var f=o.delete(c);if(f)a=!0;else{var d=o.data_.get(c);i.set(c,d)}}}for(var p=vr(s.entries()),h;!(h=p()).done;){var _=h.value,m=_[0],O=_[1],v=o.data_.has(m);if(o.set(m,O),o.data_.has(m)){var b=o.data_.get(m);i.set(m,b),v||(a=!0)}}if(!a)if(o.data_.size!==i.size)o.keysAtom_.reportChanged();else for(var w=o.data_.keys(),S=i.keys(),j=w.next(),k=S.next();!j.done;){if(j.value!==k.value){o.keysAtom_.reportChanged();break}j=w.next(),k=S.next()}o.data_=i}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,o){return mn(this,n)},t.intercept_=function(n){return yn(this,n)},Mr(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])})(),se=zt("ObservableMap",Vo);function la(e){return e[Symbol.toStringTag]="MapIterator",hi(e)}function Sh(e){if(Er(e)||se(e))return e;if(Array.isArray(e))return new Map(e);if(xt(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return E(21,e)}var Ah={},li=(function(){function e(r,n,o){var s=this;n===void 0&&(n=tr),o===void 0&&(o="ObservableSet"),this.name_=void 0,this[C]=Ah,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=o,$e(Set)||E(22),this.enhancer_=function(i,a){return n(i,a,o)},Gt(function(){s.atom_=jt(s.name_),r&&s.replace(r)})}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;Ee(function(){Mo(function(){for(var o=vr(n.data_.values()),s;!(s=o()).done;){var i=s.value;n.delete(i)}})})},t.forEach=function(n,o){for(var s=vr(this),i;!(i=s()).done;){var a=i.value;n.call(o,a,a,this)}},t.add=function(n){var o=this;if(Le(this)){var s=Ve(this,{type:It,object:this,newValue:n});if(!s)return this;n=s.newValue}if(!this.has(n)){Ee(function(){o.data_.add(o.enhancer_(n,void 0)),o.atom_.reportChanged()});var i=!1,a=Je(this),u=a||i?{observableKind:"set",debugObjectName:this.name_,type:It,object:this,newValue:n}:null;a&&He(this,u)}return this},t.delete=function(n){var o=this;if(Le(this)){var s=Ve(this,{type:uo,object:this,oldValue:n});if(!s)return!1}if(this.has(n)){var i=!1,a=Je(this),u=a||i?{observableKind:"set",debugObjectName:this.name_,type:uo,object:this,oldValue:n}:null;return Ee(function(){o.atom_.reportChanged(),o.data_.delete(n)}),a&&He(this,u),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=this.values();return fa({next:function(){var s=n.next(),i=s.value,a=s.done;return a?{value:void 0,done:a}:{value:[i,i],done:a}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,o=this.data_.values();return fa({next:function(){var i=o.next(),a=i.value,u=i.done;return u?{value:void 0,done:u}:{value:n.dehanceValue_(a),done:u}}})},t.intersection=function(n){if(pt(n)&&!te(n))return n.intersection(this);var o=new Set(this);return o.intersection(n)},t.union=function(n){if(pt(n)&&!te(n))return n.union(this);var o=new Set(this);return o.union(n)},t.difference=function(n){return new Set(this).difference(n)},t.symmetricDifference=function(n){if(pt(n)&&!te(n))return n.symmetricDifference(this);var o=new Set(this);return o.symmetricDifference(n)},t.isSubsetOf=function(n){return new Set(this).isSubsetOf(n)},t.isSupersetOf=function(n){return new Set(this).isSupersetOf(n)},t.isDisjointFrom=function(n){if(pt(n)&&!te(n))return n.isDisjointFrom(this);var o=new Set(this);return o.isDisjointFrom(n)},t.replace=function(n){var o=this;return te(n)&&(n=new Set(n)),Ee(function(){Array.isArray(n)?(o.clear(),n.forEach(function(s){return o.add(s)})):pt(n)?(o.clear(),n.forEach(function(s){return o.add(s)})):n!=null&&E("Cannot initialize set from "+n)}),this},t.observe_=function(n,o){return mn(this,n)},t.intercept_=function(n){return yn(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},Mr(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])})(),te=zt("ObservableSet",li);function fa(e){return e[Symbol.toStringTag]="SetIterator",hi(e)}var da=Object.create(null),ha="remove",xc=(function(){function e(r,n,o,s){n===void 0&&(n=new Map),s===void 0&&(s=fd),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=n,this.name_=o,this.defaultAnnotation_=s,this.keysAtom_=new Ft("ObservableObject.keys"),this.isPlainObject_=xt(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,o){var s=this.values_.get(n);if(s instanceof Xe)return s.set(o),!0;if(Le(this)){var i=Ve(this,{type:at,object:this.proxy_||this.target_,name:n,newValue:o});if(!i)return null;o=i.newValue}if(o=s.prepareNewValue_(o),o!==x.UNCHANGED){var a=Je(this),u=!1,l=a||u?{type:at,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:n,newValue:o}:null;s.setNewValue_(o),a&&He(this,l)}return!0},t.get_=function(n){return x.trackingDerivation&&!yt(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,o,s){return s===void 0&&(s=!1),yt(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,o):s?Reflect.set(this.target_,n,o):(this.target_[n]=o,!0):this.extend_(n,{value:o,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},t.has_=function(n){if(!x.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var o=this.pendingKeys_.get(n);return o||(o=new $t(n in this.target_,jo,"ObservableObject.key?",!1),this.pendingKeys_.set(n,o)),o.get()},t.make_=function(n,o){if(o===!0&&(o=this.defaultAnnotation_),o!==!1){if(!(n in this.target_)){var s;if((s=this.target_[st])!=null&&s[n])return;E(1,o.annotationType_,this.name_+"."+n.toString())}for(var i=this.target_;i&&i!==hn;){var a=Qn(i,n);if(a){var u=o.make_(this,n,a,i);if(u===0)return;if(u===1)break}i=Object.getPrototypeOf(i)}ga(this,o,n)}},t.extend_=function(n,o,s,i){if(i===void 0&&(i=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(n,o,i);var a=s.extend_(this,n,o,i);return a&&ga(this,s,n),a},t.defineProperty_=function(n,o,s){s===void 0&&(s=!1);try{Ae();var i=this.delete_(n);if(!i)return i;if(Le(this)){var a=Ve(this,{object:this.proxy_||this.target_,name:n,type:It,newValue:o.value});if(!a)return null;var u=a.newValue;o.value!==u&&(o=Dt({},o,{value:u}))}if(s){if(!Reflect.defineProperty(this.target_,n,o))return!1}else it(this.target_,n,o);this.notifyPropertyAddition_(n,o.value)}finally{Pe()}return!0},t.defineObservableProperty_=function(n,o,s,i){i===void 0&&(i=!1);try{Ae();var a=this.delete_(n);if(!a)return a;if(Le(this)){var u=Ve(this,{object:this.proxy_||this.target_,name:n,type:It,newValue:o});if(!u)return null;o=u.newValue}var l=pa(n),c={configurable:x.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:l.get,set:l.set};if(i){if(!Reflect.defineProperty(this.target_,n,c))return!1}else it(this.target_,n,c);var f=new $t(o,s,"ObservableObject.key",!1);this.values_.set(n,f),this.notifyPropertyAddition_(n,f.value_)}finally{Pe()}return!0},t.defineComputedProperty_=function(n,o,s){s===void 0&&(s=!1);try{Ae();var i=this.delete_(n);if(!i)return i;if(Le(this)){var a=Ve(this,{object:this.proxy_||this.target_,name:n,type:It,newValue:void 0});if(!a)return null}o.name||(o.name="ObservableObject.key"),o.context=this.proxy_||this.target_;var u=pa(n),l={configurable:x.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:u.get,set:u.set};if(s){if(!Reflect.defineProperty(this.target_,n,l))return!1}else it(this.target_,n,l);this.values_.set(n,new Xe(o)),this.notifyPropertyAddition_(n,void 0)}finally{Pe()}return!0},t.delete_=function(n,o){if(o===void 0&&(o=!1),!yt(this.target_,n))return!0;if(Le(this)){var s=Ve(this,{object:this.proxy_||this.target_,name:n,type:ha});if(!s)return null}try{var i;Ae();var a=Je(this),u=!1,l=this.values_.get(n),c=void 0;if(!l&&(a||u)){var f;c=(f=Qn(this.target_,n))==null?void 0:f.value}if(o){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(l&&(this.values_.delete(n),l instanceof $t&&(c=l.value_),rc(l)),this.keysAtom_.reportChanged(),(i=this.pendingKeys_)==null||(i=i.get(n))==null||i.set(n in this.target_),a||u){var d={type:ha,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:c,name:n};a&&He(this,d)}}finally{Pe()}return!0},t.observe_=function(n,o){return mn(this,n)},t.intercept_=function(n){return yn(this,n)},t.notifyPropertyAddition_=function(n,o){var s,i=Je(this),a=!1;if(i||a){var u=i||a?{type:It,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:o}:null;i&&He(this,u)}(s=this.pendingKeys_)==null||(s=s.get(n))==null||s.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),mr(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e})();function ur(e,t){var r;if(yt(e,C))return e;var n=(r=t?.name)!=null?r:"ObservableObject",o=new xc(e,new Map,String(n),xd(t));return pn(e,C,o),e}var Ph=zt("ObservableObjectAdministration",xc);function pa(e){return da[e]||(da[e]={get:function(){return this[C].getObservablePropValue_(e)},set:function(r){return this[C].setObservablePropValue_(e,r)}})}function Q(e){return Co(e)?Ph(e[C]):!1}function ga(e,t,r){var n;(n=e.target_[st])==null||delete n[r]}var Ch=Sc(0),cs=0,Oc=function(){};function jh(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}jh(Oc,Array.prototype);var fi=(function(e){function t(n,o,s,i){var a;return s===void 0&&(s="ObservableArray"),i===void 0&&(i=!1),a=e.call(this)||this,Gt(function(){var u=new ci(s,o,i,!0);u.proxy_=a,Mu(a,C,u),n&&n.length&&a.spliceWithArray(0,0,n),Object.defineProperty(a,"0",Ch)}),a}ku(t,e);var r=t.prototype;return r.concat=function(){this[C].atom_.reportObserved();for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return Array.prototype.concat.apply(this.slice(),s.map(function(a){return be(a)?a.slice():a}))},r[Symbol.iterator]=function(){var n=this,o=0;return hi({next:function(){return o<n.length?{value:n[o++],done:!1}:{done:!0,value:void 0}}})},Mr(t,[{key:"length",get:function(){return this[C].getArrayLength_()},set:function(o){this[C].setArrayLength_(o)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])})(Oc);Object.entries(ao).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&pn(fi.prototype,t,r)});function Sc(e){return{enumerable:!1,configurable:!0,get:function(){return this[C].get_(e)},set:function(r){this[C].set_(e,r)}}}function Rh(e){it(fi.prototype,""+e,Sc(e))}function Ac(e){if(e>cs){for(var t=cs;t<e+100;t++)Rh(t);cs=e}}Ac(1e3);function Th(e,t,r){return new fi(e,t,r)}function St(e,t){if(typeof e=="object"&&e!==null){if(be(e))return t!==void 0&&E(23),e[C].atom_;if(te(e))return e.atom_;if(se(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||E(25,t,co(e)),r}if(Q(e)){if(!t)return E(26);var n=e[C].values_.get(t);return n||E(27,t,co(e)),n}if(ri(e)||rr(e)||no(e))return e}else if($e(e)&&no(e[C]))return e[C];E(28)}function ft(e,t){if(e||E(29),t!==void 0)return ft(St(e,t));if(ri(e)||rr(e)||no(e)||se(e)||te(e))return e;if(e[C])return e[C];E(24,e)}function co(e,t){var r;if(t!==void 0)r=St(e,t);else{if(Lt(e))return e.name;Q(e)||se(e)||te(e)?r=ft(e):r=St(e)}return r.name_}function Gt(e){var t=ar(),r=To(!0);Ae();try{return e()}finally{Pe(),Eo(r),mt(t)}}var ba=hn.toString;function di(e,t,r){return r===void 0&&(r=-1),$s(e,t,r)}function $s(e,t,r,n,o){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var s=typeof e;if(s!=="function"&&s!=="object"&&typeof t!="object")return!1;var i=ba.call(e);if(i!==ba.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=va(e),t=va(t);var a=i==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var u=e.constructor,l=t.constructor;if(u!==l&&!($e(u)&&u instanceof u&&$e(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),n=n||[],o=o||[];for(var c=n.length;c--;)if(n[c]===e)return o[c]===t;if(n.push(e),o.push(t),a){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!$s(e[c],t[c],r-1,n,o))return!1}else{var f=Object.keys(e),d=f.length;if(Object.keys(t).length!==d)return!1;for(var p=0;p<d;p++){var h=f[p];if(!(yt(t,h)&&$s(e[h],t[h],r-1,n,o)))return!1}}return n.pop(),o.pop(),!0}function va(e){return be(e)?e.slice():Er(e)||se(e)||pt(e)||te(e)?Array.from(e.entries()):e}var _a,Eh=((_a=Po().Iterator)==null?void 0:_a.prototype)||{};function hi(e){return e[Symbol.iterator]=Mh,Object.assign(Object.create(Eh),e)}function Mh(){return this}["Symbol","Map","Set"].forEach(function(e){var t=Po();typeof t[e]>"u"&&E("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:oc,extras:{getDebugName:co},$mobx:C});const Ih=Object.freeze(Object.defineProperty({__proto__:null,$mobx:C,FlowCancellationError:Do,ObservableMap:Vo,ObservableSet:li,Reaction:ct,_allowStateChanges:oi,_allowStateChangesInsideComputed:oo,_allowStateReadsEnd:_r,_allowStateReadsStart:Io,_autoAction:wr,_endAction:Ku,_getAdministration:ft,_getGlobalState:Yu,_interceptReads:ih,_isComputingDerivation:Zu,_resetGlobalState:Md,_startAction:Wu,action:A,autorun:ii,comparer:er,computed:Y,configure:Yd,createAtom:jt,defineProperty:lh,entries:vc,extendObservable:ko,flow:nr,flowResult:sh,get:_c,getAtom:St,getDebugName:co,getDependencyTree:Qd,getObserverTree:eh,has:ui,intercept:No,isAction:Lt,isBoxedObservable:si,isComputed:gc,isComputedProp:qn,isFlow:xr,isFlowCancellationError:nh,isObservable:lt,isObservableArray:be,isObservableMap:se,isObservableObject:Q,isObservableProp:ch,isObservableSet:te,keys:Vt,makeAutoObservable:_h,makeObservable:Lo,observable:N,observe:_n,onBecomeObserved:lc,onBecomeUnobserved:$o,onReactionError:Ld,override:Kf,ownKeys:yc,reaction:ai,remove:Ot,runInAction:oo,set:Rt,spy:oc,toJS:io,trace:hh,transaction:Ee,untracked:Mo,values:so,when:ph},Symbol.toStringTag,{value:"Module"}));var $h=Object.defineProperty,kh=(e,t,r)=>t in e?$h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t,r)=>kh(e,typeof t!="symbol"?t+"":t,r),Pc,ya,ma,wa,xa,Oa,Sa,Aa,Pa,Ca;const Dh=new Map;function Nh(e,t,r){Dh.set(e,{modelClass:t,fnName:r})}var wn=(e=>(e.ApplyPatches="$$applyPatches",e.ApplySnapshot="$$applySnapshot",e.Detach="$$detach",e.ApplySet="$$applySet",e.ApplyDelete="$$applyDelete",e.ApplyMethodCall="$$applyMethodCall",e))(wn||{});new Set(Object.values(wn));var Ut=(e=>(e.Sync="sync",e.Async="async",e))(Ut||{});let Cc;function Bo(){return Cc}function ja(e){Cc=e}const jc=Symbol("modelAction");function pi(e){return typeof e=="function"&&jc in e}const G="$modelType",Me="$modelId";function Rc(e){return e===G}class gi extends Error{constructor(t){super(t),Object.setPrototypeOf(this,gi.prototype)}}function y(e){return new gi(e)}const Lh={enumerable:!1,writable:!0,configurable:!1,value:void 0};function Tc(e,t,r,n=!0){n?(Object.defineProperty(e,t,Lh),e[t]=r):Object.defineProperty(e,t,{enumerable:!1,writable:n,configurable:!0,value:r})}function ut(e){if(!Fe(e))return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function Fe(e){return e!==null&&typeof e=="object"}function ce(e){switch(typeof e){case"number":case"string":case"boolean":case"undefined":case"bigint":return!0;default:return e===null}}function zo(e){return e instanceof Map||se(e)}function Fo(e){return e instanceof Set||te(e)}function xe(e){return Array.isArray(e)||be(e)}const Ec=!1;function Ir(e,t){if(!Fe(e))throw y(`${t} must be an object`)}function Mc(e,t){if(typeof e!="function")throw y(`${t} must be a function`)}function Vh(e,t){if(!ce(e))throw y(`${t} must be a primitive`)}const Ic=Symbol("runAfterNew"),Bh=Symbol("runBeforeOnInit");function $c(e,t,r){let n=e[t];n&&Object.prototype.hasOwnProperty.call(e,t)||(n=n?n.slice():[],Tc(e,t,n)),n.push(r)}function lo(e,t){const r=e[t];if(r)for(const n of r)n(e)}const Ra=new Set;function kc(e,t,r){if(r){if(Ra.has(r))return;Ra.add(r)}switch(t="[mobx-keystone] "+t,e){case"warn":console.warn(t);break;case"error":console.error(t);break;default:throw y(`unknown log type - ${e}`)}}function Tt(e){let t,r=!1;return(...n)=>(r||(t=e(...n),r=!0),t)}const Ye=e=>e,fo={makeObservable:Ih.makeObservable};function zh(e){return`set${e[0].toUpperCase()}${e.slice(1)}`}function Dc(){return fo.makeObservable?6:5}const xn="mobx-keystone",ho=Symbol("propsType"),Ta=Symbol("fromSnapshotOverrideType"),Ea=Symbol("toSnapshotOverrideType"),bi=Symbol("modelInitialized"),Wn={},Ie=new WeakMap;function On(e){return Wn[e]}function Qe(e,t,r){let n=e.get(t);return n===void 0&&(n=r(),e.set(t,n)),n}const ks=new WeakMap,Nc=new WeakMap;function Fh(e,t){return e||t?e&&t?e.parent===t.parent&&e.path===t.path:!1:!0}function Gh(){return jt("parentAtom")}function Uh(e){Qe(Nc,e,Gh).reportObserved()}function Ma(e){var t;(t=Nc.get(e))==null||t.reportChanged()}const $r=new WeakMap;function Or(e){const t=$r.get(e);return t??e}function on(e){return ge(e)?e.$:e}const or=new WeakMap;function At(e,t){return!t&&$r.has(e)?!1:or.has(e)}function Ds(e){return!ce(e)&&At(e,!1)}function fe(e,t,r=!1){if(!r&&$r.has(e))throw y(`${t} must be the model object instance instead of the '$' sub-object`);if(ce(e)||!At(e,!0))throw y(`${t} must be a tree node (usually a model or a shallow / deep child part of a model 'data' object)`)}function qh(e,t="argument"){fe(e,t,!1)}let tn=!1;function Wh(e){const t=tn;tn=!0;try{oo(()=>{e()})}finally{tn=t}}const sn=Symbol("modelMetadata"),ls=Symbol("modelUnwrappedClass"),Ns=Symbol("runAfterModelDecorator"),Lc=Symbol("modelProperties");function Sn(e){return e[Lc]}function Kh(e,t){e[Lc]=t}const ae=Symbol("noDefaultValue"),vi={_setter:!1,_isId:!0,withSetter(e){const t=Object.create(this);return t._setter=e??!0,t},typedAs(){return vi}},Ia={_defaultFn:ae,_defaultValue:ae,_typeChecker:void 0,_setter:!1,_isId:!1,_transform:void 0,_fromSnapshotProcessor:void 0,_toSnapshotProcessor:void 0,withSetter(e){const t=Object.create(this);return t._setter=e??!0,t},withTransform(e){const t=Object.create(this);return t._transform=Jh(e),t},withSnapshotProcessor({fromSnapshot:e,toSnapshot:t}){let r;if(this._fromSnapshotProcessor&&e){const s=this._fromSnapshotProcessor,i=e;r=a=>s(i(a))}else e?r=e:r=this._fromSnapshotProcessor;let n;if(this._toSnapshotProcessor&&t){const s=this._toSnapshotProcessor,i=t;n=a=>i(s(a))}else t?n=t:n=this._toSnapshotProcessor;const o=Object.create(this);return o._fromSnapshotProcessor=r,o._toSnapshotProcessor=n,o}};function Ls(e){if(!(arguments.length>0))return Ia;let r=$a.get(e);return r||(r=Object.create(Ia),typeof e=="function"?r._defaultFn=e:r._defaultValue=e,$a.set(e,r)),r}const $a=new Map;let Vs=!1;const Zh=()=>{Vs=!0};function Jh(e){const t=new WeakMap,r=o=>o.originalValue==null?o.originalValue:e.transform(o),n=o=>o.transformedValue==null?o.transformedValue:e.untransform(o);return{transform(o,s,i,a){const u=Qe(t,s,()=>new Map);let l=u.get(i);l?.originalValue!==o&&(u.delete(i),l=void 0);const c=r({originalValue:o,cachedTransformedValue:l?.transformedValue,setOriginalValue:a});return u.set(i,{originalValue:o,transformedValue:c}),c},untransform(o,s,i){const a=Qe(t,s,()=>new Map);Vs=!1;const u=n({transformedValue:o,cacheTransformedValue:Zh});return Vs?a.set(i,{originalValue:u,transformedValue:o}):a.delete(i),u}}}function an(e){return e._defaultFn!==ae?e._defaultFn():e._defaultValue!==ae?e._defaultValue:ae}let Hh="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Xh=(e=21)=>{let t="",r=e|0;for(;r--;)t+=Hh[Math.random()*64|0];return t},ka=0;const Yh=Xh();function Qh(){const e=ka.toString(36)+"-"+Yh;return ka++,e}let po={modelAutoTypeChecking:"devModeOnly",modelIdGenerator:Qh,allowUndefinedArrayElements:!1,showDuplicateModelNameWarnings:!0};function Bv(e){po=Object.freeze({...po,...e})}function Go(){return po}function An(){switch(Go().modelAutoTypeChecking){case"devModeOnly":return Ec;case"alwaysOff":return!1;case"alwaysOn":return!0;default:throw y(`invalid 'modelAutoTypeChecking' config value - ${po.modelAutoTypeChecking}`)}}const Da=new WeakMap;function kr(e){let t=Da.get(e);return t||(t={shallow:new Set,shallowAtom:void 0,deep:new Set,deepDirty:!0,deepAtom:void 0,extensionsData:Fc()},Da.set(e,t)),t}function Uo(e){const t=kr(e);return t.shallowAtom||(t.shallowAtom=jt("shallowChildrenAtom")),t.shallowAtom.reportObserved(),t.shallow}function ep(e){const t=kr(e);return t.deepDirty&&Vc(e),t.deepAtom||(t.deepAtom=jt("deepChildrenAtom")),t.deepAtom.reportObserved(),t}function Na(e,t){t.deep.add(e),_i.forEach((r,n)=>{r.addNode(e,t.extensionsData.get(n))})}const Vc=A(e=>{var t;const r=kr(e);if(!r.deepDirty)return r;r.deep=new Set,r.extensionsData=Fc();const n=r.shallow.values();let o=n.next();for(;!o.done;){Na(o.value,r);const i=Vc(o.value).deep.values();let a=i.next();for(;!a.done;)Na(a.value,r),a=i.next();o=n.next()}return r.deepDirty=!1,(t=r.deepAtom)==null||t.reportChanged(),r}),tp=A((e,t)=>{var r;const n=kr(e);n.shallow.add(t),(r=n.shallowAtom)==null||r.reportChanged(),Bc(e,n)}),rp=A((e,t)=>{var r;const n=kr(e);n.shallow.delete(t),(r=n.shallowAtom)==null||r.reportChanged(),Bc(e,n)});function Bc(e,t){var r;let n=e,o=t;for(;n;)o.deepDirty=!0,(r=o.deepAtom)==null||r.reportChanged(),n=un(n,!1),n&&(o=kr(n))}const _i=new Map;function zc(e){const t={};return _i.set(t,e),r=>r.extensionsData.get(t)}function Fc(){const e=new WeakMap;return _i.forEach((t,r)=>{e.set(r,t.initData())}),e}function np(){return!!Bo()}function Gc(){if(!np())throw y("data changes must be performed inside model actions")}const Bs=[];function Uc(){return!!Bo()}function op(e){Uc()?Bs.push(e):e()}let fs=!1;function sp(){if(!(Uc()||fs)){fs=!0;try{for(;Bs.length>0;)Bs.shift()()}finally{fs=!1}}}function sr(e){if(ge(e))return e.constructor[sn];if(jn(e))return e[sn];throw y("modelClassOrInstance must be a model class or instance")}const ip=new WeakMap;function ir(e){return Qe(ip,e,()=>sr(e).modelIdProperty)}var Sr=(e=>(e.OnInit="$$onInit",e.OnLazyInit="$$onLazyInit",e.OnAttachedToRootStore="$$onAttachedToRootStore",e.OnAttachedToRootStoreDisposer="$$onAttachedToRootStoreDisposer",e))(Sr||{});new Set(Object.values(Sr));var yi=(e=>(e.ParentFirst="parentFirst",e.ChildrenFirst="childrenFirst",e))(yi||{});function qc(e,t,r){return fe(e,"root"),r==="parentFirst"?ap(e,t):Wc(e,t)}function ap(e,t){const r=[e];for(;r.length>0;){const n=r.pop(),o=t(n);if(o!==void 0)return o;const s=Uo(n);r.length+=s.size;let i=r.length-1;const a=s.values();let u=a.next();for(;!u.done;)r[i--]=u.value,u=a.next()}}function Wc(e,t){const r=Uo(e).values();let n=r.next();for(;!n.done;){const s=Wc(n.value,t);if(s!==void 0)return s;n=r.next()}const o=t(e);if(o!==void 0)return o}function Kc(e,t,r){let n=e.get(r);return n||(n=Y(()=>cp(r,t,o=>Kc(e,t,o))),e.set(r,n)),n.get()}function up(e){const t=new WeakMap;return{walk:r=>Kc(t,e,r)}}function cp(e,t,r){let n;const o=t(e),s=Uo(e),i=s.values();let a=i.next();if(o===void 0&&s.size===1)return r(a.value);for(;!a.done;){const u=r(a.value);if(u){n||(n=new Map);const l=u.keys();let c=l.next();for(;!c.done;){const f=c.value,d=u.get(f);n.set(f,d),c=l.next()}}a=i.next()}return o!==void 0&&(n||(n=new Map),n.set(o,e)),n}const zs=new WeakMap,Fs=new WeakSet,Zc=A("attachToRootStore",(e,t)=>{const r=[];qc(t,o=>{Fs.has(o)||(Fs.add(o),o instanceof Pr&&o.onAttachedToRootStore&&(Zs(o,"onAttachedToRootStore",Sr.OnAttachedToRootStore),r.push(o)))},yi.ParentFirst);const n=r.length;for(let o=0;o<n;o++){const s=r[o],i=s.onAttachedToRootStore(e);i&&zs.set(s,i)}}),Jc=A("detachFromRootStore",e=>{const t=[];qc(e,n=>{if(!Fs.delete(n))return;const o=zs.get(n);if(o){const s=fr({nameOrNameFn:Sr.OnAttachedToRootStoreDisposer,fn:o,actionType:Ut.Sync}).bind(n);zs.delete(n),t.push(s)}},yi.ChildrenFirst);const r=t.length;for(let n=0;n<r;n++)t[n]()}),Hc=new WeakMap;function lp(){return{atom:void 0,is:!1}}const mi=e=>Qe(Hc,e,lp),zv=A("registerRootStore",e=>{var t;fe(e,"node");const r=mi(e);if(r.is)throw y("object already registered as root store");if(!G0(e))throw y("a root store must not have a parent");return r.is=!0,Zc(e,e),(t=r.atom)==null||t.reportChanged(),e}),Fv=A("unregisterRootStore",e=>{var t;if(!fp(e))throw y("not a root store");const r=mi(e);r.is=!1,Jc(e),(t=r.atom)==null||t.reportChanged()});function fp(e){fe(e,"node");const t=mi(e);return t.atom||(t.atom=jt("rootStore")),t.atom.reportObserved(),t.is}function ds(e){var t;return!!((t=Hc.get(e))!=null&&t.is)}class Ge{constructor(t,r,n,o){M(this,"message"),this.path=t,this.expectedTypeName=r,this.actualValue=n,this.typeCheckedValue=o;let s=[];this.typeCheckedValue&&At(this.typeCheckedValue,!0)&&(s=F0(this.typeCheckedValue,!1).path);const i=At(this.actualValue,!0)?we(this.actualValue):this.actualValue;this.message=`TypeCheckError: [/${[...s,...this.path].join("/")}] Expected a value of type <${this.expectedTypeName}> but got the value <${JSON.stringify(i)}> instead`}throw(){throw y(this.message)}}const dp=[],Gs=new WeakMap;var ke=(e=>(e.Object="object",e.Array="array",e.Primitive="primitive",e.Any="any",e))(ke||{});function hp(e){return xe(e)?"array":Fe(e)?"object":ce(e)?"primitive":"any"}function pp(e){let t=e;for(;t;){const r=Gs.get(t);r&&(Gs.delete(t),r.forEach(n=>{n.invalidateCachedResult(t)})),t=z0(t,!1)}}const Us=new WeakMap;function gp(e){const t=Us.get(e);t&&(t.forEach(r=>{r.invalidateSnapshotProcessorCachedResult(e)}),Us.delete(e))}class Oe{constructor(t,r,n,o,s,i,a){M(this,"checkResultCache"),M(this,"unchecked"),M(this,"_cachedTypeInfoGen"),M(this,"fromSnapshotProcessor",u=>this._fromSnapshotProcessor(u)),M(this,"_toSnapshotProcessorCache",new WeakMap),M(this,"toSnapshotProcessor",u=>{if(typeof u!="object"||u===null)return this._toSnapshotProcessor(u);if(this._toSnapshotProcessorCache.has(u))return this._toSnapshotProcessorCache.get(u);const l=this._toSnapshotProcessor(u);return this._toSnapshotProcessorCache.set(u,l),Qe(Us,u,()=>new Set).add(this),l}),this.baseType=t,this._check=r,this.getTypeName=n,this.typeInfoGen=o,this.snapshotType=s,this._fromSnapshotProcessor=i,this._toSnapshotProcessor=a,this.unchecked=!r,this._cachedTypeInfoGen=Tt(o)}createCacheIfNeeded(){return this.checkResultCache||(this.checkResultCache=new WeakMap),this.checkResultCache}setCachedResult(t,r){this.createCacheIfNeeded().set(t,r),Qe(Gs,t,()=>new Set).add(this)}invalidateCachedResult(t){var r;(r=this.checkResultCache)==null||r.delete(t)}getCachedResult(t){var r;return(r=this.checkResultCache)==null?void 0:r.get(t)}check(t,r,n){if(this.unchecked)return null;if(!At(t,!0))return this._check(t,r,n);let o=this.getCachedResult(t);return o===void 0&&(o=this._check(t,dp,void 0),this.setCachedResult(t,o)),o?new Ge([...r,...o.path],o.expectedTypeName,o.actualValue,n):null}get typeInfo(){return this._cachedTypeInfoGen(this)}invalidateSnapshotProcessorCachedResult(t){this._toSnapshotProcessorCache.delete(t)}}const Xc=Symbol("lateTypeCheker");function Pt(e,t){let r;const n=()=>r||(r=e(),r);n[Xc]=!0;const o=Tt(t);return Object.defineProperty(n,"typeInfo",{enumerable:!0,configurable:!1,get(){return o(n)}}),n}function wi(e){return typeof e=="function"&&Xc in e}class Ue{constructor(t){this.thisType=t}}const xi=new WeakMap,Xt=new WeakMap;function qe(e){return xi.get(e)}function bp(e,t){if(!(t&&e))return;const r=qe(t.parent);if(r)return{parentSnapshot:r,parentPath:t}}const vp=A("unsetInternalSnapshot",e=>{var t;const r=qe(e);r&&(xi.delete(e),(t=r.atom)==null||t.reportChanged())}),Oi=A("setNewInternalSnapshot",(e,t,r,n=!1)=>{var o;const s=r?r(t):t,i={untransformed:t,transformFn:r,transformed:s,atom:void 0};Xt.set(t,n),s!==void 0&&s!==t&&Xt.set(s,n),xi.set(e,i),(o=i.atom)==null||o.reportChanged()}),Si=A("updateInternalSnapshot",(e,t)=>{var r;const n=qe(e);let o=n.untransformed;Xt.get(o)?Array.isArray(o)?o=o.slice():o=Object.assign({},o):gp(o),t(o),n.untransformed=o,n.transformed=n.transformFn?n.transformFn(o):o,Xt.set(n.untransformed,!1),n.transformed!==void 0&&Xt.set(n.transformed,!1),(r=n.atom)==null||r.reportChanged();const i=bp(n,dt(e,!1));if(i){const{parentSnapshot:a,parentPath:u}=i;if(a){const l=u.path;Si(u.parent,c=>{c[l]=n.transformed})}}});function _p(e){e.atom||(e.atom=jt("snapshot")),e.atom.reportObserved()}function Ce(e){if(ce(e))return e;const t=Xt.get(e);if(t===void 0||t)return e;if(Array.isArray(e))for(let r=0;r<e.length;r++)Ce(e[r]);else{const r=Object.keys(e);for(let n=0;n<r.length;n++)Ce(e[r[n]])}return Xt.set(e,!0),e}const Dn=[];class Yc{constructor(){M(this,"patches",Dn),M(this,"invPatches",Dn)}reset(){this.patches=Dn,this.invPatches=Dn}record(t,r){this.patches=t,this.invPatches=r}emit(t){Qc(t,this.patches,this.invPatches),this.reset()}}function Qc(e,t,r){(t.length>0||r.length>0)&&(mp(e,t,r),wp(e,t,r))}const yp=new WeakMap,La=[];function mp(e,t,r){for(let n=0;n<La.length;n++){const o=La[n];o(e,t,r)}}function Va(e,t,r,n){const o=yp.get(e);if(!o||o.length===0)return;const s=u=>n.length>0?u.map(l=>xp(l,n)):u,i=s(t),a=s(r);for(let u=0;u<o.length;u++){const l=o[u];l(i,a)}}function wp(e,t,r){const n=[];Va(e,t,r,n);let o=dt(e,!1);for(;o;)n.unshift(o.path),Va(o.parent,t,r,n),o=dt(o.parent,!1)}function xp(e,t){return{...e,path:[...t,...e.path]}}const Ba=e=>{if(ce(e))return e;const t=qe(e);return t?Ce(t.transformed):e};function pr(e,t,r){return r===void 0?{op:"remove",path:e}:t===void 0?{op:"add",path:e,value:Ba(r)}:{op:"replace",path:e,value:Ba(r)}}function ue(e,t,r){(e[t]!==r||!(t in e))&&Rt(e,t,r)}function Op(e,t,r){return e[t]!==r||!(t in e)?(Rt(e,t,r),!0):!1}var Pn=(e=>(e[e.Model=0]="Model",e[e.Array=1]="Array",e[e.PlainObject=2]="PlainObject",e[e.Frozen=3]="Frozen",e))(Pn||{});function Sp(e,t,r=0){const n=Ap(e,t,r);return n?n.parent:void 0}function Ap(e,t,r=0){fe(e,"child");const n=[];let o=e,s=0,i;for(;i=dt(o,!0);){if(n.unshift(i.path),o=i.parent,t(o))return{parent:o,path:n};if(s++,r>0&&s===r)break}}let Kn=!0;function Ai(e){const t=Kn;Kn=!1;try{e()}finally{Kn=t}}function Pp(){return Kn}var Et=(e=>(e[e.Array=0]="Array",e[e.Frozen=1]="Frozen",e[e.Model=2]="Model",e[e.PlainObject=3]="PlainObject",e))(Et||{});function Cp(e,t,r){if(!xe(e))return Yt(t);const n=we(e);return Ai(()=>{e.length>t.length&&e.splice(t.length,e.length-t.length);for(let o=0;o<e.length;o++){const s=e[o],i=bt(s,t[o],r,e);bo(i,s,r),ue(e,o,i)}for(let o=e.length;o<t.length;o++){const s=bt(void 0,t[o],r,e);bo(s,void 0,r),e.push(s)}}),Cn(e,void 0,n),e}function jp(){qo(Et.Array,(e,t,r)=>{if(xe(t))return Cp(e,t,r)})}const el="$frozen";class Pi{constructor(t,r="devModeOnly"){M(this,"data"),lt(t)&&(t=io(t));const n=r==="on"||Ec;n&&Zn(t),this.data=t,n&&Object.freeze(this.data),ze(this,void 0)}}function tl(e,t="devModeOnly"){return new Pi(e,t)}function Zn(e){if(!ce(e)){if(Array.isArray(e)){const t=e.length;for(let r=0;r<t;r++){const n=e[r];if(n===void 0&&!Go().allowUndefinedArrayElements)throw y("undefined is not supported inside arrays since it is not serializable in JSON, consider using null instead");Zn(n)}Object.freeze(e);return}if(ut(e)){const t=Object.keys(e),r=t.length;for(let n=0;n<r;n++){const o=t[n],s=e[o];Zn(o),Zn(s)}Object.freeze(e);return}throw y(`frozen data must be plainly serializable to JSON, but ${e} is not`)}}function Ci(e){return ut(e)&&el in e}function Rp(e,t){return e instanceof Pi&&e.data===t.data?e:tl(t.data)}function Tp(){qo(Et.Frozen,(e,t)=>{if(Ci(t))return Rp(e,t)})}function Ep(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hs,za;function Mp(){return za||(za=1,hs=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(o of t.entries())if(!r.has(o[0]))return!1;for(o of t.entries())if(!e(o[1],r.get(o[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(o of t.entries())if(!r.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(t[o]!==r[o])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[o]))return!1;for(o=n;o--!==0;){var i=s[o];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}),hs}var Ip=Mp();const $p=Ep(Ip);function rl(e,t){return e+" "+t}class nl{constructor(t){M(this,"pool");var r;t=(r=$r.get(t))!=null?r:t,this.pool=kp(ep(t))}findModelByTypeAndId(t,r){return r?this.pool.get(rl(t,r)):void 0}findModelForSnapshot(t){if(!Ho(t))return;const r=t[G],n=On(r),o=ir(n.class);return o?this.findModelByTypeAndId(r,t[o]):void 0}}const kp=zc({initData(){return new Map},addNode(e,t){if(ge(e)){const r=e[Me];r&&t.set(rl(e[G],r),e)}}});function Fa(e,t){fe(e,"node"),Ir(t,"snapshot"),Dp().call(e,t)}function ol(e){const t=this,r=()=>{const n=new nl(t);bt(t,e,n,void 0)};if(xe(e)){if(!xe(t))throw y("if the snapshot is an array the target must be an array too");r();return}if(Ci(e))throw y("applySnapshot cannot be used over frozen objects");if(ut(e)&&e[G]===void 0&&ge(t)){const n=Ie.get(t.constructor);e={...e,[G]:n.name}}if(Ho(e)){const n=e[G],o=On(n);if(!o)throw y(`model with name "${n}" not found in the registry`);if(!ge(t))throw y("the target for a model snapshot must be a model instance");if(t[G]!==n)throw y(`snapshot model type '${n}' does not match target model type '${t[G]}'`);const s=ir(o.class);if(s){const i=e[s];if(t[Me]!==i)throw y(`snapshot model id '${i}' does not match target model id '${t[Me]}'`)}r();return}if(ut(e)){if(!(ut(t)||Q(t)))throw y("if the snapshot is an object the target must be an object too");r();return}throw zo(e)?y("a snapshot must not contain maps"):Fo(e)?y("a snapshot must not contain sets"):y(`unsupported snapshot - ${e}`)}const Dp=Tt(()=>fr({nameOrNameFn:wn.ApplySnapshot,fn:ol,actionType:Ut.Sync}));function qs(e,t){return e===t?!0:(Ds(e)?e=we(e):lt(e)&&(e=io(e)),Ds(t)?t=we(t):lt(t)&&(t=io(t)),$p(e,t))}function Np(e,t,r,n){const o=t[G],s=On(o);if(!s)throw y(`model with name "${o}" not found in the registry`);const i=r.findModelForSnapshot(t);if(i&&(e=i),!ge(e)||e[G]!==o)return Yt(t);const a=s.class,u=Sn(a),l=ir(a);if(l){const d=t[l];if(e[Me]!==d)return Yt(t)}else if(xe(n)&&!qs(e,t))return Yt(t);const c=e,f=we(c);return Ai(()=>{const d=c.constructor,p=d.fromSnapshotProcessor?d.fromSnapshotProcessor(t):t,h=c.$,_=Object.keys(h),m=_.length;for(let b=0;b<m;b++){const w=_[b];if(!(w in p)){const S=u[w],j=S?an(S):ae;j===ae?Ot(h,w):ue(h,w,j)}}const O=Object.keys(p),v=O.length;for(let b=0;b<v;b++){const w=O[b];if(!Rc(w)){const S=p[w],j=h[w];let k=bt(j,S,r,c);if(k==null){const Z=u[w],P=Z?an(Z):ae;P!==ae&&(k=P)}bo(k,j,r),ue(h,w,k)}}}),Cn(c,void 0,f),c}function Lp(){qo(Et.Model,(e,t,r,n)=>{if(Ho(t))return Np(e,t,r,n)})}function Vp(e,t,r){if(!(ut(e)||Q(e)))return Yt(t);const n=e,o=we(n);return Ai(()=>{const s=Object.keys(n),i=s.length;for(let l=0;l<i;l++){const c=s[l];c in t||Ot(n,c)}const a=Object.keys(t),u=a.length;for(let l=0;l<u;l++){const c=a[l],f=t[c],d=n[c],p=bt(d,f,r,n);bo(p,d,r),ue(n,c,p)}}),Cn(n,void 0,o),n}function Bp(){qo(Et.PlainObject,(e,t,r)=>{if(ut(t))return Vp(e,t,r)})}let Ga=!1;function zp(){Ga||(Ga=!0,jp(),Tp(),Lp(),Bp())}const go=[];function qo(e,t){go.push({priority:e,reconciler:t}),go.sort((r,n)=>r.priority-n.priority)}function bt(e,t,r,n){if(ce(t))return t;if(we(e)===t)return e;zp();const o=go.length;for(let s=0;s<o;s++){const{reconciler:i}=go[s],a=i(e,t,r,n);if(a!==void 0)return a}throw zo(t)?y("a snapshot must not contain maps"):Fo(t)?y("a snapshot must not contain sets"):y(`unsupported snapshot - ${t}`)}function bo(e,t,r){if(e!==t&&ge(e)&&r.findModelByTypeAndId(e[G],e[Me])){const n=_l(e,!1);n&&Rt(n.parent,n.path,null)}}function vo(e,t,r=!1){fe(e,"node"),!(t.length<=0)&&Fp().call(e,t,r)}function sl(e,t=!1){const r=this,n=new nl(r);if(t){let o=e.length;for(;o--;){const s=e[o];if(xe(s)){let i=s.length;for(;i--;)Nn(r,s[i],n)}else Nn(r,s,n)}}else{const o=e.length;for(let s=0;s<o;s++){const i=e[s];if(xe(i)){const a=i.length;for(let u=0;u<a;u++)Nn(r,i[u],n)}else Nn(r,i,n)}}}const Fp=Tt(()=>fr({nameOrNameFn:wn.ApplyPatches,fn:sl,actionType:Ut.Sync}));function Nn(e,t,r){const{target:n,prop:o}=Gp(e,t.path);if(xe(n))switch(t.op){case"add":{const s=+o,i=bt(void 0,t.value,r,n);s<0?n.push(i):n.splice(s,0,i);break}case"remove":{const s=+o;n.splice(s,1);break}case"replace":{if(o==="length")n.length=t.value;else{const s=+o,i=bt(n[s],t.value,r,n);ue(n,s,i)}break}default:throw y(`unsupported patch operation: ${t.op}`)}else switch(t.op){case"add":{const s=bt(void 0,t.value,r,n);ue(n,o,s);break}case"remove":{Ot(n,o);break}case"replace":{const s=bt(n[o],t.value,r,n);ue(n,o,s);break}default:throw y(`unsupported patch operation: ${t.op}`)}}function Gp(e,t){let r=on(e);if(t.length===0)return{target:r};for(let n=0;n<=t.length-2;n++)r=on(r[t[n]]);return{target:r,prop:t[t.length-1]}}function Cn(e,t,r){if(Pp()&&(pp(e),An())){const n=Up(e);if(n){const o=n.typeCheck();o&&(Wh(()=>{t?sl.call(e,t.invPatches,!0):r&&ol.call(e,r)}),o.throw())}}}function Up(e){const t=Or(e);return e!==t&&(e=t,ge(e)&&sr(e).dataType)?e:Sp(e,r=>ge(r)&&!!sr(r).dataType)}function il(e,t,r){const n=e,o=n.length,s=be(n)?n:N.array(void 0,e0);s!==n&&(s.length=n.length);let i,a;const u=()=>{i(),a()};or.set(s,u),Ct(s,t,!1,!1,!1);const l=[];l.length=o;for(let c=0;c<o;c++){const f=n[c];if(ce(f))r||ue(s,c,f),l[c]=f;else{const d={parent:s,path:c};let p;r?(p=f,Ct(p,d,!1,!1,!1)):(p=ze(f,d),ue(s,c,p));const h=qe(p);l[c]=h.transformed}}return Oi(s,l,void 0),i=No(s,Hp.bind(void 0,s)),a=_n(s,Kp),s}function qp(e,t,r){r[e]=t}function Wp(e,t,r,n){n.splice(e,t,...r)}const rn=new Yc;function Kp(e){const t=e.object,r=qe(t).untransformed;rn.reset();let n;switch(e.type){case"splice":n=Jp(e,r);break;case"update":n=Zp(e,r);break}Cn(t,rn),!tn&&n&&(Si(t,n),rn.emit(t))}function Zp(e,t){const r=e.index,n=e.newValue,o=t[r];let s;ce(n)?s=n:s=qe(n).transformed;const i=qp.bind(void 0,r,s),a=[r];return rn.record([{op:"replace",path:a,value:Ce(s)}],[{op:"replace",path:a,value:Ce(o)}]),i}function Jp(e,t){const r=e.index,n=e.addedCount,o=e.removedCount,s=[];s.length=n;for(let c=0;c<n;c++){const f=e.added[c];ce(f)?s[c]=f:s[c]=qe(f).transformed}const i=t.length,a=Wp.bind(void 0,r,o,s),u=[],l=[];if(n===o){const c=[],f=[];let d=0;for(let p=0;p<n;p++){const h=r+p,_=Ua(t,h,r,o,s),m=t[h];if(_!==m){const O=[h-d];u.push({op:"remove",path:O}),l.push({op:"remove",path:O}),d++;const v=[h];c.push({op:"add",path:v,value:Ce(_)}),f.push({op:"add",path:v,value:Ce(m)})}}u.push(...c),l.push(...f),l.reverse()}else{const c=i-o;if(o>0){const f=r>=c;f&&u.push({op:"replace",path:["length"],value:c});for(let d=o-1;d>=0;d--){const p=r+d,h=[p];f||u.push({op:"remove",path:h}),l.push({op:"add",path:h,value:Ce(t[p])})}}if(n>0){const f=r>=c;f&&l.push({op:"replace",path:["length"],value:c});for(let d=0;d<n;d++){const p=r+d,h=[p];u.push({op:"add",path:h,value:Ce(Ua(t,p,r,o,s))}),f||l.push({op:"remove",path:h})}}}return rn.record(u,l),a}function Hp(e,t){switch(Gc(),t.type){case"splice":Yp(t);break;case"update":Xp(t,e);break}return t}function Xp(e,t){const r=t[e.index];ze(r,void 0),e.newValue=ze(e.newValue,{parent:t,path:e.index})}function Yp(e){for(let n=0;n<e.removedCount;n++){const o=e.object[e.index+n];ze(o,void 0)}for(let n=0;n<e.added.length;n++)e.added[n]=ze(e.added[n],{parent:e.object,path:e.index+n});const t=e.index+e.removedCount,r=e.index+e.added.length;if(t!==r)for(let n=t,o=r;n<e.object.length;n++,o++)Ct(e.object[n],{parent:e.object,path:o},!0,!1,!1)}function Qp(){Zo(Pn.Array,(e,t)=>{if(xe(e))return il(e,t,!1)})}const e0={deep:!1};function Ua(e,t,r,n,o){const s=t-r;return s<0?e[t]:s<o.length?o[s]:e[t-o.length+n]}function t0(e,t){const r=N.array([],Ri),n=e.length;for(let o=0;o<n;o++)r.push(Ko(e[o],t));return il(r,void 0,!0)}function r0(){Wo(Et.Array,(e,t)=>{if(xe(e))return t0(e,t)})}function n0(){Wo(Et.Frozen,e=>{if(Ci(e))return tl(e.data)})}function o0(e,t){const r=e[G];if(!r)throw y(`a model snapshot must contain a type key (${G}), but none was found`);const n=On(r);if(!n)throw y(`model with name "${r}" not found in the registry`);const o=ir(n.class);if(o&&e[o]===void 0)throw y(`a model snapshot of type '${r}' must contain an id key (${o}), but none was found`);return new n.class(void 0,{snapshotInitialData:{unprocessedSnapshot:e,unprocessedModelType:typeof t.untypedSnapshot=="object"&&t.untypedSnapshot&&G in t.untypedSnapshot?t.untypedSnapshot[G]:void 0,snapshotToInitialData:t.snapshotToInitialData},generateNewIds:t.options.generateNewIds})}function s0(){Wo(Et.Model,(e,t)=>{if(Ho(e))return o0(e,t)})}function ji(e,t,r,n,o){const s=e,i=Q(s)?s:N.object({},void 0,i0);let a,u;const l=()=>{a(),u()};or.set(i,l),Ct(i,t,!1,o,!1);const c={},f=Object.keys(s),d=f.length;for(let h=0;h<d;h++){const _=f[h],m=s[_];if(ce(m))n||ue(i,_,m),c[_]=m;else{const O={parent:i,path:_};let v;n?(v=m,Ct(v,O,!1,!1,!1)):(v=ze(m,O),ue(i,_,v));const b=qe(v);c[_]=b.transformed}}let p;if(r){c[G]=r;const h=On(r);if(!h)throw y(`model with name "${r}" not found in the registry`);const _=h.class.toSnapshotProcessor;_&&(p=m=>_(m,Or(i)))}return Oi(o?Or(i):i,c,p),a=No(i,d0),u=_n(i,c0),i}const i0={deep:!1};function a0(e,t,r){r[e]=t}function u0(e,t){delete t[e]}const yr=new Yc;function c0(e){const t=e.object,r=Or(t),n=qe(r).untransformed;yr.reset();let o;switch(e.type){case"add":case"update":o=f0(e,n);break;case"remove":o=l0(e,n);break;default:throw y("assertion error: unsupported object change type")}Cn(t,yr),tn||(Si(r,o),yr.emit(r))}function l0(e,t){const r=e.name,n=t[r],o=u0.bind(void 0,r),s=[r];return yr.record([{op:"remove",path:s}],[{op:"add",path:s,value:Ce(n)}]),o}function f0(e,t){const r=e.name,n=e.newValue,o=t[r];let s;ce(n)?s=n:s=qe(n).transformed;const i=a0.bind(void 0,r,s),a=[r];return e.type==="add"?yr.record([{op:"add",path:a,value:Ce(s)}],[{op:"remove",path:a}]):yr.record([{op:"replace",path:a,value:Ce(s)}],[{op:"replace",path:a,value:Ce(o)}]),i}function d0(e){if(Gc(),typeof e.name=="symbol")throw y("symbol properties are not supported");switch(e.type){case"add":e.newValue=ze(e.newValue,{parent:e.object,path:String(e.name)});break;case"remove":{ze(e.object[e.name],void 0);break}case"update":{const t=e.object[e.name],r=e.newValue;r!==t&&(ze(t,void 0),e.newValue=ze(r,{parent:e.object,path:String(e.name)}));break}default:throw y("assertion error: unsupported object change type")}return e}function h0(){Zo(Pn.PlainObject,(e,t)=>{if(Q(e)||ut(e))return ji(e,t,void 0,!1,!1)})}function p0(e,t){const r=N.object({},void 0,Ri),n=Object.keys(e),o=n.length;for(let s=0;s<o;s++){const i=n[s],a=e[i];Rt(r,i,Ko(a,t))}return ji(r,void 0,void 0,!0,!1)}function g0(){Wo(Et.PlainObject,(e,t)=>{if(ut(e))return p0(e,t)})}let qa=!1;function b0(){qa||(qa=!0,r0(),n0(),s0(),g0())}const _o=[];function Wo(e,t){_o.push({priority:e,snapshotter:t}),_o.sort((r,n)=>r.priority-n.priority)}function Yt(e,t,r){let n,o,s;if(wi(e)||e instanceof Oe||jn(e)){const i=he(e);o=t,n=i.fromSnapshotProcessor(o),s=r}else n=e,o=n,s=t;return v0(n,o,s)}const v0=A("fromSnapshot",(e,t,r)=>{const o={options:{generateNewIds:!1,overrideRootModelId:void 0,...r},untypedSnapshot:t};return o.snapshotToInitialData=_0.bind(void 0,o),Ko(e,o)});function Ko(e,t){if(ce(e))return e;b0();const r=_o.length;for(let n=0;n<r;n++){const{snapshotter:o}=_o[n],s=o(e,t);if(s!==void 0)return s}throw zo(e)?y("a snapshot must not contain maps"):Fo(e)?y("a snapshot must not contain sets"):y(`unsupported snapshot - ${e}`)}function _0(e,t){const r=N.object({},void 0,Ri),n=Object.keys(t),o=n.length;for(let s=0;s<o;s++){const i=n[s];if(!Rc(i)){const a=t[i];Rt(r,i,Ko(a,e))}}return r}const Ri={deep:!1};function y0(e,t){fe(e,"node");const r={generateNewIds:!0,...t},n=we(e);return Yt(n,r)}const Ct=A("setParent",(e,t,r,n,o)=>{if(ce(e))return e;let s=dt(e,!1);if(Fh(s,t))return e;if(ds(e))throw y("root stores cannot be attached to any parents");if(n)return $r.set(e,t.parent),e;if(t){const c=Or(t.parent);t.parent!==c&&(t={parent:c,path:t.path})}if(o&&t?.parent&&s?.parent&&ge(e)&&sr(e).valueType&&(e=y0(e,{generateNewIds:!0}),s=dt(e,!1)),s&&t){if(s.parent===t.parent&&r)return ks.set(e,t),Ma(e),e;throw y("an object cannot be assigned a new parent when it already has one")}const i=t?void 0:P0(e),a=e instanceof Pr;let u,l;if(a&&(u=mo(e,!1),l=ds(u)?u:void 0),s?.parent&&rp(s.parent,e),ks.set(e,t),t?.parent&&tp(t.parent,e),Ma(e),a){const c=mo(e,!1),f=ds(c)?c:void 0;l!==f&&(l||f)&&op(()=>{l&&Jc(e),f&&Zc(f,e)})}return i?.(),e});function Ti(e,t){const r=he(e);return r.unchecked?null:r.check(t,[],t)}function m0(e,t){return or.set(e,void 0),Ct(e,t,!1,!1,!1),Oi(e,{[el]:!0,data:e.data},void 0,!0),e}function w0(){Zo(Pn.Frozen,(e,t)=>{if(e instanceof Pi)return m0(e,t)})}function al(e,t){return or.set(e,void 0),Ct(e,t,!1,!1,!0),e}function x0(){Zo(Pn.Model,(e,t)=>{if(ge(e))return al(e,t)})}let Wa=!1;function O0(){Wa||(Wa=!0,Qp(),w0(),x0(),h0())}function S0(e,t){let r,n,o;if(arguments.length===1?(o=!1,r=e):(n=e,o=!0,r=t),!Fe(r))throw y("only objects can be turned into tree nodes");if(o&&An()){const s=Ti(n,r);s&&s.throw()}return At(r,!0)?r:ze(r,void 0)}const yo=[];function Zo(e,t){yo.push({priority:e,tweaker:t}),yo.sort((r,n)=>r.priority-n.priority)}function A0(e,t){if(ce(e))return e;if(At(e,!0))return e=Ct(e,t,!1,!1,!0),e;if(Ei(e))throw y("data models are not directly supported. you may insert the data in the tree instead ('$' property).");O0();const r=yo.length;for(let n=0;n<r;n++){const{tweaker:o}=yo[n],s=o(e,t);if(s!==void 0)return s}throw zo(e)?y("maps are not directly supported. consider using 'ObjectMap' / 'asMap' instead."):Fo(e)?y("sets are not directly supported. consider using 'ArraySet' / 'asSet' instead."):y(`tweak can only work over models, observable objects/arrays, or primitives, but got ${e} instead`)}const ze=A("tweak",A0);function P0(e){if(ce(e))return;const t=or.get(e);if(!t)return;const r=Array.from(Uo(e).values());for(let n=0;n<r.length;n++)Ct(r[n],void 0,!1,!1,!1);return()=>{t(),or.delete(e),vp(e)}}const Ws=Symbol("modelInitializers");function C0(e){return e[Ws]}function ul(e,t){const r=C0(e);if(r){const n=r.length;for(let o=0;o<n;o++)r[o](t)}}const j0=A("newModel",(e,t,r)=>{const{modelClass:n}=r,o=n,s=e;if(!Ie.get(o))throw y(`no model info for class ${o.name} could be found - did you forget to add the @model decorator?`);if(s.$=t,ul(o,s),An()&&cl(o).dataType){const a=s.typeCheck();a&&a.throw()}return s}),R0=new WeakMap;Pc=ho;class Ks{constructor(t){if(M(this,Pc),M(this,"$"),!Fe(t))throw y("data models can only work over data objects");const{modelClass:r}=arguments[1],n=r;let o;if(Ds(t))o=t;else{if(!Ie.get(n))throw y(`no model info for class ${n.name} could be found - did you forget to add the @model decorator?`);const l=Sn(n),c=Object.assign({},t),f=Object.keys(l);for(let d=0;d<f.length;d++){const p=f[d],h=l[p];let _=c[p],m=!1;h._transform&&(m=!0,_=h._transform.untransform(_,this,p)),_==null&&(h._defaultFn!==ae?(m=!0,_=h._defaultFn()):h._defaultValue!==ae&&(m=!0,_=h._defaultValue)),m&&(c[p]=_)}o=S0(c)}const s=Qe(R0,n,()=>new WeakMap),i=s.get(o);if(i)return i;s.set(o,this),Object.setPrototypeOf(this,n.prototype);const a=this;delete a[ho],j0(this,o,{modelClass:n})}typeCheck(){const t=Mi(this.constructor);return Ti(t,this.$)}toString(t){const r={withData:!0,...t},n=Ie.get(this.constructor),o=`${this.constructor.name}#${n.name}`;return r.withData?`[${o} ${JSON.stringify(we(this))}]`:`[${o}]`}}function Ei(e){return e instanceof Ks}function Ar(e){return!(typeof e!="function"||e!==Ks&&!(e.prototype instanceof Ks))}function cl(e){if(Ei(e))return e.constructor[sn];if(Ar(e))return e[sn];throw y("modelClassOrInstance must be a model class or instance")}function cr(e){const r=lr(e).typeInfo;if(!r)throw y(`type info not found for ${e}`);return r}const Ka=new WeakMap;function Mi(e){if(!Ar(e)&&typeof e=="function"){const t=e;return Pt(()=>Mi(t()),n=>new Za(n,t()))}else{const t=e,r=Ka.get(t);if(r)return r;const n=s=>new Za(s,t),o=Pt(()=>{const s=Ie.get(t),i=`DataModelData(${s.name})`,a=cl(t).dataType;if(!a)throw y(`type checking cannot be performed over data model data of type '${s.name}' since that model type has no data type declared, consider adding a data type or using types.unchecked() instead`);const u=he(a),l=new Oe(ke.Object,(c,f,d)=>u.check(c,f,d),()=>i,n,c=>u.snapshotType(c)?l:null,c=>u.fromSnapshotProcessor(c),c=>u.toSnapshotProcessor(c));return l},n);return Ka.set(t,o),o}}class Za extends Ue{constructor(t,r){super(t),M(this,"_props",Tt(()=>{const n=Sn(this.modelClass),o={};return Object.keys(n).forEach(s=>{const i=n[s],a=i._typeChecker;let u;a&&(u=cr(a));let l=!1,c;i._defaultFn!==ae?(c=i._defaultFn,l=!0):i._defaultValue!==ae&&(c=i._defaultValue,l=!0),o[s]={type:a,typeInfo:u,hasDefault:l,default:c}}),o})),this.modelClass=r}get props(){return this._props()}get modelType(){return Ie.get(this.modelClass).name}}function T0(){ki(e=>Ar(e)?Mi(e):void 0)}const Ja=new WeakMap;function Ii(e){if(!jn(e)&&typeof e=="function"){const t=e;return Pt(()=>Ii(t()),n=>new Ha(n,t()))}else{const t=e,r=Ja.get(t);if(r)return r;const n=s=>new Ha(s,t),o=Pt(()=>{const s=Ie.get(t),i=`Model(${s.name})`,a=sr(t).dataType,u=a?he(a):void 0,l=new Oe(ke.Object,(c,f,d)=>c instanceof t?u?u.check(c.$,f,d):null:new Ge(f,i,c,d),()=>i,n,c=>Fe(c)?c[G]!==void 0?c[G]===s.name?l:null:u&&u.snapshotType(c)?l:null:null,c=>c[G]?c:{...c,[G]:s.name},c=>c);return l},n);return Ja.set(t,o),o}}class Ha extends Ue{constructor(t,r){super(t),M(this,"_props",Tt(()=>{const n=Sn(this.modelClass),o={};return Object.keys(n).forEach(s=>{const i=n[s],a=i._typeChecker;let u;a&&(u=cr(a));let l=!1,c;i._defaultFn!==ae?(c=i._defaultFn,l=!0):i._defaultValue!==ae&&(c=i._defaultValue,l=!0),o[s]={type:a,typeInfo:u,hasDefault:l,default:c}}),o})),this.modelClass=r}get props(){return this._props()}get modelType(){return Ie.get(this.modelClass).name}}function E0(){ki(e=>jn(e)?Ii(e):void 0)}const Dr=[];function ll(e){Vh(e,"literal");let t;switch(e){case void 0:t="undefined";break;case null:t="null";break;default:t=JSON.stringify(e);break}const r=o=>new M0(o,e),n=new Oe(ke.Primitive,(o,s,i)=>o===e?null:new Ge(s,t,o,i),()=>t,r,o=>o===e?n:null,Ye,Ye);return n}class M0 extends Ue{constructor(t,r){super(t),this.literal=r}}const fl=ll(void 0);Dr.push(e=>e===void 0?fl:void 0);const dl=ll(null);Dr.push(e=>e===null?dl:void 0);const $i=new Oe(ke.Primitive,(e,t,r)=>typeof e=="boolean"?null:new Ge(t,"boolean",e,r),()=>"boolean",e=>new I0(e),e=>typeof e=="boolean"?$i:null,Ye,Ye);Dr.push(e=>e===Boolean?$i:void 0);class I0 extends Ue{}const Jo=new Oe(ke.Primitive,(e,t,r)=>typeof e=="number"?null:new Ge(t,"number",e,r),()=>"number",e=>new $0(e),e=>typeof e=="number"?Jo:null,Ye,Ye);Dr.push(e=>e===Number?Jo:void 0);class $0 extends Ue{}const Nr=new Oe(ke.Primitive,(e,t,r)=>typeof e=="string"?null:new Ge(t,"string",e,r),()=>"string",e=>new k0(e),e=>typeof e=="string"?Nr:null,Ye,Ye);Dr.push(e=>e===String?Nr:void 0);class k0 extends Ue{}function D0(){Dr.forEach(e=>{ki(e)})}let Xa=!1;function N0(){Xa||(Xa=!0,E0(),T0(),D0())}const hl=[];function ki(e){hl.push(e)}function pl(e){N0();for(const t of hl){const r=t(e);if(r)return r}}function he(e){let t=e;for(;;){if(t instanceof Oe)return t;if(wi(t))t=t();else{const r=pl(e);if(r)return he(r);throw y("type checker could not be resolved")}}}function gl(e){if(e instanceof Oe||wi(e))return e;{const t=pl(e);return t||void 0}}function lr(e){const t=gl(e);if(t)return t;throw y("standard type could not be resolved")}function we(e,t){let r=Ye,n;if(arguments.length>=2?(r=he(e).toSnapshotProcessor,n=t):n=e,ce(n))return r(n);fe(n,"nodeOrPrimitive");const o=qe(n);if(!o)throw y("getSnapshot is not supported for this kind of object");return Ce(o.transformed),_p(o),r(o.transformed)}const L0=A("newModel",(e,t,r)=>{const{modelInfo:n,modelIdPropertyName:o,modelProps:s,modelIdPropData:i}=bl(r);if(o&&i){let l;t[o]?l=t[o]:l=i._defaultFn(),ue(t,o,l)}const a=e;a[G]=n.name;const u=Object.keys(s);for(let l=0;l<u.length;l++){const c=u[l];if(c===o)continue;const f=s[c];let p=t[c],h=!1;if(f._transform&&(h=!0,p=f._transform.untransform(p,a,c)),p==null){const _=an(f);_!==ae?(h=!0,p=_):c in t||(h=!0)}h&&Rt(t,c,p)}if(vl(a,t,r),An()&&sr(r).dataType){const l=a.typeCheck();l&&l.throw()}}),V0=A("fromSnapshotModel",(e,t,r,n)=>{const{modelInfo:o,modelIdPropertyName:s,modelProps:i,modelIdPropData:a}=bl(r);let u,l=t.unprocessedSnapshot;a&&s&&(n?u=a._defaultFn():u=l[s]),r.fromSnapshotProcessor&&(l=r.fromSnapshotProcessor(l));const c=t.snapshotToInitialData(l),f=e;f[G]=o.name;const d=[],p=[];if(s){const O=c[s];if(Op(c,s,u)){const b=[s];d.push(pr(b,O,u)),p.push(pr(b,u,O))}}const h=Object.keys(i);for(let O=0;O<h.length;O++){const v=h[O];if(v===s)continue;const b=i[v],w=c[v];let S=w,j=!1;if(S==null){const k=an(b);k!==ae?(j=!0,S=k):v in c||(j=!0)}if(j&&(Rt(c,v,S),S!==w)){const k=[v];d.push(pr(k,w,S)),p.push(pr(k,S,w))}}const _=t?.unprocessedModelType,m=o.name;if(_!==m){const O=[G];d.push(pr(O,_,m)),p.push(pr(O,m,_))}if(vl(f,c,r),Qc(f,d,p),An()&&sr(r).dataType){const O=f.typeCheck();O&&O.throw()}});function bl(e){const t=Ie.get(e);if(!t)throw y(`no model info for class ${e.name} could be found - did you forget to add the @model decorator?`);const r=ir(e),n=Sn(e),o=r?n[r]:void 0;return{modelInfo:t,modelIdPropertyName:r,modelProps:n,modelIdPropData:o}}function vl(e,t,r){al(e,void 0),e.$=ji(t,{parent:e,path:"$"},e[G],!1,!0),ul(r,e)}const Ya=Symbol("modelIdPropertyName");class Pr{constructor(t){M(this,Oa),M(this,xa),M(this,wa),M(this,ma),M(this,ya),M(this,"$");const r=t,{snapshotInitialData:n,modelClass:o,generateNewIds:s}=arguments[1];Object.setPrototypeOf(this,o.prototype);const i=this;delete i[ho],delete i[Ta],delete i[Ea],delete i[Ya],n?V0(this,n,o,!!s):(Ir(r,"initialData"),L0(this,N.object(r,void 0,{deep:!1}),o))}get[(Oa=ho,xa=Ta,wa=Ea,ma=Ya,ya=G,Me)](){const t=ir(this.constructor);return t?this.$[t]:void 0}set[Me](t){const r=ir(this.constructor);if(!r)throw y("$modelId cannot be set when there is no idProp set in the model");this.$[r]=t}getRefId(){return this[Me]}typeCheck(){const t=Ii(this.constructor);return Ti(t,this)}toString(t){const r={withData:!0,...t},n=`${this.constructor.name}#${this[G]}`;return r.withData?`[${n} ${JSON.stringify(we(this))}]`:`[${n}]`}}const B0=new Set([G,Me,"onInit","$","getRefId","onAttachedToRootStore","typeCheck"]);function ge(e){return e instanceof Pr}function jn(e){return!(typeof e!="function"||e!==Pr&&!(e.prototype instanceof Pr))}function Ho(e){return ut(e)&&G in e}function dt(e,t){return t&&Uh(e),ks.get(e)}function _l(e,t){const r=$r.get(e);if(r)return{parent:r,path:"$"};const n=dt(e,t);return n&&ge(n.parent)?{parent:n.parent.$,path:n.path}:n}function un(e,t){var r;return(r=dt(e,t))==null?void 0:r.parent}function z0(e,t){var r;return(r=_l(e,t))==null?void 0:r.parent}function F0(e,t){let r=e;const n=[],o=[e];let s;for(;s=dt(r,t);)r=s.parent,n.unshift(s.path),o.unshift(s.parent);return{root:r,path:n,pathObjects:o}}function mo(e,t){let r=e,n;for(;n=dt(r,t);)r=n.parent;return r}function G0(e){return fe(e,"value"),!un(e,!0)}const ps={resolved:!1};function gs(e,t){let r=e;const n=t.length;for(let o=0;o<n;o++){if(!Fe(r))return ps;const s=t[o];if(xe(r)&&+s>=r.length)return ps;if(ge(r)){const i=on(r);if(s in i)r=i;else if(!(s in r))return ps}r=r[s]}return{resolved:!0,value:r}}const yl=Symbol("skipIdChecking");function bs(e,t,r){var n;let o=on(e);const s=t.length;for(let i=0;i<s;i++){if(!Fe(o))return{resolved:!1};const a=t[i];if(xe(o)&&+a>=o.length)return{resolved:!1};const u=o[a];o=on(u);const l=r[i];if(l!==yl){const c=ge(u)&&(n=u[Me])!=null?n:null;if(l!==c)return{resolved:!1}}}return{resolved:!0,value:Or(o)}}const U0=new WeakMap;function q0(e){const t=[];let r=e;for(;r;){const n=U0.get(r);n&&n.length>0&&t.push(n),r=un(r,!1)}return t}function fr({nameOrNameFn:e,fn:t,actionType:r,overrideContext:n,isFlowFinisher:o=!1}){let s=!1;const i=function(...a){const u=typeof e=="function"?e():e;s||(s=!0,t=A(u,t));const l=Bo(),c={actionName:u,type:r,target:this,args:a,parentContext:l,data:{},rootContext:void 0};n&&n(c,this),c.rootContext||(c.previousAsyncStepContext?c.rootContext=c.previousAsyncStepContext.rootContext:c.parentContext?c.rootContext=c.parentContext.rootContext:c.rootContext=c),ja(c);const f=q0(c.target);let d=f.length-1,p=0;const h=()=>{const _=f[d];if(!_)return t.apply(this,a);const m=_[p];return p++,p>=_.length&&(p=0,d--),(m.filter?m.filter(c):!0)?m.middleware(c,h):h()};try{const _=h();if(o){const m=_,O=m.value;return m.resolution==="accept"?m.accepter(O):m.rejecter(O),O}else return _}finally{ja(c.parentContext),sp()}};return i[jc]=!0,i}function Zs(e,t,r){const n=e[t];if(pi(n))return;const o=fr({nameOrNameFn:r,fn:n,actionType:Ut.Sync}),s=Object.getPrototypeOf(e);s[t]===n?s[t]=o:e[t]=o}const vs=Symbol("unboundMethod"),Qa=(e,t)=>{const r=vs in e?e[vs]:e,n=r.bind(t);return Object.getOwnPropertySymbols(r).forEach(o=>{n[o]=r[o]}),n[vs]=r,n};function W0(e,t,r){if(typeof t[1]!="object"){const n=t[0],o=t[1],s=t[2],i=_s(n,o,!0),a=()=>{$c(n,Ic,u=>{const l=r(i,u[o]);u[o]=Qa(l,u)})};if(s){if(s.get!==void 0)throw y(`@${e} cannot be used with getters`);if(s.value)return{enumerable:!1,writable:!0,configurable:!0,value:r(i,s.value)};a()}else a()}else{const n=t[1];switch(n.kind){case"method":{const o=t[0],s=n.name;let i=!1;n.addInitializer(function(){if(i)return;i=!0;const a=this;let u=this,l=Object.getPrototypeOf(u);for(;l&&l[s]===o;)u=l,l=Object.getPrototypeOf(u);u[s]=r(_s(a,s,!1),u[s])});break}case"field":{const o=n.name;let s;return function(i){const a=this;s||(s=_s(a,o,!1));const u=r(s,i);return Qa(u,a)}}default:throw y(`@${e} can only be used on fields or methods}`)}}}const K0=(e,t)=>{e.target=t.$};function _s(e,t,r){if(Ar(e)||Ei(e)){const n=Ar(e)?e:e.constructor;let o;const s=i=>{const a=Ie.get(i);o=`fn::${a.name}::${t}`,Nh(o,a.class,t)};return r?$c(n,Ns,s):s(n),{actionName:()=>o,overrideContext:K0}}else return{actionName:t,overrideContext:void 0}}const Z0=Symbol("modelFlow");function J0(e){return typeof e=="function"&&Z0 in e}const eu=new Map;function H0(e,t,r){if(Mc(t,e),eu.has(e)&&kc("warn",`an standalone action with name "${e}" already exists (if you are using hot-reloading you may safely ignore this warning)`,`duplicateActionName - ${e}`),pi(t))throw y("the standalone action must not be previously marked as an action");if(J0(t))throw y("the standalone action must not be previously marked as a flow action");const n=fr({nameOrNameFn:e,fn:t,actionType:Ut.Sync}),o=(s,...i)=>(qh(s,"target"),n.call(s,s,...i));return eu.set(e,o),o}function ml(e,t,r){fe(e,"node",!0),Y0().call(e,t,r)}function X0(e,t){!ge(this)&&lt(this)?ue(this,e,t):this[e]=t}const Y0=Tt(()=>fr({nameOrNameFn:wn.ApplySet,fn:X0,actionType:Ut.Sync}));function We(...e){return W0("modelAction",e,(t,r)=>{if(pi(r))return r;if(typeof r!="function")throw y("modelAction has to be used over functions");return fr({nameOrNameFn:t.actionName,fn:r,actionType:Ut.Sync,overrideContext:t.overrideContext})})}function Q0(e,t){var r;const n=[];let o=e;for(let s=0;s<t.length;s++){o=o[t[s]];const i=ge(o)&&(r=o[Me])!=null?r:null;n.push(i)}return n}function eg(e,t,r){return Mc(e,"objFn"),Pt(()=>{const n=e();Ir(n,"objectSchema");const o=Object.entries(n),s=(...u)=>{const l=[];for(const[c,f]of o){const d=he(f);let p="...";u.includes(d)||(p=d.getTypeName(...u,d)),l.push(`${c}: ${p};`)}return`{ ${l.join(" ")} }`},i=(u,l)=>{const c={},f=Object.keys(u);for(let d=0;d<f.length;d++){const p=f[d],h=n[p];if(h){const _=he(h);c[p]=l==="from"?_.fromSnapshotProcessor(u[p]):_.toSnapshotProcessor(u[p])}else c[p]=u[p]}return c},a=new Oe(ke.Object,(u,l,c)=>{if(!Fe(u)||t)return new Ge(l,s(a),u,c);for(const[f,d]of o){const p=he(d),h=u[f],_=p.check(h,[...l,f],c);if(_)return _}return null},s,r,u=>{if(!Fe(u))return null;for(const[l,c]of o){const f=he(c),d=u[l];if(!f.snapshotType(d))return null}return a},u=>i(u,"from"),u=>i(u,"to"));return a},r)}function tg(e){return eg(e,!1,r=>new rg(r,e))}class rg extends Ue{constructor(t,r){super(t),M(this,"_props",Tt(()=>{const n=this._objTypeFn(),o={};return Object.keys(n).forEach(s=>{const i=lr(n[s]);o[s]={type:i,typeInfo:cr(i)}}),o})),this._objTypeFn=r}get props(){return this._props()}}const wl=new Oe(ke.Any,null,()=>"any",e=>new ng(e),()=>wl,Ye,Ye);function Cr(){return wl}class ng extends Ue{}function og(e,...t){const r=t.slice();let n;const o=gl(e);if(o)r.unshift(o);else{const i=e;n=a=>{const u=i(a);return he(u)}}if(r.length<=0)throw y("or type must have at least 1 possible type");const s=i=>new sg(i,r.map(lr));return Pt(()=>{const i=r.map(he);if(i.some(c=>c.unchecked))return Cr();const a=(...c)=>i.map(d=>c.includes(d)?"...":d.getTypeName(...c,d)).join(" | ");let u;i.some(c=>c.baseType!==i[0].baseType)?u=ke.Any:u=i[0].baseType;const l=new Oe(u,(c,f,d)=>i.some(h=>!h.check(c,f,d))?null:new Ge(f,a(l),c,d),a,s,c=>{const f=hp(c),d=i.filter(p=>p.baseType===f||p.baseType===ke.Any);if(d.length===1&&d[0].baseType===f)return d[0];for(let p=0;p<d.length;p++){const h=d[p].snapshotType(c);if(h)return h}return null},c=>{const f=n?n(c):l.snapshotType(c);if(!f)throw y(`snapshot '${JSON.stringify(c)}' does not match the following type: ${a(l)}`);return f.fromSnapshotProcessor(c)},c=>{const f=n?n(c):l.snapshotType(c);if(!f)throw y(`snapshot '${JSON.stringify(c)}' does not match the following type: ${a(l)}`);return f.toSnapshotProcessor(c)});return l},s)}class sg extends Ue{constructor(t,r){super(t),M(this,"_orTypeInfos",Tt(()=>this.orTypes.map(cr))),this.orTypes=r}get orTypeInfos(){return this._orTypeInfos()}}const ig=Symbol("noDefaultValue"),tu=new WeakMap;function ag(e,t,r){let n=tu.get(e);n||(n=new Map,tu.set(e,n));let o=n.get(t);return o||(o=r(),n.set(t,o)),o}function wt(e,t){switch(typeof e){case"string":return wt(Nr,e);case"number":return wt(Jo,e);case"boolean":return wt($i,e)}const r=arguments.length>=2,n=lr(e);return ag(n,r?t:ig,()=>{const o=r?og(n,fl,dl):n,s=Object.create(r?Ls(t):Ls());return Object.assign(s,{_typeChecker:n,_fromSnapshotProcessor:ug.bind(void 0,o),_toSnapshotProcessor:cg.bind(void 0,n)}),s})}function ug(e,t){const r=he(e).fromSnapshotProcessor;return r?r(t):t}function cg(e,t){const r=he(e).toSnapshotProcessor;return r?r(t):t}function ru(...e){const t=e.filter(n=>!!n);return t.length<=0?void 0:(n,...o)=>{let s=n;for(let i=0;i<t.length;i++)s=t[i](s,...o);return s}}function lg(e,t){var r;const n=(r=e._transform)==null?void 0:r.transform;if(!n)return function(){return this.$[t]};const o=(s,i)=>n(i,s,t,a=>{ml(s.$,t,a)});return function(){const s=this.$[t];return o(this,s)}}const xl=(e,t,r,n)=>{if(e._setter==="assign"&&!Bo()){ml(r,t,n);return}let o=e._transform?e._transform.untransform(n,r,t):n;if(o==null){const s=an(e);s!==ae&&(o=s)}r.$[t]=o},fg=(e,t,r,n)=>r[bi]?(xl(e,t,r,n),!0):!1,Ol=()=>Go().modelIdGenerator(),Sl=wt(Nr,Ol);Sl._isId=!0;const Al=Ls(Ol);Al._isId=!0;function dg({modelProps:e,baseModel:t,type:r,valueType:n,fromSnapshotProcessor:o,toSnapshotProcessor:s}){Ir(e,"modelProps"),e=Object.assign(Object.create(null),e);const i=e,a=Object.keys(i).filter(b=>i[b]._isId);if(a.length>1)throw y(`expected at most one idProp but got many: ${JSON.stringify(a)}`);const u=Object.values(i).some(b=>!!b._typeChecker);let l;if(a.length>0){l=a[0];const b=i[l];let w=u?Sl:Al;switch(b._setter){case!0:w=w.withSetter();break;case"assign":w=w.withSetter("assign");break}i[l]=w}let c;if(u){const b={};for(const[w,S]of Object.entries(i))b[w]=S._typeChecker?S._typeChecker:Cr();c=tg(()=>b)}const f=Pr,d=B0;let p;function h(b,w){var S;const j=(S=w?.modelClass)!=null?S:this.constructor,k=new f(b,{...w,modelClass:j});return Tc(k,bi,!1,!0),p||(p=Object.keys(e).filter(Z=>!d.has(Z)&&Object.hasOwn(k,Z))),p.forEach(Z=>{delete k[Z]}),k}Object.assign(h,f);const _=f[Ws];_&&(h[Ws]=_.slice()),Kh(h,i);{const b={dataType:c,modelIdProperty:l,valueType:n};h[sn]=b}h.prototype=Object.create(f.prototype),h.prototype.constructor=h;let m=(b,w,S,j)=>{fg(b,w,S,j)&&(m=xl)};for(const[b,w]of Object.entries(e)){if(!d.has(b)){const S=lg(w,b);Object.defineProperty(h.prototype,b,{get:S,set(j){m(w,b,this,j)},enumerable:!0,configurable:!1})}if(w._setter===!0){const S=zh(b);if(!d.has(S)){const j=We(h.prototype,S,{value:function(k){this[b]=k},writable:!0,enumerable:!1,configurable:!1});Object.defineProperty(h.prototype,S,j)}}}const O=hg(i),v=pg(i);return h.fromSnapshotProcessor=ru(o,O),h.toSnapshotProcessor=ru(v,s),h}function hg(e){const t=Object.entries(e).filter(([r,n])=>n._fromSnapshotProcessor);if(!(t.length<=0))return r=>{const n={...r};for(const[o,s]of t)s._fromSnapshotProcessor&&(n[o]=s._fromSnapshotProcessor(r[o]));return n}}function pg(e){const t=Object.entries(e).filter(([r,n])=>n._toSnapshotProcessor);if(!(t.length<=0))return r=>{const n={...r};for(const[o,s]of t)s._toSnapshotProcessor&&(n[o]=s._toSnapshotProcessor(r[o]));return n}}function Xo(e,t){const r=typeof e=="function"?e():e;return gg(r,void 0)}function gg(e,t,r){var n;return dg({modelProps:e,baseModel:t,type:"class",valueType:(n=void 0)!=null?n:!1,fromSnapshotProcessor:void 0,toSnapshotProcessor:void 0})}const Yo=e=>(t,...r)=>{const n=typeof r[1]=="object"?r[1]:void 0;return vg(e,t,n?.addInitializer)},Pl=new WeakMap,Cl=(e,t)=>{lo(t,Ic);const r=Pl.get(e);if(r.needsMakeObservable)fo.makeObservable(t);else if(r.needsMakeObservable===void 0)if(Dc()>=6)try{fo.makeObservable(t),r.needsMakeObservable=!0}catch(n){const o=n;if(o.message!=="[MobX] No annotations were passed to makeObservable, but no decorator members have been found either"&&o.message!=="[MobX] No annotations were passed to makeObservable, but no decorated members have been found either")throw o;r.needsMakeObservable=!1}else r.needsMakeObservable=!1;t[bi]=!0,lo(t,Bh),r.type==="class"&&t.onInit&&(Zs(t,"onInit",Sr.OnInit),t.onInit()),r.type==="data"&&t.onLazyInit&&(Zs(t,"onLazyInit",Sr.OnLazyInit),t.onLazyInit())},bg={construct(e,t){const r=new e(...t);return Cl(e,r),r}},vg=(e,t,r)=>{const n=jn(t)?"class":Ar(t)?"data":void 0;if(!n)throw y("clazz must be a class that extends from Model/DataModel");if(Wn[e]&&Go().showDuplicateModelNameWarnings&&kc("warn",`a model with name "${e}" already exists (if you are using hot-reloading you may safely ignore this warning)`,`duplicateModelName - ${e}`),ls in t&&t[ls]===t)throw y("a class already decorated with `@model` cannot be re-decorated");if(t.toString=()=>`class ${t.name}#${e}`,n==="class"&&(t[G]=e),Pl.set(t,{needsMakeObservable:void 0,type:n}),r){r(function(){Cl(t,this)});const o={name:e,class:t};Wn[e]=o,Ie.set(t,o),lo(t,Ns);return}else{const o=new Proxy(t,bg);o.prototype.constructor=o,o[ls]=t;const s={name:e,class:o};return Wn[e]=s,Ie.set(o,s),Ie.set(t,s),lo(t,Ns),o}};function Js(e){const t=r=>new _g(r,lr(e));return Pt(()=>{const r=he(e),n=(...s)=>`Array<${r.getTypeName(...s,r)}>`,o=new Oe(ke.Array,(s,i,a)=>{if(!xe(s))return new Ge(i,n(o),s,a);if(!r.unchecked)for(let u=0;u<s.length;u++){const l=r.check(s[u],[...i,u],a);if(l)return l}return null},n,t,s=>{if(!xe(s))return null;if(!r.unchecked){for(let i=0;i<s.length;i++)if(!r.snapshotType(s[i]))return null}return o},s=>r.unchecked?s:s.map(i=>r.fromSnapshotProcessor(i)),s=>r.unchecked?s:s.map(i=>r.toSnapshotProcessor(i)));return o},t)}class _g extends Ue{constructor(t,r){super(t),this.itemType=r}get itemTypeInfo(){return cr(this.itemType)}}var yg=Object.defineProperty,mg=Object.getOwnPropertyDescriptor,_e=(e,t,r,n)=>{for(var o=n>1?void 0:n?mg(t,r):t,s=e.length-1,i;s>=0;s--)(i=e[s])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&yg(t,r,o),o};function wo(e,t){if(e.type==="single")return[e];{const r=[];for(const n of e.events)t?r.unshift(...wo(n,!0)):r.push(...wo(n,!1));return r}}let Bt=class extends Xo({undoEvents:wt(Js(Cr()),()=>[]),redoEvents:wt(Js(Cr()),()=>[])}){constructor(){super(...arguments),M(this,"_groupStack",[])}_clearUndo(){Ht(()=>{this.undoEvents.length=0})}_clearRedo(){Ht(()=>{this.redoEvents.length=0})}enforceMaxLevels({maxUndoLevels:e,maxRedoLevels:t}){if(e!==void 0)for(;this.undoEvents.length>e;)this.undoEvents.shift();if(t!==void 0)for(;this.redoEvents.length>t;)this.redoEvents.shift()}_undo({maxRedoLevels:e}){Ht(()=>{const t=this.undoEvents.pop();this.redoEvents.push(t),this.enforceMaxLevels({maxRedoLevels:e})})}_redo({maxUndoLevels:e}){Ht(()=>{const t=this.redoEvents.pop();this.undoEvents.push(t),this.enforceMaxLevels({maxUndoLevels:e})})}_addUndo({event:e,maxUndoLevels:t}){Ht(()=>{this.undoEvents.push(e),this.redoEvents.length=0,this.enforceMaxLevels({maxUndoLevels:t})})}_addUndoToParentGroup(e,t){e.events.push(t)}get _currentGroup(){return this._groupStack[this._groupStack.length-1]}_startGroup(e,t,r){var n;let o=!1,s=!1;const i=this._currentGroup,a={type:"group",groupName:e,events:[]},u=i||(n=r?.attachedState)==null?void 0:n.save(),l={pause:()=>{if(s)throw y("cannot pause a group when it is already ended");if(!o)throw y("cannot pause a group when it is not running");if(this._currentGroup!==a)throw y("group out of order");this._groupStack.pop(),o=!1},resume:()=>{if(s)throw y("cannot resume a group when it is already ended");if(o)throw y("cannot resume a group when it is already running");this._groupStack.push(a),o=!0},end:()=>{var c;o&&l.pause(),s=!0,i?this._addUndoToParentGroup(i,a):this._addUndo({event:{...a,attachedState:{beforeEvent:u,afterEvent:(c=r?.attachedState)==null?void 0:c.save()}},maxUndoLevels:r?.maxUndoLevels})}};return t&&l.resume(),l}};_e([We],Bt.prototype,"_clearUndo",1);_e([We],Bt.prototype,"_clearRedo",1);_e([We],Bt.prototype,"_undo",1);_e([We],Bt.prototype,"_redo",1);_e([We],Bt.prototype,"_addUndo",1);Bt=_e([Yo(`${xn}/UndoStore`)],Bt);class ht{constructor(t,r,n,o){M(this,"store"),M(this,"_isUndoRecordingDisabled",!1),this.disposer=t,this.subtreeRoot=r,this.options=o,Dc()>=6&&fo.makeObservable(this),this.store=n??new Bt({})}get undoQueue(){return this.store.undoEvents}get redoQueue(){return this.store.redoEvents}get undoLevels(){return this.undoQueue.length}get canUndo(){return this.undoLevels>0}clearUndo(){this.store._clearUndo()}get redoLevels(){return this.redoQueue.length}get canRedo(){return this.redoLevels>0}clearRedo(){this.store._clearRedo()}undo(){var t;if(!this.canUndo)throw y("nothing to undo");const r=this.undoQueue[this.undoQueue.length-1];Ht(()=>{var n,o,s;wo(r,!0).forEach(i=>{vo(this.subtreeRoot,i.inversePatches,!0)}),(n=r.attachedState)!=null&&n.beforeEvent&&((s=(o=this.options)==null?void 0:o.attachedState)==null||s.restore(r.attachedState.beforeEvent))}),this.store._undo({maxRedoLevels:(t=this.options)==null?void 0:t.maxRedoLevels})}redo(){var t;if(!this.canRedo)throw y("nothing to redo");const r=this.redoQueue[this.redoQueue.length-1];Ht(()=>{var n,o,s;wo(r,!1).forEach(i=>{vo(this.subtreeRoot,i.patches)}),(n=r.attachedState)!=null&&n.afterEvent&&((s=(o=this.options)==null?void 0:o.attachedState)==null||s.restore(r.attachedState.afterEvent))}),this.store._redo({maxUndoLevels:(t=this.options)==null?void 0:t.maxUndoLevels})}dispose(){this.disposer()}get isUndoRecordingDisabled(){return this._isUndoRecordingDisabled}withoutUndo(t){const r=this._isUndoRecordingDisabled;this._isUndoRecordingDisabled=!0;try{return t()}finally{this._isUndoRecordingDisabled=r}}createGroup(t){const r=this.store._startGroup(t,!1,this.options);return{continue(n){r.resume();try{return n()}finally{r.pause()}},end(){r.end()}}}withGroup(t,r){let n,o;typeof t=="string"?(n=t,o=r):o=t;const s=this.store._startGroup(n,!0,this.options);try{return o()}finally{s.end()}}withGroupFlow(t,r){let n,o;typeof t=="string"?(n=t,o=r):o=t;const s=o(),i=this.store._startGroup(n,!1,this.options),a=s.next.bind(s),u=s.throw.bind(s);return new Promise((c,f)=>{function d(_){i.resume();let m;try{m=a(_)}catch(O){i.end(),f(O);return}i.pause(),h(m)}function p(_){i.resume();let m;try{m=u(_)}catch(O){i.end(),f(O);return}i.pause(),h(m)}function h(_){_&&typeof _.then=="function"?_.then(h,f):_.done?(i.end(),c(_.value)):Promise.resolve(_.value).then(d,p)}d(void 0)})}}_e([Y],ht.prototype,"undoQueue",1);_e([Y],ht.prototype,"redoQueue",1);_e([Y],ht.prototype,"undoLevels",1);_e([Y],ht.prototype,"canUndo",1);_e([A],ht.prototype,"clearUndo",1);_e([Y],ht.prototype,"redoLevels",1);_e([Y],ht.prototype,"canRedo",1);_e([A],ht.prototype,"clearRedo",1);_e([A],ht.prototype,"undo",1);_e([A],ht.prototype,"redo",1);let ys=!1;function Ht(e){const t=ys;ys=!0;try{return e()}finally{ys=t}}function ms(e){return e.type==="value"?e.value:e.value.get()}const wg=()=>jt("contextValue");class xg{constructor(t){M(this,"defaultContextValue",N.box(void 0,{deep:!1})),M(this,"overrideContextValue",N.box(void 0,{deep:!1})),M(this,"nodeContextValue",new WeakMap),M(this,"nodeAtom",new WeakMap),M(this,"setDefault",A(r=>{this.defaultContextValue.set({type:"value",value:r})})),M(this,"setDefaultComputed",A(r=>{this.defaultContextValue.set({type:"computed",value:Y(r)})})),M(this,"set",A((r,n)=>{fe(r,"node"),this.nodeContextValue.set(r,{type:"value",value:n}),this.reportNodeAtomChanged(r)})),M(this,"setComputed",A((r,n)=>{this._setComputed(r,Y(n))})),M(this,"unset",A(r=>{fe(r,"node"),this.nodeContextValue.delete(r),this.reportNodeAtomChanged(r)})),M(this,"apply",A((r,n)=>{const o=this.overrideContextValue.get();this.overrideContextValue.set({type:"value",value:n});try{const s=r();return At(s,!0)&&this.set(s,n),s}finally{this.overrideContextValue.set(o)}})),M(this,"applyComputed",A((r,n)=>{const o=Y(n),s=this.overrideContextValue.get();this.overrideContextValue.set({type:"computed",value:o});try{const i=r();return At(i,!0)&&this._setComputed(i,o),i}finally{this.overrideContextValue.set(s)}})),this.setDefault(t)}reportNodeAtomObserved(t){Qe(this.nodeAtom,t,wg).reportObserved()}reportNodeAtomChanged(t){var r;(r=this.nodeAtom.get(t))==null||r.reportChanged()}fastGet(t,r){r&&this.reportNodeAtomObserved(t);const n=this.nodeContextValue.get(t);if(n)return ms(n);const o=un(t,r);if(!o){const s=this.overrideContextValue.get();return s?ms(s):this.getDefault()}return this.fastGet(o,r)}get(t){return fe(t,"node"),this.fastGet(t,!0)}fastGetProviderNode(t,r){if(r&&this.reportNodeAtomObserved(t),this.nodeContextValue.get(t))return t;const o=un(t,r);if(o)return this.fastGetProviderNode(o,r)}getProviderNode(t){return fe(t,"node"),this.fastGetProviderNode(t,!0)}getDefault(){return ms(this.defaultContextValue.get())}_setComputed(t,r){fe(t,"node"),this.nodeContextValue.set(t,{type:"computed",value:r}),this.reportNodeAtomChanged(t)}}function jl(e){return new xg(e)}jl(!1);var Og=Object.defineProperty,Sg=Object.getOwnPropertyDescriptor,Di=(e,t,r,n)=>{for(var o=Sg(t,r),s=e.length-1,i;s>=0;s--)(i=e[s])&&(o=i(t,r,o)||o);return o&&Og(t,r,o),o};class Rn extends Xo({id:wt(Nr)}){get maybeCurrent(){return this.resolve()}get isValid(){return!!this.maybeCurrent}get current(){const t=this.maybeCurrent;if(!t)throw y(`a reference of type '${this[G]}' could not resolve an object with id '${this.id}'`);return t}}Di([Y],Rn.prototype,"maybeCurrent");Di([Y],Rn.prototype,"isValid");Di([Y],Rn.prototype,"current");var Ag=Object.defineProperty,Pg=Object.getOwnPropertyDescriptor,nu=(e,t,r,n)=>{for(var o=n>1?void 0:n?Pg(t,r):t,s=e.length-1,i;s>=0;s--)(i=e[s])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Ag(t,r,o),o};const ou=new WeakMap;function Rl(e,t,r,n){let o=class extends Rn{constructor(){super(...arguments),M(this,"resolver"),M(this,"savedOldTarget")}resolve(){return this.resolver||(this.resolver=t(this)),this.resolver(this)}internalForceUpdateBackRefs(a){const u=this.savedOldTarget;this.savedOldTarget=a,Rg(this,i,a,u)}forceUpdateBackRefs(){this.internalForceUpdateBackRefs(this.maybeCurrent)}onInit(){let a,u=!0;ai(()=>this.maybeCurrent,l=>{this.internalForceUpdateBackRefs(l);const c=a,f=u;a=l,u=!1,!f&&n&&l!==c&&n(this,l,c)},{fireImmediately:!0})}};nu([A],o.prototype,"forceUpdateBackRefs",1),o=nu([Yo(e)],o);const s=a=>{let u;if(typeof a=="string"?u=a:(Ir(a,"target"),u=r(a)),typeof u!="string")throw y("ref target object must have an id of string type");return new o({id:u})};s.refClass=o;const i=s;return i}function Ni(e){if(ge(e)){const t=e.getRefId();if(t!==void 0&&typeof t!="string")throw y("'getRefId()' must return a string or undefined when present");return t}}const Cg=new WeakMap;function jg(e,t,r=Ni){const o=Qe(Cg,r,()=>up(s=>r(s))).walk(e);return o?o.get(t):void 0}function Ln(e,t){let r=ou.get(e);if(r||(r={all:N.set(void 0,{deep:!1}),byType:new WeakMap},ou.set(e,r)),t){let n=r.byType.get(t);return n||(n=N.set(void 0,{deep:!1}),r.byType.set(t,n)),n}else return r.all}const Rg=A("updateBackRefs",(e,t,r,n)=>{r!==n&&(n&&(Ln(n).delete(e),Ln(n,t).delete(e)),r&&(Ln(r).add(e),Ln(r,t).add(e)))});zc({initData(){return{all:new Set,byType:new WeakMap}},addNode(e,t){e instanceof Rn&&(t.all.add(e),Qe(t.byType,e.constructor,()=>new Set).add(e))}});A("customRef",(e,t)=>{var r;const n=(r=t.getId)!=null?r:Ni;return Rl(e,()=>t.resolve,n,t.onResolvedValueChange)});A("rootRef",(e,t)=>{var r;const n=(r=t?.getId)!=null?r:Ni,o=t?.onResolvedValueChange;return Rl(e,i=>{let a;return()=>{const u=mo(i,!0);if(Tg(i,u,a,n))return a;const l=jg(u,i.id,n);return l&&(a=l),l}},n,o)});function Tg(e,t,r,n){return!(!r||e.id!==n(r)||t!==mo(r,!0))}function oe(e,t){return H0(e,t)}function Eg(e,...t){return e.splice(...t)}const me=`${xn}/arrayActions`;oe(`${me}::set`,(e,t,r)=>{ue(e,t,r)}),oe(`${me}::delete`,(e,t)=>Ot(e,String(t))),oe(`${me}::setLength`,(e,t)=>{e.length=t}),oe(`${me}::concat`,(e,...t)=>e.concat(...t)),oe(`${me}::copyWithin`,(e,t,r,n)=>e.copyWithin(t,r,n)),oe(`${me}::fill`,(e,t,r,n)=>e.fill(t,r,n)),oe(`${me}::pop`,e=>e.pop()),oe(`${me}::push`,(e,...t)=>e.push(...t)),oe(`${me}::reverse`,e=>e.reverse()),oe(`${me}::shift`,e=>e.shift()),oe(`${me}::slice`,(e,t,r)=>e.slice(t,r)),oe(`${me}::sort`,(e,t)=>e.sort(t)),oe(`${me}::splice`,Eg),oe(`${me}::unshift`,(e,...t)=>e.unshift(...t)),oe(`${me}::swap`,(e,t,r)=>{if(t<0||r<0||t>=e.length||r>=e.length)return!1;r<t&&([t,r]=[r,t]);const[n]=e.splice(t,1),[o]=e.splice(r-1,1);return e.splice(t,0,o),e.splice(r,0,n),!0});const Vn=`${xn}/objectActions`;oe(`${Vn}::set`,(e,t,r)=>{lt(e)?ue(e,t,r):e[t]=r}),oe(`${Vn}::assign`,(e,t)=>{Ir(t,"partialObject");const r=Object.keys(t);if(lt(e))for(const n of r){const o=t[n];ue(e,n,o)}else for(const n of r)e[n]=t[n]}),oe(`${Vn}::delete`,(e,t)=>Ot(e,t)),oe(`${Vn}::call`,(e,t,...r)=>e[t](...r));A(e=>{const t=Ee(()=>Mo(()=>{const o=N.map(),s=Object.keys(e);for(let i=0;i<s.length;i++){const a=s[i];o.set(a,e[a])}return o}));t.dataObject=e;let r=!1,n=!1;return _n(e,A(o=>{if(!r){n=!0;try{switch(o.type){case"add":case"update":{t.set(o.name,o.newValue);break}case"remove":{t.delete(o.name);break}default:throw y("assertion error: unsupported object change type")}}finally{n=!1}}})),No(t,A(o=>{if(r)return null;if(n)return o;r=!0;try{switch(o.type){case"add":case"update":{ue(e,o.name,o.newValue);break}case"delete":{Ot(e,o.name);break}default:throw y("assertion error: unsupported map change type")}return o}finally{r=!1}})),t});var Mg=Object.defineProperty,Ig=Object.getOwnPropertyDescriptor,Lr=(e,t,r,n)=>{for(var o=Ig(t,r),s=e.length-1,i;s>=0;s--)(i=e[s])&&(o=i(t,r,o)||o);return o&&Mg(t,r,o),o};class Vr{constructor(t){M(this,"data"),M(this,"originalData"),fe(t,"original"),this.originalData=t,this.data=Yt(this.originalSnapshot,{generateNewIds:!1})}commit(){Fa(this.originalData,we(this.data))}commitByPath(t){const r=gs(this.data,t);if(!r.resolved)throw y(`path ${JSON.stringify(t)} could not be resolved in draft object`);const n=ws(this.data,t);if(!bs(this.originalData,t,n).resolved)throw y(`path ${JSON.stringify(t)} could not be resolved in original object`);vo(this.originalData,[{path:t,op:"replace",value:we(r.value)}])}reset(){Fa(this.data,this.originalSnapshot)}resetByPath(t){const r=gs(this.originalData,t);if(!r.resolved)throw y(`path ${JSON.stringify(t)} could not be resolved in original object`);const n=ws(this.originalData,t);if(!bs(this.data,t,n).resolved)throw y(`path ${JSON.stringify(t)} could not be resolved in draft object`);vo(this.data,[{path:t,op:"replace",value:we(r.value)}])}get isDirty(){return!qs(we(this.data),this.originalSnapshot)}isDirtyByPath(t){const r=gs(this.data,t);if(!r.resolved)throw y(`path ${JSON.stringify(t)} could not be resolved in draft object`);const n=ws(this.data,t),o=bs(this.originalData,t,n);return o.resolved?!qs(r.value,o.value):!0}get originalSnapshot(){return we(this.originalData)}}Lr([A],Vr.prototype,"commit");Lr([A],Vr.prototype,"commitByPath");Lr([A],Vr.prototype,"reset");Lr([A],Vr.prototype,"resetByPath");Lr([Y],Vr.prototype,"isDirty");Lr([Y],Vr.prototype,"originalSnapshot");function ws(e,t){const r=Q0(e,t);return r.length>0&&(r[r.length-1]=yl),r}jl();var $g=Object.defineProperty,kg=Object.getOwnPropertyDescriptor,Qo=(e,t,r,n)=>{for(var o=n>1?void 0:n?kg(t,r):t,s=e.length-1,i;s>=0;s--)(i=e[s])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&$g(t,r,o),o};let cn=class extends Xo({[Me]:vi,items:wt(Js(Cr()),()=>[])}){constructor(){super(...arguments),M(this,Sa,"ArraySet")}add(e){const t=this.items;return t.includes(e)||t.push(e),this}clear(){this.items.length=0}delete(e){const t=this.items,r=t.findIndex(n=>n===e);return r>=0?(t.splice(r,1),!0):!1}forEach(e,t){const r=this.items,n=r.length;for(let o=0;o<n;o++){const s=r[o];e.call(t,s,s,this)}}has(e){return this.items.includes(e)}get size(){return this.items.length}*keys(){for(const e of so(this.items))yield e}*values(){for(const e of so(this.items))yield e}*entries(){for(const e of this.items)yield[e,e]}[(Aa=Symbol.iterator,Sa=Symbol.toStringTag,Aa)](){return this.values()}union(e){return new Set(this).union(e)}intersection(e){return new Set(this).intersection(e)}difference(e){return new Set(this).difference(e)}symmetricDifference(e){return new Set(this).symmetricDifference(e)}isSubsetOf(e){return new Set(this).isSubsetOf(e)}isSupersetOf(e){return new Set(this).isSupersetOf(e)}isDisjointFrom(e){return new Set(this).isDisjointFrom(e)}};Qo([We],cn.prototype,"add",1);Qo([We],cn.prototype,"clear",1);Qo([We],cn.prototype,"delete",1);cn=Qo([Yo(`${xn}/ArraySet`)],cn);function Dg(e){const t=r=>new Ng(r,lr(e));return Pt(()=>{const r=he(e),n=(...i)=>`Record<${r.getTypeName(...i,r)}>`,o=(i,a)=>{if(r.unchecked)return i;const u={},l=Object.keys(i);for(let c=0;c<l.length;c++){const f=l[c],d=a==="from"?r.fromSnapshotProcessor(i[f]):r.toSnapshotProcessor(i[f]);u[f]=d}return u},s=new Oe(ke.Object,(i,a,u)=>{if(!Fe(i))return new Ge(a,n(s),i,u);if(!r.unchecked){const l=Object.keys(i);for(let c=0;c<l.length;c++){const f=l[c],d=i[f],p=r.check(d,[...a,f],u);if(p)return p}}return null},n,t,i=>{if(!Fe(i))return null;if(!r.unchecked){const a=Object.keys(i);for(let u=0;u<a.length;u++){const l=a[u],c=i[l];if(!r.snapshotType(c))return null}}return s},i=>o(i,"from"),i=>o(i,"to"));return s},t)}class Ng extends Ue{constructor(t,r){super(t),this.valueType=r}get valueTypeInfo(){return cr(this.valueType)}}var Lg=Object.defineProperty,Vg=Object.getOwnPropertyDescriptor,es=(e,t,r,n)=>{for(var o=n>1?void 0:n?Vg(t,r):t,s=e.length-1,i;s>=0;s--)(i=e[s])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&Lg(t,r,o),o};let ln=class extends Xo({[Me]:vi,items:wt(Dg(Cr()),()=>({}))}){constructor(){super(...arguments),M(this,Pa,"ObjectMap")}clear(){const e=this.items,t=Object.keys(e),r=t.length;for(let n=0;n<r;n++){const o=t[n];Ot(e,o)}}delete(e){return this.has(e)?(Ot(this.items,e),!0):!1}forEach(e,t){const r=this.items,n=Object.keys(r),o=n.length;for(let s=0;s<o;s++){const i=n[s];e.call(t,r[i],i,this)}}get(e){return _c(this.items,e)}has(e){return ui(this.items,e)}set(e,t){return ue(this.items,e,t),this}get size(){return Vt(this.items).length}*keys(){for(const e of Vt(this.items))yield e}*values(){for(const e of so(this.items))yield e}*entries(){for(const e of vc(this.items))yield e}[(Ca=Symbol.iterator,Pa=Symbol.toStringTag,Ca)](){return this.entries()}};es([We],ln.prototype,"clear",1);es([We],ln.prototype,"delete",1);es([We],ln.prototype,"set",1);ln=es([Yo(`${xn}/ObjectMap`)],ln);function Tl(e,t,r){const n=o=>new Bg(o,lr(e),t,r);return Pt(()=>{const o=he(e),s=(...a)=>{const u=o.getTypeName(...a,o);return`${r||"refinementOf"}<${u}>`},i=new Oe(o.baseType,(a,u,l)=>{const c=o.check(a,u,l);if(c)return c;const f=t(a);return f===!0||f==null?null:f===!1?new Ge(u,s(i),a,l):new Ge(f.path,f.expectedTypeName,f.actualValue,l)},s,n,a=>o.snapshotType(a),a=>o.fromSnapshotProcessor(a),a=>o.toSnapshotProcessor(a));return i},n)}class Bg extends Ue{constructor(t,r,n,o){super(t),this.baseType=r,this.checkFunction=n,this.typeName=o}get baseTypeInfo(){return cr(this.baseType)}}Tl(Jo,e=>Number.isInteger(e),"integer");Tl(Nr,e=>e!=="","nonEmpty");function zg(e){throw new Error("[mobx-utils] "+e)}function xo(e,t){t===void 0&&(t="Illegal state"),e||zg(t)}var El=function(e){return e&&e!==Object.prototype&&Object.getOwnPropertyNames(e).concat(El(Object.getPrototypeOf(e))||[])},Fg=function(e){var t=El(e),r=t.filter(function(n,o){return t.indexOf(n)===o});return r},su=function(e){return Fg(e).filter(function(t){return t!=="constructor"&&!~t.indexOf("__")})},Hs="pending",Oo="fulfilled",Li="rejected";function Gg(e){switch(this.state){case Hs:return e.pending&&e.pending(this.value);case Li:return e.rejected&&e.rejected(this.value);case Oo:return e.fulfilled?e.fulfilled(this.value):this.value}}function iu(e,t){if(xo(arguments.length<=2,"fromPromise expects up to two arguments"),xo(typeof e=="function"||typeof e=="object"&&e&&typeof e.then=="function","Please pass a promise or function to fromPromise"),e.isPromiseBasedObservable===!0)return e;typeof e=="function"&&(e=new Promise(e));var r=e;e.then(A("observableFromPromise-resolve",function(o){r.value=o,r.state=Oo}),A("observableFromPromise-reject",function(o){r.value=o,r.state=Li})),r.isPromiseBasedObservable=!0,r.case=Gg;var n=t&&(t.state===Oo||t.state===Hs)?t.value:void 0;return ko(r,{value:n,state:Hs},{},{deep:!1}),r}(function(e){e.reject=A("fromPromise.reject",function(r){var n=e(Promise.reject(r));return n.state=Li,n.value=r,n});function t(r){r===void 0&&(r=void 0);var n=e(Promise.resolve(r));return n.state=Oo,n.value=r,n}e.resolve=A("fromPromise.resolve",t)})(iu||(iu={}));var Bn=function(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};(function(){function e(t,r){var n=this;Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subscription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Lo(this),oo(function(){n.current=r,n.subscription=t.subscribe(n)})}return Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.subscription&&this.subscription.unsubscribe()}}),Object.defineProperty(e.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.current=t}}),Object.defineProperty(e.prototype,"complete",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dispose()}}),Object.defineProperty(e.prototype,"error",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.current=t,this.dispose()}}),Bn([N.ref],e.prototype,"current",void 0),Bn([A.bound],e.prototype,"next",null),Bn([A.bound],e.prototype,"complete",null),Bn([A.bound],e.prototype,"error",null),e})();var So=function(){return So=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},So.apply(this,arguments)},Hr=function(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},Ug=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function e(t){var r=this;Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"localValues",{enumerable:!0,configurable:!0,writable:!0,value:N.map({})}),Object.defineProperty(this,"localComputedValues",{enumerable:!0,configurable:!0,writable:!0,value:N.map({})}),Object.defineProperty(this,"isPropertyDirty",{enumerable:!0,configurable:!0,writable:!0,value:function(o){return r.localValues.has(o)}}),Lo(this),xo(Q(t),"createViewModel expects an observable object");var n=su(this);su(t).forEach(function(o){var s;if(!n.includes(o)&&!(o===C||o==="__mobxDidRunLazyInitializers")){if(xo(Ug.indexOf(o)===-1,"The propertyname "+o+" is reserved and cannot be used with viewModels"),qn(t,o)){var i=ft(t,o),a=i.derivation.bind(r),u=(s=i.setter_)===null||s===void 0?void 0:s.bind(r);r.localComputedValues.set(o,Y(a,{set:u}))}var l=Object.getOwnPropertyDescriptor(t,o),c=l?{enumerable:l.enumerable}:{};Object.defineProperty(r,o,So(So({},c),{configurable:!0,get:function(){return qn(t,o)?r.localComputedValues.get(o).get():r.isPropertyDirty(o)?r.localValues.get(o):r.model[o]},set:A(function(f){qn(t,o)?r.localComputedValues.get(o).set(f):f!==r.model[o]?r.localValues.set(o,f):r.localValues.delete(o)})}))}})}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"changedValues",{get:function(){return new Map(this.localValues)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"submit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;Vt(this.localValues).forEach(function(r){var n=t.localValues.get(r),o=t.model[r];be(o)?o.replace(n):se(o)?(o.clear(),o.merge(n)):gc(n)||(t.model[r]=n)}),this.localValues.clear()}}),Object.defineProperty(e.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.localValues.clear()}}),Object.defineProperty(e.prototype,"resetProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.localValues.delete(t)}}),Hr([Y],e.prototype,"isDirty",null),Hr([Y],e.prototype,"changedValues",null),Hr([A.bound],e.prototype,"submit",null),Hr([A.bound],e.prototype,"reset",null),Hr([A.bound],e.prototype,"resetProperty",null),e})();var qg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){qg(t,e);function t(r,n,o){var s=o===void 0?{}:o,i=s.name,a=i===void 0?"ogm"+(Math.random()*1e3|0):i,u=s.keyToName,l=u===void 0?function(d){return""+d}:u,c=e.call(this)||this;Object.defineProperty(c,"_base",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(c,"_ogmInfoKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(c,"_groupBy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(c,"_keyToName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(c,"_disposeBaseObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),c._keyToName=l,c._groupBy=n,c._ogmInfoKey=Symbol("ogmInfo"+a),c._base=r;for(var f=0;f<r.length;f++)c._addItem(r[f]);return c._disposeBaseObserver=_n(c._base,function(d){if(d.type==="splice")Ee(function(){for(var p=0,h=d.removed;p<h.length;p++){var _=h[p];c._removeItem(_)}for(var m=0,O=d.added;m<O.length;m++){var v=O[m];c._addItem(v)}});else if(d.type==="update")Ee(function(){c._removeItem(d.oldValue),c._addItem(d.newValue)});else throw new Error("illegal state")}),c}return Object.defineProperty(t.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("not supported")}}),Object.defineProperty(t.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(r){throw new Error("not supported")}}),Object.defineProperty(t.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(r,n){throw new Error("not supported")}}),Object.defineProperty(t.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposeBaseObserver();for(var r=0;r<this._base.length;r++){var n=this._base[r],o=n[this._ogmInfoKey];o.reaction(),delete n[this._ogmInfoKey]}}}),Object.defineProperty(t.prototype,"_getGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(r){var n=e.prototype.get.call(this,r);return n===void 0&&(n=N([],{name:"GroupArray["+this._keyToName(r)+"]",deep:!1}),e.prototype.set.call(this,r,n)),n}}),Object.defineProperty(t.prototype,"_removeFromGroupArr",{enumerable:!1,configurable:!0,writable:!0,value:function(r,n){var o=e.prototype.get.call(this,r);o.length===1?e.prototype.delete.call(this,r):(n===o.length-1||(o[n]=o[o.length-1],o[n][this._ogmInfoKey].groupArrIndex=n),o.length--)}}),Object.defineProperty(t.prototype,"_addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(r){var n=this,o=this._groupBy(r),s=this._getGroupArr(o),i={groupByValue:o,groupArrIndex:s.length,reaction:ai(function(){return n._groupBy(r)},function(a,u){var l=r[n._ogmInfoKey];n._removeFromGroupArr(l.groupByValue,l.groupArrIndex);var c=n._getGroupArr(a),f=c.length;c.push(r),l.groupByValue=a,l.groupArrIndex=f})};Object.defineProperty(r,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:i}),s.push(r)}}),Object.defineProperty(t.prototype,"_removeItem",{enumerable:!1,configurable:!0,writable:!0,value:function(r){var n=r[this._ogmInfoKey];this._removeFromGroupArr(n.groupByValue,n.groupArrIndex),n.reaction(),delete r[this._ogmInfoKey]}}),t})(Vo);var Wg=(function(){function e(t,r,n,o){Object.defineProperty(this,"base",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"versionChecker",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closest",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closestIdx",{enumerable:!0,configurable:!0,writable:!0,value:0});for(var s=this.closest=this.root=t,i=0;i<this.args.length-1&&(s=s.get(r[i]),s);i++)this.closest=s;this.closestIdx=i}return Object.defineProperty(e.prototype,"exists",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertCurrentVersion();var t=this.args.length;return this.closestIdx>=t-1&&this.closest.has(this.args[t-1])}}),Object.defineProperty(e.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertCurrentVersion(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.assertCurrentVersion();for(var r=this.args.length,n=this.closest,o=this.closestIdx;o<r-1;o++){var s=new Map;n.set(this.args[o],s),n=s}this.closestIdx=r-1,this.closest=n,n.set(this.args[r-1],t)}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.assertCurrentVersion(),!this.exists())throw new Error("Entry doesn't exist");var t=this.args.length;this.closest.delete(this.args[t-1]);for(var r=this.root,n=[r],o=0;o<t-1;o++)r=r.get(this.args[o]),n.push(r);for(var o=n.length-1;o>0;o--)n[o].size===0&&n[o-1].delete(this.args[o-1])}}),Object.defineProperty(e.prototype,"assertCurrentVersion",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.versionChecker(this.version))throw new Error("Concurrent modification exception")}}),e})(),Kg=(function(){function e(){var t=this;Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"argsLength",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"currentVersion",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"checkVersion",{enumerable:!0,configurable:!0,writable:!0,value:function(r){return t.currentVersion===r}})}return Object.defineProperty(e.prototype,"entry",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(this.argsLength===-1)this.argsLength=t.length;else if(this.argsLength!==t.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+t.length);return this.currentVersion>=Number.MAX_SAFE_INTEGER&&(this.currentVersion=0),this.currentVersion++,new Wg(this.store,t,this.currentVersion,this.checkVersion)}}),e})(),Ao=function(){return Ao=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ao.apply(this,arguments)},au=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n};function Gv(e,t){if(t===void 0&&(t=!1),Lt(e))throw new Error("computedFn shouldn't be used on actions");var r=!1,n=0,o=typeof t=="boolean"?{keepAlive:t}:t,s=new Kg;return function(){for(var i=this,a,u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=s.entry(u);if(c.exists())return c.get().get();if(!o.keepAlive&&!Zu()){!r&&((a=o.requiresReaction)!==null&&a!==void 0?a:Yu().computedRequiresReaction)&&(console.warn("Invoking a computedFn from outside a reactive context won't be memoized and is cleaned up immediately, unless keepAlive is set."),r=!0);var f=e.apply(this,u);return o.onCleanup&&o.onCleanup.apply(o,au([f],u)),f}var d,p=Y(function(){return d=e.apply(i,u)},Ao(Ao({},o),{name:"computedFn("+(o.name||e.name)+"#"+ ++n+")"}));return c.set(p),o.keepAlive||$o(p,function(){s.entry(u).delete(),o.onCleanup&&o.onCleanup.apply(o,au([d],u)),d=void 0}),p.get()}}class Uv extends Jt{constructor(t){super(t),Lo(this,{_m:N,set:A,delete:A,clear:A})}}const qv=e=>{const t=Yn.createContext(void 0),r=()=>Yn.useContext(t);return{ctx:t,use:()=>ff(r(),()=>`"${e}" is not provided`),useIfProvided:r,provider:t.Provider}};function Zg(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}class Ml{constructor(){Ne(this,"callback",null);Ne(this,"ref",{observer:()=>this.observer,_current:null,get current(){return this._current},set current(t){this._current!==t&&(this._current&&this.observer().unobserve(this._current),this._current=t,t&&this.observer().observe(t))}})}setCallback(t){this.callback=t}get observer(){return new ResizeObserver(t=>this.observed(t))}observed(t){if(!this.callback)return;const r=t.find(n=>n.target===this.ref.current);r&&this.callback(r)}destroy(){this.ref.current=null}}Zg([Rr],Ml.prototype,"observer",null);const Wv=e=>{const t=Yn.useRef(void 0);return t.current||(t.current=new Ml),t.current.callback=e,Yn.useEffect(()=>()=>{t.current&&(t.current.destroy(),t.current=void 0)},[]),t.current};const{abs:jr,atan2:Il,cos:Zt,floor:Jg,log:vt,min:$l,max:Vi,round:de,sign:uu,sin:Hg,sqrt:Jn,cbrt:Xg,PI:ot,hypot:kl}=Math;function pe(e,t,r){return e+(t-e)*r}function Yg(e,t,r){return(r-e)/(t-e)}function ie(e,t=0,r=1){return e<t?t:e>r?r:e}function xs(e,t,r,n=1e-8){let o=t,s;for(;r--&&jr(s=e(o))>n;){const i=(e(o+n)-s)/n;console.log("fx / dfdx",s/i,"fx",s,"x",o),o=o-s/i}return o}function Qg(e,t,r,n){let o=e(t);for(;n--;){const s=(t+r)/2,i=e(s);uu(o)==uu(i)?(t=s,o=i):r=s}return(t+r)/2}const Xs=ot/180,Bi=180/ot;function fn(...e){return e[0]instanceof et?e[0]:e.length>1&&typeof e[e.length-1]=="string"?kt(e.slice(0,e.length-1),e[e.length-1]):Array.isArray(e[0])?kt(e[0]):kt(e)}class et{constructor(t,r,n,o=1){this.r=t,this.g=r,this.b=n,this.a=o}mix(t,r,n="rgb"){return Hn(this,t,r,n)}rgb(t=!0,r=!0){const n=a=>(t&&(a=de(a)),r&&(a=ie(a,0,255)),a),{r:o,g:s,b:i}=this;return[n(o),n(s),n(i)]}rgba(t=!0,r=!0){const n=u=>(t&&(u=de(u)),r&&(u=ie(u,0,255)),u),{r:o,g:s,b:i,a}=this;return[n(o),n(s),n(i),a]}hex(t="rgb"){const{r,g:n,b:o,a:s}=this;return sb(r,n,o,s,t)}hsl(){const{r:t,g:r,b:n}=this;return Ob(t,r,n)}hsv(){const{r:t,g:r,b:n}=this;return Ab(t,r,n)}hcg(){const{r:t,g:r,b:n}=this;return Cb(t,r,n)}css(t="rgb"){if(t=="rgb"){const{r,g:n,b:o,a:s}=this;return hb(r,n,o,s)}else{if(t=="hsl")return pb(this.hsl(),this.alpha());throw new Error}}name(t=!1){const r=this.num(),n=Object.keys(_t).find(o=>_t[o]==r);if(!n&&t){const[o,s,i]=this.lab();return $b(Object.keys(_t),a=>{const[u,l,c]=Dl(_t[a]).lab();return-kl(o-u,s-l,i-c)})}return n}cmyk(){const{r:t,g:r,b:n}=this;return yb(t,r,n)}gl(){const{r:t,g:r,b:n,a:o}=this;return[t/255,r/255,n/255,o]}luminance(t){const{r,g:n,b:o,a:s}=this,[,i]=Ys(r,n,o);if(t===void 0)return i;const a=(u,l,c)=>(c-u)/(l-u);return t>i?Hn(this,lu,a(i,1,t),"xyz").alpha(s):Hn(cu,this,a(0,i,t),"xyz").alpha(s)}temperature(){const{r:t,g:r,b:n}=this;return xb(t,r,n)}set(t,r){const[n,o]=t.split("."),s=this[n](),i=n.indexOf(o);if(i==-1)throw new Error("invalid channel");return s[i]=typeof r=="number"?r:r(s[i]),fn(s,n).alpha(this.a)}clipped(){const{r:t,g:r,b:n}=this;return!(0<=t&&t<=255&&0<=r&&r<=255&&0<=n&&n<=255)}textColor(){return this.luminance()>.5?cu:lu}alpha(t){if(t===void 0)return this.a;const{r,g:n,b:o}=this;return du(r,n,o,t)}darker(t=1){const[r,n,o]=this.lab();return rb(r-bu*t,n,o,this.alpha())}brighter(t=1){return this.darker(-t)}saturate(t=1){const[r,n,o]=this.lch();return tb(r,Vi(0,n+t*bu),o,this.alpha())}desaturate(t=1){return this.saturate(-t)}premultiplied(){const{r:t,g:r,b:n,a:o}=this;return du(t*o,r*o,n*o,o)}hsi(){const{r:t,g:r,b:n}=this;return Ib(t,r,n)}lab(){const{r:t,g:r,b:n}=this;return ql(t,r,n)}num(t="rgb"){const{r,g:n,b:o,a:s}=this;return ib(r,n,o,s,t)}lch(){const{r:t,g:r,b:n}=this;return _b(t,r,n)}xyz(){const{r:t,g:r,b:n}=this;return Ys(t,r,n)}equals(t){const{r,g:n,b:o,a:s}=this,{r:i,g:a,b:u,a:l}=t;return r==i&&n==a&&o==u&&s==l}hashCode(){return this.num("rgba")}toSource(){const{r:t,g:r,b:n,a:o}=this;return"chroma.rgb("+t+", "+r+", "+n+(o===1?")":", "+o+")")}}et.prototype.toString=et.prototype.css;et.prototype.kelvin=et.prototype.temperature;const cu=new et(0,0,0,1),lu=new et(255,255,255,1),eb={OrRd:[16775148,16705736,16635038,16628612,16551257,15689032,14102559,11730944,8323072],PuBu:[16775163,15525874,13685222,10927579,7645647,3576e3,356528,285325,145496],BuPu:[16252157,14740724,12571622,10403034,9213638,9202609,8929693,8458108,5046347],Oranges:[16774635,16705230,16634018,16625259,16616764,15821075,14239745,10892803,8333060],BuGn:[16252157,15070713,13429990,10082505,6734500,4304502,2329413,27948,17435],YlOrBr:[16777189,16775100,16704401,16696399,16685353,15495188,13388802,10040324,6694150],YlGn:[16777189,16252089,14282915,11394446,7915129,4303709,2327619,26679,17705],Reds:[16774640,16703698,16563105,16552562,16476746,15678252,13309981,10817301,6750221],RdPu:[16775155,16638173,16565696,16424885,16214177,14496919,11403646,7995767,4784234],Greens:[16252149,15070688,13101504,10607003,7652470,4303709,2329413,27948,17435],YlGnBu:[16777177,15595697,13101492,8375739,4306628,1937856,2252456,2438292,531800],Purples:[16579581,15724021,14342891,12369372,10394312,8420794,6967715,5515151,4128893],GnBu:[16252144,14742491,13429701,11066805,8113348,5157843,2854078,551084,540801],Greys:[16777215,15790320,14277081,12434877,9868950,7566195,5395026,2434341,0],YlOrRd:[16777164,16772512,16701814,16691788,16616764,16535082,14883356,12386342,8388646],PuRd:[16250105,15196655,13941210,13210823,14640560,15149450,13505110,9961539,6750239],Blues:[16251903,14609399,13032431,10406625,7057110,4362950,2191797,545180,536683],PuBuGn:[16775163,15524592,13685222,10927579,6793679,3576e3,164234,93273,83510],Viridis:[4456788,4728695,4147850,3237774,2524047,2071946,7130714,11984427,16705573],Spectral:[10355010,13975119,16018755,16625249,16703627,16777151,15136152,11263396,6734501,3311805,6180770],RdYlGn:[10813478,14102567,16018755,16625249,16703627,16777151,14282635,10934634,6733155,1742928,26679],RdBu:[6750239,11671595,14049357,16033154,16636871,16250871,13755888,9618910,4428739,2188972,340065],PiYG:[9306450,12917629,14579630,15840986,16638191,16250871,15136208,12116358,8371265,5083681,2581529],PRGn:[4194379,7744131,10055851,12756431,15193320,16250871,14282963,10935200,5942881,1800247,17435],RdYlBu:[10813478,14102567,16018755,16625249,16703632,16777151,14742520,11262441,7646673,4552116,3225237],BrBG:[5517317,9195786,12550445,14664317,16181443,16119285,13101797,8441281,3512207,91742,15408],RdGy:[6750239,11671595,14049357,16033154,16636871,16777215,14737632,12237498,8882055,5066061,1710618],PuOr:[8338184,11753478,14713364,16627811,16703670,16250871,14211819,11709394,8418220,5515144,2949195],Set2:[6734501,16551266,9281739,15174339,10934356,16767279,15058068,11776947],Accent:[8374655,12496596,16629894,16777113,3697840,15729279,12540695,6710886],Set1:[14948892,3636920,5091146,9981603,16744192,16777011,10901032,16220607,10066329],Set3:[9294791,16777139,12499674,16482418,8434131,16626786,11787881,16567781,14277081,12353725,13429701,16772463],Dark2:[1810039,14245634,7696563,15149450,6727198,15117058,10909213,6710886],Paired:[10931939,2062516,11722634,3383340,16489113,14883356,16629615,16744192,13284054,6962586,16777113,11622696],Pastel2:[11789005,16633260,13358568,16042724,15136201,16773806,15852236,13421772],Pastel1:[16495790,11783651,13429701,14601188,16701862,16777164,15063229,16636652,15921906]},_t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflower:6591981,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,laserlemon:16777044,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrod:16448210,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,maroon2:8323072,maroon3:11546720,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,purple2:8323199,purple3:10494192,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Hn(e,t,r=.5,n="rgb"){const o=fn(e),s=fn(t),i=Be[n]&&Be[n](o,s,r,n);if(!i)throw new Error("color mode "+n+" is not supported");return i.alpha(pe(o.alpha(),s.alpha(),r))}function Kv(e){const[t,r,n,o]=Vl(e);return new et(t,r,n,o)}function tb(...e){return kt(e,"lch")}function fu(...e){return kt(e,"hsl")}function rb(...e){return kt(e,"lab")}function Dl(e){const[t,r,n]=rs(e);return new et(t,r,n)}function du(...e){return kt(e,"rgb")}function hu(...e){const t=(r=>t._at(r));return Object.getOwnPropertyNames(pu.prototype).forEach(r=>t[r]=pu.prototype[r]),Array.isArray(e[0])&&(e=e[0]),e.length==1&&typeof e[0]=="string"&&(e=eb[e[0]]),t._init(typeof e[0]=="function"?e[0]:e.map(r=>fn(r))),t}class pu{classes(t){if(t===void 0)return this._classes;if(Array.isArray(t))this._classes=t,this.domain(t[0],t[t.length-1]);else{if(t%1!=0||t<1)throw new Error("invalid classes param");this._classes=Nl(this.domain(),"e",t)}return this}domain(...t){if(t[0]===void 0)return typeof this._colors!="function"?this._pos.map(r=>pe(this._min,this._max,r)):[this._min,this._max];if(this._min=t[0],this._max=t[t.length-1],t.length==2)typeof this._colors!="function"&&(this._pos=this._colors.map((r,n)=>n/(this._colors.length-1)));else if(typeof this._colors!="function"&&t.length==this._colors.length)this._pos=t.map(r=>Yg(this._min,this._max,r));else throw new Error("invalid domain "+t);return this}mode(t){return t===void 0?this._mode:(this._mode=t,this._resetCache(),this)}out(t){return this._out=t,this}correctLightness(t=!0){if(this._correctLightness!=t){this._resetCache();const r=this._colors;if(t&&typeof r!="function"){let n=0;for(let o=1;o<r.length;o++){const s=r[o].lab()[0]-r[o-1].lab()[0];if(n==0)n=s;else if(n*s<0)throw new Error("scale color lightnesses must be monotonic")}}}return this._correctLightness=t,this}padding(t,r=t){return t?(this._paddingLeft=t,this._paddingRight=r,this):[this._paddingLeft,this._paddingRight]}colors(t,r="hex"){let n;if(t===void 0)n=this._colors.slice();else if(t==1)n=[this._color((this._min+this._max)/2)];else if(t>1)n=Array.from({length:t},(o,s)=>this._color(pe(this._min,this._max,s/(t-1))));else{let o;this._classes&&this._classes.length>2?o=Array.from({length:this._classes.length-1},(s,i)=>(this._classes[i]+this._classes[i+1])*.5):o=this.domain(),n=o.map(s=>this._color(s))}return r!="color"?n.map(o=>o[r]()):n}cache(t){return t===void 0?!!this._cache:(this._cache=t?this._cache||new Map:void 0,this)}gamma(t){return t===void 0?this._gamma:(this._gamma=t,this)}_at(t){const r=this._color(t);return this._out?r[this._out]():r}_init(t){this._colors=t,typeof t!="function"&&(this._pos=t.map((r,n)=>n/(t.length-1))),this._mode="rgb",this.domain(0,1),this._paddingLeft=0,this._paddingRight=0,this._correctLightness=!1,this._cache=new Map,this._gamma=1}_getClass(t){return this._classes.findIndex(r=>t<=r)-1}_color(t,r=!1){let n;if(r)n=t;else{const i=this._min,a=this._max;this._classes&&this._classes.length>2?n=this._getClass(t)/(this._classes.length-2):a!==i?n=(t-i)/(a-i):n=1,this._correctLightness&&(n=this._tCorrectedLightness(n))}n=n**this._gamma,n=(this._paddingLeft+n)/(1+this._paddingLeft+this._paddingRight),n=ie(n,0,1);const o=n,s=this._cache&&this._cache.get(o);if(s)return s;{let i;if(Array.isArray(this._colors))for(let a=0;a<this._pos.length;a++){const u=this._pos[a];if(n<=u){i=this._colors[a];break}if(n>=u&&a==this._pos.length-1){i=this._colors[a];break}if(n>u&&n<this._pos[a+1]){n=(n-u)/(this._pos[a+1]-u),i=Hn(this._colors[a],this._colors[a+1],n,this._mode);break}}else i=this._colors(n);return this._cache&&this._cache.set(o,i),i}}_tCorrectedLightness(t){const r=this._color(0,!0).lab()[0],n=this._color(1,!0).lab()[0],o=pe(r,n,t);return Qg(s=>this._color(s,!0).lab()[0]-o,0,1,8)}_resetCache(){this._cache&&this._cache.clear()}}var gu;(function(e){function t(){return hu([fu(180,1,.9),fu(250,.7,.4)])}e.cool=t;function r(){return hu(["#000","#f00","#ff0","#fff"]).mode("rgb")}e.hot=r})(gu||(gu={}));function nb(e){const t={min:1/0,max:-1/0,sum:0,values:[],count:0};function r(n){n!=null&&!isNaN(n)&&(t.values.push(n),t.sum+=n,n<t.min&&(t.min=n),n>t.max&&(t.max=n),t.count+=1)}return e.forEach(n=>r(n)),t.domain=[t.min,t.max],t.limits=function(n,o){return Nl(this,n,o)},t}function Nl(e,t="e",r=7){const n=Array.isArray(e)?nb(e):e,{min:o,max:s,values:i}=n;if(i.sort((a,u)=>a-u),r==1)return[o,s];if(t.startsWith("c"))return[o,s];if(t.startsWith("e"))return Array.from({length:r+1},(a,u)=>pe(o,s,u/r));if(t.startsWith("l")){if(o<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*vt(o),u=Math.LOG10E*vt(s);return Array.from({length:r+1},(l,c)=>10**pe(a,u,c/r))}else{if(t.startsWith("q"))return Array.from({length:r+1},(a,u)=>{const l=(i.length-1)*u/r,c=Jg(l);return c==l?i[c]:pe(i[c],i[c+1],l-c)});if(t.startsWith("k")){const a=i.length,u=new Array(a),l=new Array(r);let c=!0,f=0,d=Array.from({length:r+1},(m,O)=>pe(o,s,O/r));do{l.fill(0);for(let O=0;O<i.length;O++){const v=i[O],b=Kl(d,w=>-jr(w-v));l[b]++,u[O]=b}const m=new Array(r).fill(0);for(let O=0;O<u.length;O++){const v=u[O];m[v]+=i[O]}for(let O=0;O<m.length;O++)m[O]/=l[O];c=m.some((O,v)=>O!=d[v]),d=m}while(f++<200&&c);const p=Array.from({length:r},()=>[]);for(let m=0;m<u.length;m++){const O=u[m];p[O].push(i[m])}const h=[];for(const m of p)h.push(m[0],m[m.length-1]);h.sort((m,O)=>m-O);const _=[];_.push(h[0]);for(let m=1;m<h.length;m+=2){const O=h[m];!isNaN(O)&&_.indexOf(O)==-1&&_.push(O)}return _}else throw new Error("unknown mode")}}const Be={},re={};function ob(e,t,r,n){const o=e[n](),s=t[n]();return kt([pe(o[0],s[0],r),pe(o[1],s[1],r),pe(o[2],s[2],r),pe(e.alpha(),t.alpha(),r)],n)}Be.xyz=Be.rgb=Be.lab=ob;Be.num=function(e,t,r){const n=e.num(),o=t.num();return Dl(pe(n,o,r))};Be.lrgb=function(e,t,r){const[n,o,s,i]=e.rgba(!1,!1),[a,u,l,c]=t.rgba(!1,!1);return new et(Jn(n**2*(1-r)+a**2*r),Jn(o**2*(1-r)+u**2*r),Jn(s**2*(1-r)+l**2*r),pe(i,c,r))};function kt(e,t){if(Array.isArray(e[0])&&(e=e[0]),!t)if(e.length==1&&e[0]in _t)t="name";else if(e.length==1&&typeof e[0]=="string")t="css";else if(e.length==3)t="rgb";else if(e.length==4&&typeof e[3]=="number"&&e[3]>=0&&e[3]<=1)t="rgb";else if(e.length==1&&typeof e[0]=="number"&&e[0]>=0&&e[0]<=16777215)t="num";else throw new Error("could not guess mode. args "+JSON.stringify(e));const r=re[t](...e);return new et(r[0],r[1],r[2],r[3]!==void 0?r[3]:1)}function Ll(e){let t;if(t=e.match(/^#?([A-F\d]{2})([A-F\d]{2})([A-F\d]{2})([A-F\d]{2})?$/i))return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),t[4]?parseInt(t[4],16)/255:1];if(t=e.match(/^#?([A-F\d])([A-F\d])([A-F\d])([A-F\d])?$/i))return[parseInt(t[1],16)*17,parseInt(t[2],16)*17,parseInt(t[3],16)*17,t[4]?parseInt(t[4],16)*17/255:1];throw new Error("invalid hex color: "+e)}function sb(e,t,r,n,o="rgb"){e=ie(de(e),0,255),t=ie(de(t),0,255),r=ie(de(r),0,255);const i=(e<<16|t<<8|r).toString(16).padStart(6,"0"),a=de(ie(n)*255).toString(16).padStart(2,"0");return"#"+(o=="argb"?a+i:o=="rgba"?i+a:i)}re.lrgb=re.rgb;re.hex=Ll;re.hsl=Bl;function ts(e){return(e%360+360)%360}re.hsv=Sb;function rs(e){if(!(typeof e=="number"&&e>=0&&e<=16777215))throw new Error("unknown num color: "+e);const t=e>>16,r=e>>8&255,n=e&255;return[t,r,n,1]}function ib(e,t,r,n=1,o="rgb"){const s=de(e)<<16|de(t)<<8|de(r);return o==="rgb"?s:o==="rgba"?s<<8|de(n*255)<<24:de(n*255)<<24|s}re.num=rs;const Br="\\s*",X="([+-]?(?:\\d*\\.?)?\\d+(?:[eE][+-]?\\d+)?)",ab=new RegExp(["^rgba?\\(",X,",",X,",",X,"(?:,",X+"(%)?",")?\\)$"].join(Br),"i"),ub=new RegExp(["^rgba?\\(",X,X,X,"(?:/",X+"(%)?",")?\\)$"].join(Br),"i"),cb=new RegExp(["^rgba?\\(",X+"%",",",X+"%",",",X+"%","(?:,",X+"(%)?",")?\\)$"].join(Br),"i"),lb=new RegExp(["^rgba?\\(",X+"%",X+"%",X+"%","(?:/",X+"(%)?",")?\\)$"].join(Br),"i"),fb=new RegExp(["^hsla?\\(",X+"(deg|rad|turn)?",",",X+"%",",",X+"%","(?:,",X+"(%)?",")?\\)$"].join(Br),"i"),db=new RegExp(["^hsla?\\(",X+"(deg|rad|turn)?\\s+"+X+"%",X+"%","(?:/",X+"(%)?",")?\\)$"].join(Br),"i");function Vl(e){if(_t&&_t.hasOwnProperty(e))return rs(_t[e.toLowerCase()]);let t;if(t=e.match(ab)||e.match(ub))return[ie(+t[1],0,255),ie(+t[2],0,255),ie(+t[3],0,255),t[4]?ie(t[5]?+t[4]/100:+t[4]):1];if(t=e.match(cb)||e.match(lb))return[ie(+t[1]/100)*255,ie(+t[2]/100)*255,ie(+t[3]/100)*255,t[4]?ie(t[5]?+t[4]/100:+t[4]):1];if(t=e.match(fb)||e.match(db)){const r={deg:1,rad:Bi,turn:360},n=t[2]?t[2].toLowerCase():"deg";return Bl((+t[1]*r[n]%360+360)%360,ie(+t[3]/100),ie(+t[4]/100),t[5]?ie(t[6]?+t[5]/100:+t[5]):1)}else return Ll(e)}function hb(e,t,r,n=1){return n>=1?"rgb("+[e,t,r].map(de).join(",")+")":"rgba("+[e,t,r].map(de).join(",")+","+n+")"}function zn(e){return de(e*100)/100}function pb([e,t,r],n){const o=n<1?"hsla":"hsl";return o+"("+zn(e)+","+zn(t*100)+"%,"+zn(r*100)+"%"+(o=="hsla"?","+zn(n):"")+")"}re.css=Vl;re.name=function(e){return rs(_t[e])};function gb(e,t,r){return[e,Zt(r*Xs)*t,Hg(r*Xs)*t]}function bb(e,t,r,n=1){const[,o,s]=gb(e,t,r);return zl(e,o,s,n)}function vb(e,t,r){const n=kl(t,r),o=(Il(r,t)*Bi+360)%360;return[e,n,o]}function _b(e,t,r){const[n,o,s]=ql(e,t,r);return vb(n,o,s)}re.lch=bb;function yb(e,t,r){e/=255,t/=255,r/=255;const n=1-Vi(e,t,r);if(n==1)return[0,0,0,1];const o=(1-e-n)/(1-n),s=(1-t-n)/(1-n),i=(1-r-n)/(1-n);return[o,s,i,n]}function mb(e,t,r,n,o=1){if(n==1)return[0,0,0,o];const s=255*(1-e)*(1-n),i=255*(1-t)*(1-n),a=255*(1-r)*(1-n);return[s,i,a,o]}re.cmyk=mb;re.gl=function(e,t,r,n=1){return[e*255,t*255,r*255,n]};function Os(e){const t=e/255;return t<=.04045?t/12.92:((t+.055)/1.055)**2.4}function Ss(e){return e<=.0031308?255*(12.92*e):255*((1+.055)*e**(1/2.4)-.055)}function wb(e){const t=e/100;let r,n,o;return t<66?(r=255,n=-155.25485562709179-.44596950469579133*(t-2)+104.49216199393888*vt(t-2),o=t<20?0:-254.76935184120902+.8274096064007395*(t-10)+115.67994401066147*vt(t-10)):(r=351.97690566805693+.114206453784165*(t-55)-40.25366309332127*vt(t-55),n=325.4494125711974+.07943456536662342*(t-50)-28.0852963507957*vt(t-50),o=255),[r,n,o]}re.rgb=(...e)=>e;function xb(e,t,r){return console.log(r-e),t+r<158.61?(console.log("0 < t < 20"),de(xs(n=>t-(-155.25485562709179-.44596950469579133*(n-2)+104.49216199393888*vt(n-2)),15,4)*100)):r-e<0?(console.log("20 < t < 66"),de(xs(n=>r-(-254.76935184120902+.8274096064007395*(n-10)+115.67994401066147*vt(n-10)),43,4)*100)):(console.log("0 < t < 400, start= "+(-1.4*(e+t)+755)),de(xs(n=>e-(351.97690566805693+.114206453784165*(n-55)-40.25366309332127*vt(n-55)),-1.4*(e+t)+755,8)*100))}re.temperature=re.kelvin=re.K=wb;function zi(e,t,r){const n=$l(e,t,r),o=Vi(e,t,r),s=o-n;let i;return s==0?i=0:e==o?i=(t-r)/s+(t<r?6:0):t==o?i=2+(r-e)/s:i=4+(e-t)/s,[i*60,n,o]}function Fi(e,t,r,n,o){const s=n*255,i=t*255+s,a=r*255+s;return e<60?[i,a,s,o]:e<120?[a,i,s,o]:e<180?[s,i,a,o]:e<240?[s,a,i,o]:e<300?[a,s,i,o]:[i,s,a,o]}function Bl(e,t,r,n=1){e=ts(e);const o=(1-jr(2*r-1))*t;return Fi(e,o,o*(1-jr(e/60%2-1)),r-o/2,n)}function Ob(e,t,r){const[n,o,s]=zi(e/255,t/255,r/255),i=(s+o)/2;let a;return s==o?a=0:a=i<.5?(s-o)/(s+o):(s-o)/(2-s-o),[n,a,i]}function Sb(e,t,r,n=1){e=ts(e);const o=r*t;return Fi(e,o,o*(1-jr(e/60%2-1)),r-o,n)}function Ab(e,t,r){const[n,o,s]=zi(e,t,r),i=s-o,a=s/255,u=s==0?0:i/s;return[n,u,a]}function Pb(e,t,r,n=1){e=ts(e);const o=r*(1-t);return Fi(e,t,t*(1-jr(e/60%2-1)),o,n)}function Cb(e,t,r){const[n,o,s]=zi(e,t,r),i=(s-o)/255,a=i<1?o/255/(1-i):0;return[n,i,a]}re.hcg=Pb;function zl(e,t,r,n=1){const[o,s,i]=jb(e,t,r);return Wl(o,s,i,n)}function jb(e,t,r){function n(o){return o>Tb?o**3:Ul*(o-4/29)}return[Fl*n((e+16)/116+t/500),Xn*n((e+16)/116),Gl*n((e+16)/116-r/200)]}function Rb(e,t,r){function n(o){return o>Eb?Xg(o):o/Ul+4/29}return[116*n(t/Xn)-16,500*(n(e/Fl)-n(t/Xn)),200*(n(t/Xn)-n(r/Gl))]}const bu=18,Fl=.95047,Xn=1,Gl=1.08883,Tb=.206896552,Ul=.12841855,Eb=.008856452;function ql(e,t,r){const[n,o,s]=Ys(e,t,r);return Rb(n,o,s)}function Ys(e,t,r){const n=Os(e),o=Os(t),s=Os(r),i=.4124564*n+.3575761*o+.1804375*s,a=.2126729*n+.7151522*o+.072175*s,u=.0193339*n+.119192*o+.9503041*s;return[i,a,u]}function Wl(e,t,r,n=1){const o=3.2404542*e-1.5371385*t-.4985314*r,s=-.969266*e+1.8760108*t+.041556*r,i=.0556434*e-.2040259*t+1.0572252*r;return[Ss(o),Ss(s),Ss(i),n]}re.xyz=Wl;re.lab=zl;function Mb(e,t,r,n=1){let o,s,i,a=e*Xs;return a<2*ot/3?(i=(1-t)/3,o=(1+t*Zt(a)/Zt(ot/3-a))/3,s=1-(i+o)):a<4*ot/3?(a-=2*ot/3,o=(1-t)/3,s=(1+t*Zt(a)/Zt(ot/3-a))/3,i=1-(o+s)):(a-=4*ot/3,s=(1-t)/3,i=(1+t*Zt(a)/Zt(ot/3-a))/3,o=1-(s+i)),[3*r*o*255,3*r*s*255,3*r*i*255,n]}function Ib(e,t,r){const n=e/255,o=t/255,s=r/255,i=(n+o+s)/3;if(n==o&&o==s)return[0,0,i];{const a=.5*(2*n-o-s),u=Jn(3)/2*(o-s),l=Il(u,a),f=1-$l(n,o,s)/i;return[(l<0?2*ot+l:l)*Bi,f,i]}}re.hsi=Mb;Be.hsv=Be.hsl=Be.hsi=Be.lch=Be.hcg=function(t,r,n,o){const[s,i,a]=t[o](),[u,l,c]=r[o]();function f(d,p,h){const _=ts(p-d+180)-180;return d+h*_}return fn((o.charAt(0)=="h"?f:pe)(s,u,n),pe(i,l,n),(o.charAt(2)=="h"?f:pe)(a,c,n),o)};function Kl(e,t){let r=-1/0,n=-1;for(let o=0;o<e.length;o++){const s=t(e[o]);s>r&&(r=s,n=o)}return n}function $b(e,t){return e[Kl(e,t)]}function ne(e,t,r){function n(a,u){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:u,constr:i,traits:new Set},enumerable:!1}),a._zod.traits.has(e))return;a._zod.traits.add(e),t(a,u);const l=i.prototype,c=Object.keys(l);for(let f=0;f<c.length;f++){const d=c[f];d in a||(a[d]=l[d].bind(a))}}const o=r?.Parent??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function i(a){var u;const l=r?.Parent?new s:this;n(l,a),(u=l._zod).deferred??(u.deferred=[]);for(const c of l._zod.deferred)c();return l}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>r?.Parent&&a instanceof r.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class nn extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const kb={};function zr(e){return kb}function Db(e,t){return typeof t=="bigint"?t.toString():t}function Nb(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const vu=Symbol("evaluating");function gt(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==vu)return n===void 0&&(n=vu,n=r()),n},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}const Zl="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function _u(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Lb(e){if(_u(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(_u(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Vb(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function dr(e){return{}}function Xr(e,t=0){if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function Yr(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Fn(e){return typeof e=="string"?e:e?.message}function Fr(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const o=Fn(e.inst?._zod.def?.error?.(e))??Fn(t?.error?.(e))??Fn(r.customError?.(e))??Fn(r.localeError?.(e))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}const Jl=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Db,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Bb=ne("$ZodError",Jl),ns=ne("$ZodError",Jl,{Parent:Error}),zb=e=>(t,r,n,o)=>{const s=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new nn;if(i.issues.length){const a=new(o?.Err??e)(i.issues.map(u=>Fr(u,s,zr())));throw Zl(a,o?.callee),a}return i.value},Fb=zb(ns),Gb=e=>async(t,r,n,o)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new(o?.Err??e)(i.issues.map(u=>Fr(u,s,zr())));throw Zl(a,o?.callee),a}return i.value},Ub=Gb(ns),qb=e=>(t,r,n)=>{const o=n?{...n,async:!1}:{async:!1},s=t._zod.run({value:r,issues:[]},o);if(s instanceof Promise)throw new nn;return s.issues.length?{success:!1,error:new(e??Bb)(s.issues.map(i=>Fr(i,o,zr())))}:{success:!0,data:s.value}},Hl=qb(ns),Wb=e=>async(t,r,n)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let s=t._zod.run({value:r,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(i=>Fr(i,o,zr())))}:{success:!0,data:s.value}},Xl=Wb(ns),Kb=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Zb=/^-?\d+(?:\.\d+)?/,Jb=/^(?:true|false)$/i,Hb=/^null$/i,Xb={major:4,minor:1,patch:13},Mt=ne("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Xb;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const s of o._zod.onattach)s(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,a,u)=>{let l=Xr(i),c;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(l)continue;const d=i.issues.length,p=f._zod.check(i);if(p instanceof Promise&&u?.async===!1)throw new nn;if(c||p instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await p,i.issues.length!==d&&(l||(l=Xr(i,d)))});else{if(i.issues.length===d)continue;l||(l=Xr(i,d))}}return c?c.then(()=>i):i},s=(i,a,u)=>{if(Xr(i))return i.aborted=!0,i;const l=o(a,n,u);if(l instanceof Promise){if(u.async===!1)throw new nn;return l.then(c=>e._zod.parse(c,u))}return e._zod.parse(l,u)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if(a.direction==="backward"){const l=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return l instanceof Promise?l.then(c=>s(c,i,a)):s(l,i,a)}const u=e._zod.parse(i,a);if(u instanceof Promise){if(a.async===!1)throw new nn;return u.then(l=>o(l,n,a))}return o(u,n,a)}}e["~standard"]={validate:o=>{try{const s=Hl(e,o);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return Xl(e,o).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}}),Yb=ne("$ZodString",(e,t)=>{Mt.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Kb(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Qb=ne("$ZodNumber",(e,t)=>{Mt.init(e,t),e._zod.pattern=e._zod.bag.pattern??Zb,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),r}}),ev=ne("$ZodBoolean",(e,t)=>{Mt.init(e,t),e._zod.pattern=Jb,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),r}}),tv=ne("$ZodNull",(e,t)=>{Mt.init(e,t),e._zod.pattern=Hb,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),r}});function yu(e,t,r){e.issues.length&&t.issues.push(...Yr(r,e.issues)),t.value[r]=e.value}const rv=ne("$ZodArray",(e,t)=>{Mt.init(e,t),e._zod.parse=(r,n)=>{const o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),r;r.value=Array(o.length);const s=[];for(let i=0;i<o.length;i++){const a=o[i],u=t.element._zod.run({value:a,issues:[]},n);u instanceof Promise?s.push(u.then(l=>yu(l,r,i))):yu(u,r,i)}return s.length?Promise.all(s).then(()=>r):r}});function mu(e,t,r,n){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const o=e.filter(s=>!Xr(s));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(s=>s.issues.map(i=>Fr(i,n,zr())))}),t)}const nv=ne("$ZodUnion",(e,t)=>{Mt.init(e,t),gt(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),gt(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),gt(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),gt(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${o.map(s=>Nb(s.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(o,s)=>{if(r)return n(o,s);let i=!1;const a=[];for(const u of t.options){const l=u._zod.run({value:o.value,issues:[]},s);if(l instanceof Promise)a.push(l),i=!0;else{if(l.issues.length===0)return l;a.push(l)}}return i?Promise.all(a).then(u=>mu(u,o,e,s)):mu(a,o,e,s)}}),ov=ne("$ZodRecord",(e,t)=>{Mt.init(e,t),e._zod.parse=(r,n)=>{const o=r.value;if(!Lb(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),r;const s=[],i=t.keyType._zod.values;if(i){r.value={};const a=new Set;for(const l of i)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){a.add(typeof l=="number"?l.toString():l);const c=t.valueType._zod.run({value:o[l],issues:[]},n);c instanceof Promise?s.push(c.then(f=>{f.issues.length&&r.issues.push(...Yr(l,f.issues)),r.value[l]=f.value})):(c.issues.length&&r.issues.push(...Yr(l,c.issues)),r.value[l]=c.value)}let u;for(const l in o)a.has(l)||(u=u??[],u.push(l));u&&u.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:u})}else{r.value={};for(const a of Reflect.ownKeys(o)){if(a==="__proto__")continue;const u=t.keyType._zod.run({value:a,issues:[]},n);if(u instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(u.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:u.issues.map(c=>Fr(c,n,zr())),input:a,path:[a],inst:e}),r.value[u.value]=u.value;continue}const l=t.valueType._zod.run({value:o[a],issues:[]},n);l instanceof Promise?s.push(l.then(c=>{c.issues.length&&r.issues.push(...Yr(a,c.issues)),r.value[u.value]=c.value})):(l.issues.length&&r.issues.push(...Yr(a,l.issues)),r.value[u.value]=l.value)}}return s.length?Promise.all(s).then(()=>r):r}}),sv=ne("$ZodLazy",(e,t)=>{Mt.init(e,t),gt(e._zod,"innerType",()=>t.getter()),gt(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),gt(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),gt(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),gt(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(r,n)=>e._zod.innerType._zod.run(r,n)});var wu;class iv{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const o={...n,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function av(){return new iv}(wu=globalThis).__zod_globalRegistry??(wu.__zod_globalRegistry=av());function uv(e,t){return new e({type:"string",...dr()})}function cv(e,t){return new e({type:"number",checks:[],...dr()})}function lv(e,t){return new e({type:"boolean",...dr()})}function fv(e,t){return new e({type:"null",...dr()})}const qt=ne("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");Mt.init(e,t),e.def=t,e.type=t.type,e.parse=(r,n)=>Fb(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Hl(e,r,n),e.parseAsync=async(r,n)=>Ub(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Xl(e,r,n),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>Vb(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e))}),dv=ne("ZodMiniString",(e,t)=>{Yb.init(e,t),qt.init(e,t)});function Gi(e){return uv(dv)}const hv=ne("ZodMiniNumber",(e,t)=>{Qb.init(e,t),qt.init(e,t)});function pv(e){return cv(hv)}const gv=ne("ZodMiniBoolean",(e,t)=>{ev.init(e,t),qt.init(e,t)});function bv(e){return lv(gv)}const vv=ne("ZodMiniNull",(e,t)=>{tv.init(e,t),qt.init(e,t)});function _v(e){return fv(vv)}const yv=ne("ZodMiniArray",(e,t)=>{rv.init(e,t),qt.init(e,t)});function mv(e,t){return new yv({type:"array",element:e,...dr()})}const wv=ne("ZodMiniUnion",(e,t)=>{nv.init(e,t),qt.init(e,t)});function Yl(e,t){return new wv({type:"union",options:e,...dr()})}const xv=ne("ZodMiniRecord",(e,t)=>{ov.init(e,t),qt.init(e,t)});function Ql(e,t,r){return new xv({type:"record",keyType:e,valueType:t,...dr()})}const Ov=ne("ZodMiniLazy",(e,t)=>{sv.init(e,t),qt.init(e,t)});function Sv(e){return new Ov({type:"lazy",getter:e})}const Av=Yl([Gi(),pv(),bv(),_v()]),Qs=Sv(()=>Yl([Av,mv(Qs),Ql(Gi(),Qs)]));Ql(Gi(),Qs);export{Wv as A,fn as B,Kv as C,Bv as D,zv as E,Fv as F,ff as G,Rv as H,_h as I,ai as J,io as K,Qs as L,Xo as M,Uv as O,ct as R,Qd as a,qv as b,Yd as c,Y as d,A as e,ii as f,jv as g,Yt as h,Vv as i,Yo as j,Ev as k,kv as l,Lo as m,Mv as n,N as o,Ls as p,Tv as q,oo as r,we as s,Iv as t,Lv as u,$v as v,Dv as w,Gv as x,Nv as y,Rr as z};
